<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Spades</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Outfit:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              sans: ['Inter', 'sans-serif'],
              display: ['Outfit', 'sans-serif'],
              mono: ['JetBrains Mono', 'monospace'],
            },
            colors: {
              brand: {
                obsidian: '#050505',
                charcoal: '#0a0a0a',
                card: '#121212',
                red: '#d92323',
                deepRed: '#500808',
                gold: '#e2b15b',
                goldDim: '#8a6d3b',
              }
            },
            animation: {
              'pulse-slow': 'pulse 8s cubic-bezier(0.4, 0, 0.6, 1) infinite',
              'float': 'float 10s ease-in-out infinite',
              'shine': 'shine 6s linear infinite',
              'shimmer': 'shimmer 3s ease-in-out infinite alternate',
              'glow': 'glow 4s ease-in-out infinite alternate',
            },
            keyframes: {
              float: {
                '0%, 100%': { transform: 'translateY(0)' },
                '50%': { transform: 'translateY(-15px)' },
              },
              shine: {
                '0%': { backgroundPosition: '200% center' },
                '100%': { backgroundPosition: '-200% center' },
              },
              shimmer: {
                '0%': { opacity: 0.5 },
                '100%': { opacity: 1 },
              },
              glow: {
                '0%': { boxShadow: '0 0 10px rgba(217, 35, 35, 0.1)' },
                '100%': { boxShadow: '0 0 30px rgba(217, 35, 35, 0.3), 0 0 15px rgba(226, 177, 91, 0.1)' }
              }
            }
          }
        }
      }
    </script>
    <style>
      body {
        background-color: #020202;
        color: #f5f5f5;
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      
      /* Ultra-Premium Background */
      .cinematic-bg {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        z-index: -1;
        background: radial-gradient(circle at 50% -20%, #1a0505 0%, #020202 50%);
        pointer-events: none;
      }

      .noise-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        opacity: 0.04;
        background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
        pointer-events: none;
        mix-blend-mode: overlay;
      }

      /* Refined Scrollbar */
      ::-webkit-scrollbar {
        width: 4px;
      }
      ::-webkit-scrollbar-track {
        background: #020202;
      }
      ::-webkit-scrollbar-thumb {
        background: #333;
        border-radius: 4px;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #d92323;
      }
      
      /* High-End Glassmorphism */
      .glass-panel {
        background: rgba(10, 10, 10, 0.6);
        backdrop-filter: blur(24px) saturate(180%);
        -webkit-backdrop-filter: blur(24px) saturate(180%);
        border: 1px solid rgba(255, 255, 255, 0.05);
        box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
      }
      
      .glass-card-hover {
        transition: all 0.5s cubic-bezier(0.2, 0.8, 0.2, 1);
      }
      .glass-card-hover:hover {
        background: rgba(20, 20, 20, 0.8);
        border-color: rgba(255, 255, 255, 0.1);
        transform: translateY(-4px);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7);
      }

      /* Gold Text Effect */
      .text-gradient-gold {
        background: linear-gradient(135deg, #fceeb5 0%, #e2b15b 50%, #8a6d3b 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-size: 100% auto;
      }
      
      /* Red Text Effect */
      .text-gradient-red {
        background: linear-gradient(135deg, #ff8080 0%, #d92323 60%, #500808 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
      }
    </style>


  <script type="module" crossorigin>(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function aT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ph={exports:{}},vl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tv;function _b(){if(tv)return vl;tv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,r,l){var u=null;if(l!==void 0&&(u=""+l),r.key!==void 0&&(u=""+r.key),"key"in r){l={};for(var f in r)f!=="key"&&(l[f]=r[f])}else l=r;return r=l.ref,{$$typeof:n,type:s,key:u,ref:r!==void 0?r:null,props:l}}return vl.Fragment=e,vl.jsx=t,vl.jsxs=t,vl}var nv;function Eb(){return nv||(nv=1,Ph.exports=_b()),Ph.exports}var E=Eb(),Vh={exports:{}},Pe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv;function Tb(){if(iv)return Pe;iv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),x=Symbol.iterator;function w(B){return B===null||typeof B!="object"?null:(B=x&&B[x]||B["@@iterator"],typeof B=="function"?B:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,P={};function H(B,Q,le){this.props=B,this.context=Q,this.refs=P,this.updater=le||k}H.prototype.isReactComponent={},H.prototype.setState=function(B,Q){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,Q,"setState")},H.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function te(){}te.prototype=H.prototype;function j(B,Q,le){this.props=B,this.context=Q,this.refs=P,this.updater=le||k}var oe=j.prototype=new te;oe.constructor=j,q(oe,H.prototype),oe.isPureReactComponent=!0;var de=Array.isArray;function ce(){}var D={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function R(B,Q,le){var he=le.ref;return{$$typeof:n,type:B,key:Q,ref:he!==void 0?he:null,props:le}}function O(B,Q){return R(B.type,Q,B.props)}function U(B){return typeof B=="object"&&B!==null&&B.$$typeof===n}function V(B){var Q={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(le){return Q[le]})}var N=/\/+/g;function ye(B,Q){return typeof B=="object"&&B!==null&&B.key!=null?V(""+B.key):Q.toString(36)}function ee(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(ce,ce):(B.status="pending",B.then(function(Q){B.status==="pending"&&(B.status="fulfilled",B.value=Q)},function(Q){B.status==="pending"&&(B.status="rejected",B.reason=Q)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function F(B,Q,le,he,Ee){var Re=typeof B;(Re==="undefined"||Re==="boolean")&&(B=null);var Ce=!1;if(B===null)Ce=!0;else switch(Re){case"bigint":case"string":case"number":Ce=!0;break;case"object":switch(B.$$typeof){case n:case e:Ce=!0;break;case _:return Ce=B._init,F(Ce(B._payload),Q,le,he,Ee)}}if(Ce)return Ee=Ee(B),Ce=he===""?"."+ye(B,0):he,de(Ee)?(le="",Ce!=null&&(le=Ce.replace(N,"$&/")+"/"),F(Ee,Q,le,"",function(qi){return qi})):Ee!=null&&(U(Ee)&&(Ee=O(Ee,le+(Ee.key==null||B&&B.key===Ee.key?"":(""+Ee.key).replace(N,"$&/")+"/")+Ce)),Q.push(Ee)),1;Ce=0;var pt=he===""?".":he+":";if(de(B))for(var We=0;We<B.length;We++)he=B[We],Re=pt+ye(he,We),Ce+=F(he,Q,le,Re,Ee);else if(We=w(B),typeof We=="function")for(B=We.call(B),We=0;!(he=B.next()).done;)he=he.value,Re=pt+ye(he,We++),Ce+=F(he,Q,le,Re,Ee);else if(Re==="object"){if(typeof B.then=="function")return F(ee(B),Q,le,he,Ee);throw Q=String(B),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return Ce}function ae(B,Q,le){if(B==null)return B;var he=[],Ee=0;return F(B,he,"","",function(Re){return Q.call(le,Re,Ee++)}),he}function _e(B){if(B._status===-1){var Q=B._result;Q=Q(),Q.then(function(le){(B._status===0||B._status===-1)&&(B._status=1,B._result=le)},function(le){(B._status===0||B._status===-1)&&(B._status=2,B._result=le)}),B._status===-1&&(B._status=0,B._result=Q)}if(B._status===1)return B._result.default;throw B._result}var ue=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},Se={map:ae,forEach:function(B,Q,le){ae(B,function(){Q.apply(this,arguments)},le)},count:function(B){var Q=0;return ae(B,function(){Q++}),Q},toArray:function(B){return ae(B,function(Q){return Q})||[]},only:function(B){if(!U(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Pe.Activity=T,Pe.Children=Se,Pe.Component=H,Pe.Fragment=t,Pe.Profiler=r,Pe.PureComponent=j,Pe.StrictMode=s,Pe.Suspense=g,Pe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Pe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return D.H.useMemoCache(B)}},Pe.cache=function(B){return function(){return B.apply(null,arguments)}},Pe.cacheSignal=function(){return null},Pe.cloneElement=function(B,Q,le){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var he=q({},B.props),Ee=B.key;if(Q!=null)for(Re in Q.key!==void 0&&(Ee=""+Q.key),Q)!M.call(Q,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&Q.ref===void 0||(he[Re]=Q[Re]);var Re=arguments.length-2;if(Re===1)he.children=le;else if(1<Re){for(var Ce=Array(Re),pt=0;pt<Re;pt++)Ce[pt]=arguments[pt+2];he.children=Ce}return R(B.type,Ee,he)},Pe.createContext=function(B){return B={$$typeof:u,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:l,_context:B},B},Pe.createElement=function(B,Q,le){var he,Ee={},Re=null;if(Q!=null)for(he in Q.key!==void 0&&(Re=""+Q.key),Q)M.call(Q,he)&&he!=="key"&&he!=="__self"&&he!=="__source"&&(Ee[he]=Q[he]);var Ce=arguments.length-2;if(Ce===1)Ee.children=le;else if(1<Ce){for(var pt=Array(Ce),We=0;We<Ce;We++)pt[We]=arguments[We+2];Ee.children=pt}if(B&&B.defaultProps)for(he in Ce=B.defaultProps,Ce)Ee[he]===void 0&&(Ee[he]=Ce[he]);return R(B,Re,Ee)},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(B){return{$$typeof:f,render:B}},Pe.isValidElement=U,Pe.lazy=function(B){return{$$typeof:_,_payload:{_status:-1,_result:B},_init:_e}},Pe.memo=function(B,Q){return{$$typeof:h,type:B,compare:Q===void 0?null:Q}},Pe.startTransition=function(B){var Q=D.T,le={};D.T=le;try{var he=B(),Ee=D.S;Ee!==null&&Ee(le,he),typeof he=="object"&&he!==null&&typeof he.then=="function"&&he.then(ce,ue)}catch(Re){ue(Re)}finally{Q!==null&&le.types!==null&&(Q.types=le.types),D.T=Q}},Pe.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Pe.use=function(B){return D.H.use(B)},Pe.useActionState=function(B,Q,le){return D.H.useActionState(B,Q,le)},Pe.useCallback=function(B,Q){return D.H.useCallback(B,Q)},Pe.useContext=function(B){return D.H.useContext(B)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(B,Q){return D.H.useDeferredValue(B,Q)},Pe.useEffect=function(B,Q){return D.H.useEffect(B,Q)},Pe.useEffectEvent=function(B){return D.H.useEffectEvent(B)},Pe.useId=function(){return D.H.useId()},Pe.useImperativeHandle=function(B,Q,le){return D.H.useImperativeHandle(B,Q,le)},Pe.useInsertionEffect=function(B,Q){return D.H.useInsertionEffect(B,Q)},Pe.useLayoutEffect=function(B,Q){return D.H.useLayoutEffect(B,Q)},Pe.useMemo=function(B,Q){return D.H.useMemo(B,Q)},Pe.useOptimistic=function(B,Q){return D.H.useOptimistic(B,Q)},Pe.useReducer=function(B,Q,le){return D.H.useReducer(B,Q,le)},Pe.useRef=function(B){return D.H.useRef(B)},Pe.useState=function(B){return D.H.useState(B)},Pe.useSyncExternalStore=function(B,Q,le){return D.H.useSyncExternalStore(B,Q,le)},Pe.useTransition=function(){return D.H.useTransition()},Pe.version="19.2.3",Pe}var sv;function Up(){return sv||(sv=1,Vh.exports=Tb()),Vh.exports}var pe=Up();const xb=aT(pe);var kh={exports:{}},_l={},Uh={exports:{}},Lh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ov;function Sb(){return ov||(ov=1,(function(n){function e(F,ae){var _e=F.length;F.push(ae);e:for(;0<_e;){var ue=_e-1>>>1,Se=F[ue];if(0<r(Se,ae))F[ue]=ae,F[_e]=Se,_e=ue;else break e}}function t(F){return F.length===0?null:F[0]}function s(F){if(F.length===0)return null;var ae=F[0],_e=F.pop();if(_e!==ae){F[0]=_e;e:for(var ue=0,Se=F.length,B=Se>>>1;ue<B;){var Q=2*(ue+1)-1,le=F[Q],he=Q+1,Ee=F[he];if(0>r(le,_e))he<Se&&0>r(Ee,le)?(F[ue]=Ee,F[he]=_e,ue=he):(F[ue]=le,F[Q]=_e,ue=Q);else if(he<Se&&0>r(Ee,_e))F[ue]=Ee,F[he]=_e,ue=he;else break e}}return ae}function r(F,ae){var _e=F.sortIndex-ae.sortIndex;return _e!==0?_e:F.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var g=[],h=[],_=1,T=null,x=3,w=!1,k=!1,q=!1,P=!1,H=typeof setTimeout=="function"?setTimeout:null,te=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function oe(F){for(var ae=t(h);ae!==null;){if(ae.callback===null)s(h);else if(ae.startTime<=F)s(h),ae.sortIndex=ae.expirationTime,e(g,ae);else break;ae=t(h)}}function de(F){if(q=!1,oe(F),!k)if(t(g)!==null)k=!0,ce||(ce=!0,V());else{var ae=t(h);ae!==null&&ee(de,ae.startTime-F)}}var ce=!1,D=-1,M=5,R=-1;function O(){return P?!0:!(n.unstable_now()-R<M)}function U(){if(P=!1,ce){var F=n.unstable_now();R=F;var ae=!0;try{e:{k=!1,q&&(q=!1,te(D),D=-1),w=!0;var _e=x;try{t:{for(oe(F),T=t(g);T!==null&&!(T.expirationTime>F&&O());){var ue=T.callback;if(typeof ue=="function"){T.callback=null,x=T.priorityLevel;var Se=ue(T.expirationTime<=F);if(F=n.unstable_now(),typeof Se=="function"){T.callback=Se,oe(F),ae=!0;break t}T===t(g)&&s(g),oe(F)}else s(g);T=t(g)}if(T!==null)ae=!0;else{var B=t(h);B!==null&&ee(de,B.startTime-F),ae=!1}}break e}finally{T=null,x=_e,w=!1}ae=void 0}}finally{ae?V():ce=!1}}}var V;if(typeof j=="function")V=function(){j(U)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,ye=N.port2;N.port1.onmessage=U,V=function(){ye.postMessage(null)}}else V=function(){H(U,0)};function ee(F,ae){D=H(function(){F(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(F){switch(x){case 1:case 2:case 3:var ae=3;break;default:ae=x}var _e=x;x=ae;try{return F()}finally{x=_e}},n.unstable_requestPaint=function(){P=!0},n.unstable_runWithPriority=function(F,ae){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var _e=x;x=F;try{return ae()}finally{x=_e}},n.unstable_scheduleCallback=function(F,ae,_e){var ue=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?ue+_e:ue):_e=ue,F){case 1:var Se=-1;break;case 2:Se=250;break;case 5:Se=1073741823;break;case 4:Se=1e4;break;default:Se=5e3}return Se=_e+Se,F={id:_++,callback:ae,priorityLevel:F,startTime:_e,expirationTime:Se,sortIndex:-1},_e>ue?(F.sortIndex=_e,e(h,F),t(g)===null&&F===t(h)&&(q?(te(D),D=-1):q=!0,ee(de,_e-ue))):(F.sortIndex=Se,e(g,F),k||w||(k=!0,ce||(ce=!0,V()))),F},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(F){var ae=x;return function(){var _e=x;x=ae;try{return F.apply(this,arguments)}finally{x=_e}}}})(Lh)),Lh}var rv;function Ab(){return rv||(rv=1,Uh.exports=Sb()),Uh.exports}var Oh={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var av;function bb(){if(av)return Zt;av=1;var n=Up();function e(g){var h="https://react.dev/errors/"+g;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)h+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+g+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(g,h,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:g,containerInfo:h,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(g,h){if(g==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,Zt.createPortal=function(g,h){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return l(g,h,null,_)},Zt.flushSync=function(g){var h=u.T,_=s.p;try{if(u.T=null,s.p=2,g)return g()}finally{u.T=h,s.p=_,s.d.f()}},Zt.preconnect=function(g,h){typeof g=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,s.d.C(g,h))},Zt.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},Zt.preinit=function(g,h){if(typeof g=="string"&&h&&typeof h.as=="string"){var _=h.as,T=f(_,h.crossOrigin),x=typeof h.integrity=="string"?h.integrity:void 0,w=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;_==="style"?s.d.S(g,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:x,fetchPriority:w}):_==="script"&&s.d.X(g,{crossOrigin:T,integrity:x,fetchPriority:w,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},Zt.preinitModule=function(g,h){if(typeof g=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var _=f(h.as,h.crossOrigin);s.d.M(g,{crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&s.d.M(g)},Zt.preload=function(g,h){if(typeof g=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var _=h.as,T=f(_,h.crossOrigin);s.d.L(g,_,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},Zt.preloadModule=function(g,h){if(typeof g=="string")if(h){var _=f(h.as,h.crossOrigin);s.d.m(g,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:_,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else s.d.m(g)},Zt.requestFormReset=function(g){s.d.r(g)},Zt.unstable_batchedUpdates=function(g,h){return g(h)},Zt.useFormState=function(g,h,_){return u.H.useFormState(g,h,_)},Zt.useFormStatus=function(){return u.H.useHostTransitionStatus()},Zt.version="19.2.3",Zt}var lv;function wb(){if(lv)return Oh.exports;lv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Oh.exports=bb(),Oh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv;function Cb(){if(uv)return _l;uv=1;var n=Ab(),e=Up(),t=wb();function s(i){var o="https://react.dev/errors/"+i;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var o=i,a=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(a=o.return),i=o.return;while(i)}return o.tag===3?a:null}function u(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function f(i){if(i.tag===31){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function g(i){if(l(i)!==i)throw Error(s(188))}function h(i){var o=i.alternate;if(!o){if(o=l(i),o===null)throw Error(s(188));return o!==i?null:i}for(var a=i,c=o;;){var y=a.return;if(y===null)break;var v=y.alternate;if(v===null){if(c=y.return,c!==null){a=c;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===a)return g(y),i;if(v===c)return g(y),o;v=v.sibling}throw Error(s(188))}if(a.return!==c.return)a=y,c=v;else{for(var A=!1,C=y.child;C;){if(C===a){A=!0,a=y,c=v;break}if(C===c){A=!0,c=y,a=v;break}C=C.sibling}if(!A){for(C=v.child;C;){if(C===a){A=!0,a=v,c=y;break}if(C===c){A=!0,c=v,a=y;break}C=C.sibling}if(!A)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?i:o}function _(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i;for(i=i.child;i!==null;){if(o=_(i),o!==null)return o;i=i.sibling}return null}var T=Object.assign,x=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),H=Symbol.for("react.profiler"),te=Symbol.for("react.consumer"),j=Symbol.for("react.context"),oe=Symbol.for("react.forward_ref"),de=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function V(i){return i===null||typeof i!="object"?null:(i=U&&i[U]||i["@@iterator"],typeof i=="function"?i:null)}var N=Symbol.for("react.client.reference");function ye(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===N?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case q:return"Fragment";case H:return"Profiler";case P:return"StrictMode";case de:return"Suspense";case ce:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case k:return"Portal";case j:return i.displayName||"Context";case te:return(i._context.displayName||"Context")+".Consumer";case oe:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return o=i.displayName||null,o!==null?o:ye(i.type)||"Memo";case M:o=i._payload,i=i._init;try{return ye(i(o))}catch{}}return null}var ee=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},ue=[],Se=-1;function B(i){return{current:i}}function Q(i){0>Se||(i.current=ue[Se],ue[Se]=null,Se--)}function le(i,o){Se++,ue[Se]=i.current,i.current=o}var he=B(null),Ee=B(null),Re=B(null),Ce=B(null);function pt(i,o){switch(le(Re,o),le(Ee,i),le(he,null),o.nodeType){case 9:case 11:i=(i=o.documentElement)&&(i=i.namespaceURI)?A0(i):0;break;default:if(i=o.tagName,o=o.namespaceURI)o=A0(o),i=b0(o,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}Q(he),le(he,i)}function We(){Q(he),Q(Ee),Q(Re)}function qi(i){i.memoizedState!==null&&le(Ce,i);var o=he.current,a=b0(o,i.type);o!==a&&(le(Ee,i),le(he,a))}function hs(i){Ee.current===i&&(Q(he),Q(Ee)),Ce.current===i&&(Q(Ce),pl._currentValue=_e)}var Zo,er;function ui(i){if(Zo===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);Zo=o&&o[1]||"",er=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zo+i+er}var pa=!1;function co(i,o){if(!i||pa)return"";pa=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(W){var $=W}Reflect.construct(i,[],se)}else{try{se.call()}catch(W){$=W}i.call(se.prototype)}}else{try{throw Error()}catch(W){$=W}(se=i())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(W){if(W&&$&&typeof W.stack=="string")return[W.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),A=v[0],C=v[1];if(A&&C){var L=A.split(`
`),K=C.split(`
`);for(y=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;y<K.length&&!K[y].includes("DetermineComponentFrameRoot");)y++;if(c===L.length||y===K.length)for(c=L.length-1,y=K.length-1;1<=c&&0<=y&&L[c]!==K[y];)y--;for(;1<=c&&0<=y;c--,y--)if(L[c]!==K[y]){if(c!==1||y!==1)do if(c--,y--,0>y||L[c]!==K[y]){var Z=`
`+L[c].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=c&&0<=y);break}}}finally{pa=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?ui(a):""}function ma(i,o){switch(i.tag){case 26:case 27:case 5:return ui(i.type);case 16:return ui("Lazy");case 13:return i.child!==o&&o!==null?ui("Suspense Fallback"):ui("Suspense");case 19:return ui("SuspenseList");case 0:case 15:return co(i.type,!1);case 11:return co(i.type.render,!1);case 1:return co(i.type,!0);case 31:return ui("Activity");default:return""}}function ga(i){try{var o="",a=null;do o+=ma(i,a),a=i,i=i.return;while(i);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var At=Object.prototype.hasOwnProperty,Ut=n.unstable_scheduleCallback,ps=n.unstable_cancelCallback,Vd=n.unstable_shouldYield,Jl=n.unstable_requestPaint,on=n.unstable_now,fo=n.unstable_getCurrentPriorityLevel,ya=n.unstable_ImmediatePriority,va=n.unstable_UserBlockingPriority,ms=n.unstable_NormalPriority,kd=n.unstable_LowPriority,Kl=n.unstable_IdlePriority,$l=n.log,Ql=n.unstable_setDisableYieldValue,Jn=null,zt=null;function Nn(i){if(typeof $l=="function"&&Ql(i),zt&&typeof zt.setStrictMode=="function")try{zt.setStrictMode(Jn,i)}catch{}}var _t=Math.clz32?Math.clz32:Wl,Xl=Math.log,tr=Math.LN2;function Wl(i){return i>>>=0,i===0?32:31-(Xl(i)/tr|0)|0}var ci=256,ho=262144,bt=4194304;function di(i){var o=i&42;if(o!==0)return o;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function fi(i,o,a){var c=i.pendingLanes;if(c===0)return 0;var y=0,v=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var C=c&134217727;return C!==0?(c=C&~v,c!==0?y=di(c):(A&=C,A!==0?y=di(A):a||(a=C&~i,a!==0&&(y=di(a))))):(C=c&~v,C!==0?y=di(C):A!==0?y=di(A):a||(a=c&~i,a!==0&&(y=di(a)))),y===0?0:o!==0&&o!==y&&(o&v)===0&&(v=y&-y,a=o&-o,v>=a||v===32&&(a&4194048)!==0)?o:y}function Kn(i,o){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&o)===0}function Ud(i,o){switch(i){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Zl(){var i=bt;return bt<<=1,(bt&62914560)===0&&(bt=4194304),i}function hi(i){for(var o=[],a=0;31>a;a++)o.push(i);return o}function po(i,o){i.pendingLanes|=o,o!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Ld(i,o,a,c,y,v){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var C=i.entanglements,L=i.expirationTimes,K=i.hiddenUpdates;for(a=A&~a;0<a;){var Z=31-_t(a),se=1<<Z;C[Z]=0,L[Z]=-1;var $=K[Z];if($!==null)for(K[Z]=null,Z=0;Z<$.length;Z++){var W=$[Z];W!==null&&(W.lane&=-536870913)}a&=~se}c!==0&&mo(i,c,0),v!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=v&~(A&~o))}function mo(i,o,a){i.pendingLanes|=o,i.suspendedLanes&=~o;var c=31-_t(o);i.entangledLanes|=o,i.entanglements[c]=i.entanglements[c]|1073741824|a&261930}function _a(i,o){var a=i.entangledLanes|=o;for(i=i.entanglements;a;){var c=31-_t(a),y=1<<c;y&o|i[c]&o&&(i[c]|=o),a&=~y}}function Ea(i,o){var a=o&-o;return a=(a&42)!==0?1:go(a),(a&(i.suspendedLanes|o))!==0?0:a}function go(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Bi(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function eu(){var i=ae.p;return i!==0?i:(i=window.event,i===void 0?32:K0(i.type))}function $n(i,o){var a=ae.p;try{return ae.p=i,o()}finally{ae.p=a}}var Qn=Math.random().toString(36).slice(2),wt="__reactFiber$"+Qn,qt="__reactProps$"+Qn,pi="__reactContainer$"+Qn,nr="__reactEvents$"+Qn,Od="__reactListeners$"+Qn,tu="__reactHandles$"+Qn,nu="__reactResources$"+Qn,mi="__reactMarker$"+Qn;function ir(i){delete i[wt],delete i[qt],delete i[nr],delete i[Od],delete i[tu]}function gi(i){var o=i[wt];if(o)return o;for(var a=i.parentNode;a;){if(o=a[pi]||a[wt]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(i=D0(i);i!==null;){if(a=i[wt])return a;i=D0(i)}return o}i=a,a=i.parentNode}return null}function Rn(i){if(i=i[wt]||i[pi]){var o=i.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return i}return null}function _n(i){var o=i.tag;if(o===5||o===26||o===27||o===6)return i.stateNode;throw Error(s(33))}function yi(i){var o=i[nu];return o||(o=i[nu]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ct(i){i[mi]=!0}var Ta=new Set,xa={};function vi(i,o){_i(i,o),_i(i+"Capture",o)}function _i(i,o){for(xa[i]=o,i=0;i<o.length;i++)Ta.add(o[i])}var Sa=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Aa={},ba={};function iu(i){return At.call(ba,i)?!0:At.call(Aa,i)?!1:Sa.test(i)?ba[i]=!0:(Aa[i]=!0,!1)}function sr(i,o,a){if(iu(o))if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(o);return}}i.setAttribute(o,""+a)}}function En(i,o,a){if(a===null)i.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttribute(o,""+a)}}function It(i,o,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(o,a,""+c)}}function Bt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function gs(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wa(i,o,a){var c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o);if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,v=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return y.call(this)},set:function(A){a=""+A,v.call(this,A)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function et(i){if(!i._valueTracker){var o=gs(i)?"checked":"value";i._valueTracker=wa(i,o,""+i[o])}}function yo(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var a=o.getValue(),c="";return i&&(c=gs(i)?i.checked?"true":"false":i.value),i=c,i!==a?(o.setValue(i),!0):!1}function Ei(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var vo=/[\n"\\]/g;function cn(i){return i.replace(vo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function or(i,o,a,c,y,v,A,C){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),o!=null?A==="number"?(o===0&&i.value===""||i.value!=o)&&(i.value=""+Bt(o)):i.value!==""+Bt(o)&&(i.value=""+Bt(o)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),o!=null?Ca(i,A,Bt(o)):a!=null?Ca(i,A,Bt(a)):c!=null&&i.removeAttribute("value"),y==null&&v!=null&&(i.defaultChecked=!!v),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?i.name=""+Bt(C):i.removeAttribute("name")}function su(i,o,a,c,y,v,A,C){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(i.type=v),o!=null||a!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){et(i);return}a=a!=null?""+Bt(a):"",o=o!=null?""+Bt(o):a,C||o===i.value||(i.value=o),i.defaultValue=o}c=c??y,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=C?i.checked:!!c,i.defaultChecked=!!c,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),et(i)}function Ca(i,o,a){o==="number"&&Ei(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function ys(i,o,a,c){if(i=i.options,o){o={};for(var y=0;y<a.length;y++)o["$"+a[y]]=!0;for(a=0;a<i.length;a++)y=o.hasOwnProperty("$"+i[a].value),i[a].selected!==y&&(i[a].selected=y),y&&c&&(i[a].defaultSelected=!0)}else{for(a=""+Bt(a),o=null,y=0;y<i.length;y++){if(i[y].value===a){i[y].selected=!0,c&&(i[y].defaultSelected=!0);return}o!==null||i[y].disabled||(o=i[y])}o!==null&&(o.selected=!0)}}function ou(i,o,a){if(o!=null&&(o=""+Bt(o),o!==i.value&&(i.value=o),a==null)){i.defaultValue!==o&&(i.defaultValue=o);return}i.defaultValue=a!=null?""+Bt(a):""}function vs(i,o,a,c){if(o==null){if(c!=null){if(a!=null)throw Error(s(92));if(ee(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),o=a}a=Bt(o),i.defaultValue=a,c=i.textContent,c===a&&c!==""&&c!==null&&(i.value=c),et(i)}function dn(i,o){if(o){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=o;return}}i.textContent=o}var ru=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ia(i,o,a){var c=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?i.setProperty(o,""):o==="float"?i.cssFloat="":i[o]="":c?i.setProperty(o,a):typeof a!="number"||a===0||ru.has(o)?o==="float"?i.cssFloat=a:i[o]=(""+a).trim():i[o]=a+"px"}function Na(i,o,a){if(o!=null&&typeof o!="object")throw Error(s(62));if(i=i.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var y in o)c=o[y],o.hasOwnProperty(y)&&a[y]!==c&&Ia(i,y,c)}else for(var v in o)o.hasOwnProperty(v)&&Ia(i,v,o[v])}function rr(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var au=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),_s=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ar(i){return _s.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Xn(){}var Ra=null;function Mn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Es=null,Ti=null;function _o(i){var o=Rn(i);if(o&&(i=o.stateNode)){var a=i[qt]||null;e:switch(i=o.stateNode,o.type){case"input":if(or(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+cn(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var c=a[o];if(c!==i&&c.form===i.form){var y=c[qt]||null;if(!y)throw Error(s(90));or(c,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(o=0;o<a.length;o++)c=a[o],c.form===i.form&&yo(c)}break e;case"textarea":ou(i,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&ys(i,!!a.multiple,o,!1)}}}var lr=!1;function Ts(i,o,a){if(lr)return i(o,a);lr=!0;try{var c=i(o);return c}finally{if(lr=!1,(Es!==null||Ti!==null)&&(ec(),Es&&(o=Es,i=Ti,Ti=Es=null,_o(o),i)))for(o=0;o<i.length;o++)_o(i[o])}}function Wn(i,o){var a=i.stateNode;if(a===null)return null;var c=a[qt]||null;if(c===null)return null;a=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(s(231,o,typeof a));return a}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eo=!1;if(Dn)try{var it={};Object.defineProperty(it,"passive",{get:function(){Eo=!0}}),window.addEventListener("test",it,it),window.removeEventListener("test",it,it)}catch{Eo=!1}var xi=null,Ma=null,To=null;function Da(){if(To)return To;var i,o=Ma,a=o.length,c,y="value"in xi?xi.value:xi.textContent,v=y.length;for(i=0;i<a&&o[i]===y[i];i++);var A=a-i;for(c=1;c<=A&&o[a-c]===y[v-c];c++);return To=y.slice(i,1<c?1-c:void 0)}function xo(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Gi(){return!0}function Zn(){return!1}function jt(i){function o(a,c,y,v,A){this._reactName=a,this._targetInst=y,this.type=c,this.nativeEvent=v,this.target=A,this.currentTarget=null;for(var C in i)i.hasOwnProperty(C)&&(a=i[C],this[C]=a?a(v):v[C]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Gi:Zn,this.isPropagationStopped=Zn,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Gi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Gi)},persist:function(){},isPersistent:Gi}),o}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Si=jt(Fi),xs=T({},Fi,{view:0,detail:0}),Pa=jt(xs),Ss,ur,Ai,cr=T({},xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:As,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ai&&(Ai&&i.type==="mousemove"?(Ss=i.screenX-Ai.screenX,ur=i.screenY-Ai.screenY):ur=Ss=0,Ai=i),Ss)},movementY:function(i){return"movementY"in i?i.movementY:ur}}),Va=jt(cr),So=T({},cr,{dataTransfer:0}),lu=jt(So),uu=T({},xs,{relatedTarget:0}),Ao=jt(uu),ka=T({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),cu=jt(ka),dr=T({},Fi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),du=jt(dr),fu=T({},Fi,{data:0}),bi=jt(fu),hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},pu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gu(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=mu[i])?!!o[i]:!1}function As(){return gu}var rn=T({},xs,{key:function(i){if(i.key){var o=hu[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=xo(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?pu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:As,charCode:function(i){return i.type==="keypress"?xo(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?xo(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),yu=jt(rn),vu=T({},cr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hi=jt(vu),m=T({},xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:As}),S=jt(m),b=T({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),I=jt(b),Y=T({},cr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),X=jt(Y),fe=T({},Fi,{newState:0,oldState:0}),ke=jt(fe),Et=[9,13,27,32],Qe=Dn&&"CompositionEvent"in window,ft=null;Dn&&"documentMode"in document&&(ft=document.documentMode);var Pn=Dn&&"TextEvent"in window&&!ft,wi=Dn&&(!Qe||ft&&8<ft&&11>=ft),ei=" ",ti=!1;function bo(i,o){switch(i){case"keyup":return Et.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fr(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var hr=!1;function HS(i,o){switch(i){case"compositionend":return fr(o);case"keypress":return o.which!==32?null:(ti=!0,ei);case"textInput":return i=o.data,i===ei&&ti?null:i;default:return null}}function zS(i,o){if(hr)return i==="compositionend"||!Qe&&bo(i,o)?(i=Da(),To=Ma=xi=null,hr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return wi&&o.locale!=="ko"?null:o.data;default:return null}}var jS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function km(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!jS[i.type]:o==="textarea"}function Um(i,o,a,c){Es?Ti?Ti.push(c):Ti=[c]:Es=c,o=ac(o,"onChange"),0<o.length&&(a=new Si("onChange","change",null,a,c),i.push({event:a,listeners:o}))}var Ua=null,La=null;function YS(i){v0(i,0)}function _u(i){var o=_n(i);if(yo(o))return i}function Lm(i,o){if(i==="change")return o}var Om=!1;if(Dn){var qd;if(Dn){var Bd="oninput"in document;if(!Bd){var qm=document.createElement("div");qm.setAttribute("oninput","return;"),Bd=typeof qm.oninput=="function"}qd=Bd}else qd=!1;Om=qd&&(!document.documentMode||9<document.documentMode)}function Bm(){Ua&&(Ua.detachEvent("onpropertychange",Gm),La=Ua=null)}function Gm(i){if(i.propertyName==="value"&&_u(La)){var o=[];Um(o,La,i,Mn(i)),Ts(YS,o)}}function JS(i,o,a){i==="focusin"?(Bm(),Ua=o,La=a,Ua.attachEvent("onpropertychange",Gm)):i==="focusout"&&Bm()}function KS(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return _u(La)}function $S(i,o){if(i==="click")return _u(o)}function QS(i,o){if(i==="input"||i==="change")return _u(o)}function XS(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Tn=typeof Object.is=="function"?Object.is:XS;function Oa(i,o){if(Tn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var a=Object.keys(i),c=Object.keys(o);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var y=a[c];if(!At.call(o,y)||!Tn(i[y],o[y]))return!1}return!0}function Fm(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Hm(i,o){var a=Fm(i);i=0;for(var c;a;){if(a.nodeType===3){if(c=i+a.textContent.length,i<=o&&c>=o)return{node:a,offset:o-i};i=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Fm(a)}}function zm(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?zm(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function jm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var o=Ei(i.document);o instanceof i.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)i=o.contentWindow;else break;o=Ei(i.document)}return o}function Gd(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}var WS=Dn&&"documentMode"in document&&11>=document.documentMode,pr=null,Fd=null,qa=null,Hd=!1;function Ym(i,o,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Hd||pr==null||pr!==Ei(c)||(c=pr,"selectionStart"in c&&Gd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),qa&&Oa(qa,c)||(qa=c,c=ac(Fd,"onSelect"),0<c.length&&(o=new Si("onSelect","select",null,o,a),i.push({event:o,listeners:c}),o.target=pr)))}function wo(i,o){var a={};return a[i.toLowerCase()]=o.toLowerCase(),a["Webkit"+i]="webkit"+o,a["Moz"+i]="moz"+o,a}var mr={animationend:wo("Animation","AnimationEnd"),animationiteration:wo("Animation","AnimationIteration"),animationstart:wo("Animation","AnimationStart"),transitionrun:wo("Transition","TransitionRun"),transitionstart:wo("Transition","TransitionStart"),transitioncancel:wo("Transition","TransitionCancel"),transitionend:wo("Transition","TransitionEnd")},zd={},Jm={};Dn&&(Jm=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);function Co(i){if(zd[i])return zd[i];if(!mr[i])return i;var o=mr[i],a;for(a in o)if(o.hasOwnProperty(a)&&a in Jm)return zd[i]=o[a];return i}var Km=Co("animationend"),$m=Co("animationiteration"),Qm=Co("animationstart"),ZS=Co("transitionrun"),eA=Co("transitionstart"),tA=Co("transitioncancel"),Xm=Co("transitionend"),Wm=new Map,jd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");jd.push("scrollEnd");function ni(i,o){Wm.set(i,o),vi(o,[i])}var Eu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Vn=[],gr=0,Yd=0;function Tu(){for(var i=gr,o=Yd=gr=0;o<i;){var a=Vn[o];Vn[o++]=null;var c=Vn[o];Vn[o++]=null;var y=Vn[o];Vn[o++]=null;var v=Vn[o];if(Vn[o++]=null,c!==null&&y!==null){var A=c.pending;A===null?y.next=y:(y.next=A.next,A.next=y),c.pending=y}v!==0&&Zm(a,y,v)}}function xu(i,o,a,c){Vn[gr++]=i,Vn[gr++]=o,Vn[gr++]=a,Vn[gr++]=c,Yd|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Jd(i,o,a,c){return xu(i,o,a,c),Su(i)}function Io(i,o){return xu(i,null,null,o),Su(i)}function Zm(i,o,a){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a);for(var y=!1,v=i.return;v!==null;)v.childLanes|=a,c=v.alternate,c!==null&&(c.childLanes|=a),v.tag===22&&(i=v.stateNode,i===null||i._visibility&1||(y=!0)),i=v,v=v.return;return i.tag===3?(v=i.stateNode,y&&o!==null&&(y=31-_t(a),i=v.hiddenUpdates,c=i[y],c===null?i[y]=[o]:c.push(o),o.lane=a|536870912),v):null}function Su(i){if(50<al)throw al=0,ih=null,Error(s(185));for(var o=i.return;o!==null;)i=o,o=i.return;return i.tag===3?i.stateNode:null}var yr={};function nA(i,o,a,c){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(i,o,a,c){return new nA(i,o,a,c)}function Kd(i){return i=i.prototype,!(!i||!i.isReactComponent)}function zi(i,o){var a=i.alternate;return a===null?(a=xn(i.tag,o,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=o,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,o=i.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function eg(i,o){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=o,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,o=a.dependencies,i.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),i}function Au(i,o,a,c,y,v){var A=0;if(c=i,typeof i=="function")Kd(i)&&(A=1);else if(typeof i=="string")A=ab(i,a,he.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case R:return i=xn(31,a,o,y),i.elementType=R,i.lanes=v,i;case q:return No(a.children,y,v,o);case P:A=8,y|=24;break;case H:return i=xn(12,a,o,y|2),i.elementType=H,i.lanes=v,i;case de:return i=xn(13,a,o,y),i.elementType=de,i.lanes=v,i;case ce:return i=xn(19,a,o,y),i.elementType=ce,i.lanes=v,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case j:A=10;break e;case te:A=9;break e;case oe:A=11;break e;case D:A=14;break e;case M:A=16,c=null;break e}A=29,a=Error(s(130,i===null?"null":typeof i,"")),c=null}return o=xn(A,a,o,y),o.elementType=i,o.type=c,o.lanes=v,o}function No(i,o,a,c){return i=xn(7,i,c,o),i.lanes=a,i}function $d(i,o,a){return i=xn(6,i,null,o),i.lanes=a,i}function tg(i){var o=xn(18,null,null,0);return o.stateNode=i,o}function Qd(i,o,a){return o=xn(4,i.children!==null?i.children:[],i.key,o),o.lanes=a,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}var ng=new WeakMap;function kn(i,o){if(typeof i=="object"&&i!==null){var a=ng.get(i);return a!==void 0?a:(o={value:i,source:o,stack:ga(o)},ng.set(i,o),o)}return{value:i,source:o,stack:ga(o)}}var vr=[],_r=0,bu=null,Ba=0,Un=[],Ln=0,bs=null,Ci=1,Ii="";function ji(i,o){vr[_r++]=Ba,vr[_r++]=bu,bu=i,Ba=o}function ig(i,o,a){Un[Ln++]=Ci,Un[Ln++]=Ii,Un[Ln++]=bs,bs=i;var c=Ci;i=Ii;var y=32-_t(c)-1;c&=~(1<<y),a+=1;var v=32-_t(o)+y;if(30<v){var A=y-y%5;v=(c&(1<<A)-1).toString(32),c>>=A,y-=A,Ci=1<<32-_t(o)+y|a<<y|c,Ii=v+i}else Ci=1<<v|a<<y|c,Ii=i}function Xd(i){i.return!==null&&(ji(i,1),ig(i,1,0))}function Wd(i){for(;i===bu;)bu=vr[--_r],vr[_r]=null,Ba=vr[--_r],vr[_r]=null;for(;i===bs;)bs=Un[--Ln],Un[Ln]=null,Ii=Un[--Ln],Un[Ln]=null,Ci=Un[--Ln],Un[Ln]=null}function sg(i,o){Un[Ln++]=Ci,Un[Ln++]=Ii,Un[Ln++]=bs,Ci=o.id,Ii=o.overflow,bs=i}var Yt=null,ut=null,ze=!1,ws=null,On=!1,Zd=Error(s(519));function Cs(i){var o=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ga(kn(o,i)),Zd}function og(i){var o=i.stateNode,a=i.type,c=i.memoizedProps;switch(o[wt]=i,o[qt]=c,a){case"dialog":qe("cancel",o),qe("close",o);break;case"iframe":case"object":case"embed":qe("load",o);break;case"video":case"audio":for(a=0;a<ul.length;a++)qe(ul[a],o);break;case"source":qe("error",o);break;case"img":case"image":case"link":qe("error",o),qe("load",o);break;case"details":qe("toggle",o);break;case"input":qe("invalid",o),su(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":qe("invalid",o);break;case"textarea":qe("invalid",o),vs(o,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||c.suppressHydrationWarning===!0||x0(o.textContent,a)?(c.popover!=null&&(qe("beforetoggle",o),qe("toggle",o)),c.onScroll!=null&&qe("scroll",o),c.onScrollEnd!=null&&qe("scrollend",o),c.onClick!=null&&(o.onclick=Xn),o=!0):o=!1,o||Cs(i,!0)}function rg(i){for(Yt=i.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:On=!1;return;case 27:case 3:On=!0;return;default:Yt=Yt.return}}function Er(i){if(i!==Yt)return!1;if(!ze)return rg(i),ze=!0,!1;var o=i.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||vh(i.type,i.memoizedProps)),a=!a),a&&ut&&Cs(i),rg(i),o===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ut=M0(i)}else if(o===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));ut=M0(i)}else o===27?(o=ut,Gs(i.type)?(i=Sh,Sh=null,ut=i):ut=o):ut=Yt?Bn(i.stateNode.nextSibling):null;return!0}function Ro(){ut=Yt=null,ze=!1}function ef(){var i=ws;return i!==null&&(mn===null?mn=i:mn.push.apply(mn,i),ws=null),i}function Ga(i){ws===null?ws=[i]:ws.push(i)}var tf=B(null),Mo=null,Yi=null;function Is(i,o,a){le(tf,o._currentValue),o._currentValue=a}function Ji(i){i._currentValue=tf.current,Q(tf)}function nf(i,o,a){for(;i!==null;){var c=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),i===a)break;i=i.return}}function sf(i,o,a,c){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var v=y.dependencies;if(v!==null){var A=y.child;v=v.firstContext;e:for(;v!==null;){var C=v;v=y;for(var L=0;L<o.length;L++)if(C.context===o[L]){v.lanes|=a,C=v.alternate,C!==null&&(C.lanes|=a),nf(v.return,a,i),c||(A=null);break e}v=C.next}}else if(y.tag===18){if(A=y.return,A===null)throw Error(s(341));A.lanes|=a,v=A.alternate,v!==null&&(v.lanes|=a),nf(A,a,i),A=null}else A=y.child;if(A!==null)A.return=y;else for(A=y;A!==null;){if(A===i){A=null;break}if(y=A.sibling,y!==null){y.return=A.return,A=y;break}A=A.return}y=A}}function Tr(i,o,a,c){i=null;for(var y=o,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var A=y.alternate;if(A===null)throw Error(s(387));if(A=A.memoizedProps,A!==null){var C=y.type;Tn(y.pendingProps.value,A.value)||(i!==null?i.push(C):i=[C])}}else if(y===Ce.current){if(A=y.alternate,A===null)throw Error(s(387));A.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(pl):i=[pl])}y=y.return}i!==null&&sf(o,i,a,c),o.flags|=262144}function wu(i){for(i=i.firstContext;i!==null;){if(!Tn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Do(i){Mo=i,Yi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Jt(i){return ag(Mo,i)}function Cu(i,o){return Mo===null&&Do(i),ag(i,o)}function ag(i,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},Yi===null){if(i===null)throw Error(s(308));Yi=o,i.dependencies={lanes:0,firstContext:o},i.flags|=524288}else Yi=Yi.next=o;return a}var iA=typeof AbortController<"u"?AbortController:function(){var i=[],o=this.signal={aborted:!1,addEventListener:function(a,c){i.push(c)}};this.abort=function(){o.aborted=!0,i.forEach(function(a){return a()})}},sA=n.unstable_scheduleCallback,oA=n.unstable_NormalPriority,Nt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function of(){return{controller:new iA,data:new Map,refCount:0}}function Fa(i){i.refCount--,i.refCount===0&&sA(oA,function(){i.controller.abort()})}var Ha=null,rf=0,xr=0,Sr=null;function rA(i,o){if(Ha===null){var a=Ha=[];rf=0,xr=uh(),Sr={status:"pending",value:void 0,then:function(c){a.push(c)}}}return rf++,o.then(lg,lg),o}function lg(){if(--rf===0&&Ha!==null){Sr!==null&&(Sr.status="fulfilled");var i=Ha;Ha=null,xr=0,Sr=null;for(var o=0;o<i.length;o++)(0,i[o])()}}function aA(i,o){var a=[],c={status:"pending",value:null,reason:null,then:function(y){a.push(y)}};return i.then(function(){c.status="fulfilled",c.value=o;for(var y=0;y<a.length;y++)(0,a[y])(o)},function(y){for(c.status="rejected",c.reason=y,y=0;y<a.length;y++)(0,a[y])(void 0)}),c}var ug=F.S;F.S=function(i,o){Yy=on(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&rA(i,o),ug!==null&&ug(i,o)};var Po=B(null);function af(){var i=Po.current;return i!==null?i:at.pooledCache}function Iu(i,o){o===null?le(Po,Po.current):le(Po,o.pool)}function cg(){var i=af();return i===null?null:{parent:Nt._currentValue,pool:i}}var Ar=Error(s(460)),lf=Error(s(474)),Nu=Error(s(542)),Ru={then:function(){}};function dg(i){return i=i.status,i==="fulfilled"||i==="rejected"}function fg(i,o,a){switch(a=i[a],a===void 0?i.push(o):a!==o&&(o.then(Xn,Xn),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,pg(i),i;default:if(typeof o.status=="string")o.then(Xn,Xn);else{if(i=at,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=o,i.status="pending",i.then(function(c){if(o.status==="pending"){var y=o;y.status="fulfilled",y.value=c}},function(c){if(o.status==="pending"){var y=o;y.status="rejected",y.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw i=o.reason,pg(i),i}throw ko=o,Ar}}function Vo(i){try{var o=i._init;return o(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ko=a,Ar):a}}var ko=null;function hg(){if(ko===null)throw Error(s(459));var i=ko;return ko=null,i}function pg(i){if(i===Ar||i===Nu)throw Error(s(483))}var br=null,za=0;function Mu(i){var o=za;return za+=1,br===null&&(br=[]),fg(br,i,o)}function ja(i,o){o=o.props.ref,i.ref=o!==void 0?o:null}function Du(i,o){throw o.$$typeof===x?Error(s(525)):(i=Object.prototype.toString.call(o),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)))}function mg(i){function o(z,G){if(i){var J=z.deletions;J===null?(z.deletions=[G],z.flags|=16):J.push(G)}}function a(z,G){if(!i)return null;for(;G!==null;)o(z,G),G=G.sibling;return null}function c(z){for(var G=new Map;z!==null;)z.key!==null?G.set(z.key,z):G.set(z.index,z),z=z.sibling;return G}function y(z,G){return z=zi(z,G),z.index=0,z.sibling=null,z}function v(z,G,J){return z.index=J,i?(J=z.alternate,J!==null?(J=J.index,J<G?(z.flags|=67108866,G):J):(z.flags|=67108866,G)):(z.flags|=1048576,G)}function A(z){return i&&z.alternate===null&&(z.flags|=67108866),z}function C(z,G,J,ne){return G===null||G.tag!==6?(G=$d(J,z.mode,ne),G.return=z,G):(G=y(G,J),G.return=z,G)}function L(z,G,J,ne){var Ae=J.type;return Ae===q?Z(z,G,J.props.children,ne,J.key):G!==null&&(G.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===M&&Vo(Ae)===G.type)?(G=y(G,J.props),ja(G,J),G.return=z,G):(G=Au(J.type,J.key,J.props,null,z.mode,ne),ja(G,J),G.return=z,G)}function K(z,G,J,ne){return G===null||G.tag!==4||G.stateNode.containerInfo!==J.containerInfo||G.stateNode.implementation!==J.implementation?(G=Qd(J,z.mode,ne),G.return=z,G):(G=y(G,J.children||[]),G.return=z,G)}function Z(z,G,J,ne,Ae){return G===null||G.tag!==7?(G=No(J,z.mode,ne,Ae),G.return=z,G):(G=y(G,J),G.return=z,G)}function se(z,G,J){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=$d(""+G,z.mode,J),G.return=z,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case w:return J=Au(G.type,G.key,G.props,null,z.mode,J),ja(J,G),J.return=z,J;case k:return G=Qd(G,z.mode,J),G.return=z,G;case M:return G=Vo(G),se(z,G,J)}if(ee(G)||V(G))return G=No(G,z.mode,J,null),G.return=z,G;if(typeof G.then=="function")return se(z,Mu(G),J);if(G.$$typeof===j)return se(z,Cu(z,G),J);Du(z,G)}return null}function $(z,G,J,ne){var Ae=G!==null?G.key:null;if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return Ae!==null?null:C(z,G,""+J,ne);if(typeof J=="object"&&J!==null){switch(J.$$typeof){case w:return J.key===Ae?L(z,G,J,ne):null;case k:return J.key===Ae?K(z,G,J,ne):null;case M:return J=Vo(J),$(z,G,J,ne)}if(ee(J)||V(J))return Ae!==null?null:Z(z,G,J,ne,null);if(typeof J.then=="function")return $(z,G,Mu(J),ne);if(J.$$typeof===j)return $(z,G,Cu(z,J),ne);Du(z,J)}return null}function W(z,G,J,ne,Ae){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return z=z.get(J)||null,C(G,z,""+ne,Ae);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case w:return z=z.get(ne.key===null?J:ne.key)||null,L(G,z,ne,Ae);case k:return z=z.get(ne.key===null?J:ne.key)||null,K(G,z,ne,Ae);case M:return ne=Vo(ne),W(z,G,J,ne,Ae)}if(ee(ne)||V(ne))return z=z.get(J)||null,Z(G,z,ne,Ae,null);if(typeof ne.then=="function")return W(z,G,J,Mu(ne),Ae);if(ne.$$typeof===j)return W(z,G,J,Cu(G,ne),Ae);Du(G,ne)}return null}function Te(z,G,J,ne){for(var Ae=null,Je=null,xe=G,Le=G=0,Ge=null;xe!==null&&Le<J.length;Le++){xe.index>Le?(Ge=xe,xe=null):Ge=xe.sibling;var Ke=$(z,xe,J[Le],ne);if(Ke===null){xe===null&&(xe=Ge);break}i&&xe&&Ke.alternate===null&&o(z,xe),G=v(Ke,G,Le),Je===null?Ae=Ke:Je.sibling=Ke,Je=Ke,xe=Ge}if(Le===J.length)return a(z,xe),ze&&ji(z,Le),Ae;if(xe===null){for(;Le<J.length;Le++)xe=se(z,J[Le],ne),xe!==null&&(G=v(xe,G,Le),Je===null?Ae=xe:Je.sibling=xe,Je=xe);return ze&&ji(z,Le),Ae}for(xe=c(xe);Le<J.length;Le++)Ge=W(xe,z,Le,J[Le],ne),Ge!==null&&(i&&Ge.alternate!==null&&xe.delete(Ge.key===null?Le:Ge.key),G=v(Ge,G,Le),Je===null?Ae=Ge:Je.sibling=Ge,Je=Ge);return i&&xe.forEach(function(Ys){return o(z,Ys)}),ze&&ji(z,Le),Ae}function we(z,G,J,ne){if(J==null)throw Error(s(151));for(var Ae=null,Je=null,xe=G,Le=G=0,Ge=null,Ke=J.next();xe!==null&&!Ke.done;Le++,Ke=J.next()){xe.index>Le?(Ge=xe,xe=null):Ge=xe.sibling;var Ys=$(z,xe,Ke.value,ne);if(Ys===null){xe===null&&(xe=Ge);break}i&&xe&&Ys.alternate===null&&o(z,xe),G=v(Ys,G,Le),Je===null?Ae=Ys:Je.sibling=Ys,Je=Ys,xe=Ge}if(Ke.done)return a(z,xe),ze&&ji(z,Le),Ae;if(xe===null){for(;!Ke.done;Le++,Ke=J.next())Ke=se(z,Ke.value,ne),Ke!==null&&(G=v(Ke,G,Le),Je===null?Ae=Ke:Je.sibling=Ke,Je=Ke);return ze&&ji(z,Le),Ae}for(xe=c(xe);!Ke.done;Le++,Ke=J.next())Ke=W(xe,z,Le,Ke.value,ne),Ke!==null&&(i&&Ke.alternate!==null&&xe.delete(Ke.key===null?Le:Ke.key),G=v(Ke,G,Le),Je===null?Ae=Ke:Je.sibling=Ke,Je=Ke);return i&&xe.forEach(function(vb){return o(z,vb)}),ze&&ji(z,Le),Ae}function rt(z,G,J,ne){if(typeof J=="object"&&J!==null&&J.type===q&&J.key===null&&(J=J.props.children),typeof J=="object"&&J!==null){switch(J.$$typeof){case w:e:{for(var Ae=J.key;G!==null;){if(G.key===Ae){if(Ae=J.type,Ae===q){if(G.tag===7){a(z,G.sibling),ne=y(G,J.props.children),ne.return=z,z=ne;break e}}else if(G.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===M&&Vo(Ae)===G.type){a(z,G.sibling),ne=y(G,J.props),ja(ne,J),ne.return=z,z=ne;break e}a(z,G);break}else o(z,G);G=G.sibling}J.type===q?(ne=No(J.props.children,z.mode,ne,J.key),ne.return=z,z=ne):(ne=Au(J.type,J.key,J.props,null,z.mode,ne),ja(ne,J),ne.return=z,z=ne)}return A(z);case k:e:{for(Ae=J.key;G!==null;){if(G.key===Ae)if(G.tag===4&&G.stateNode.containerInfo===J.containerInfo&&G.stateNode.implementation===J.implementation){a(z,G.sibling),ne=y(G,J.children||[]),ne.return=z,z=ne;break e}else{a(z,G);break}else o(z,G);G=G.sibling}ne=Qd(J,z.mode,ne),ne.return=z,z=ne}return A(z);case M:return J=Vo(J),rt(z,G,J,ne)}if(ee(J))return Te(z,G,J,ne);if(V(J)){if(Ae=V(J),typeof Ae!="function")throw Error(s(150));return J=Ae.call(J),we(z,G,J,ne)}if(typeof J.then=="function")return rt(z,G,Mu(J),ne);if(J.$$typeof===j)return rt(z,G,Cu(z,J),ne);Du(z,J)}return typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint"?(J=""+J,G!==null&&G.tag===6?(a(z,G.sibling),ne=y(G,J),ne.return=z,z=ne):(a(z,G),ne=$d(J,z.mode,ne),ne.return=z,z=ne),A(z)):a(z,G)}return function(z,G,J,ne){try{za=0;var Ae=rt(z,G,J,ne);return br=null,Ae}catch(xe){if(xe===Ar||xe===Nu)throw xe;var Je=xn(29,xe,null,z.mode);return Je.lanes=ne,Je.return=z,Je}finally{}}}var Uo=mg(!0),gg=mg(!1),Ns=!1;function uf(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cf(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Rs(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ms(i,o,a){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(Xe&2)!==0){var y=c.pending;return y===null?o.next=o:(o.next=y.next,y.next=o),c.pending=o,o=Su(i),Zm(i,null,a),o}return xu(i,c,o,a),Su(i)}function Ya(i,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var c=o.lanes;c&=i.pendingLanes,a|=c,o.lanes=a,_a(i,a)}}function df(i,o){var a=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var y=null,v=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};v===null?y=v=A:v=v.next=A,a=a.next}while(a!==null);v===null?y=v=o:v=v.next=o}else y=v=o;a={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=o:i.next=o,a.lastBaseUpdate=o}var ff=!1;function Ja(){if(ff){var i=Sr;if(i!==null)throw i}}function Ka(i,o,a,c){ff=!1;var y=i.updateQueue;Ns=!1;var v=y.firstBaseUpdate,A=y.lastBaseUpdate,C=y.shared.pending;if(C!==null){y.shared.pending=null;var L=C,K=L.next;L.next=null,A===null?v=K:A.next=K,A=L;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,C=Z.lastBaseUpdate,C!==A&&(C===null?Z.firstBaseUpdate=K:C.next=K,Z.lastBaseUpdate=L))}if(v!==null){var se=y.baseState;A=0,Z=K=L=null,C=v;do{var $=C.lane&-536870913,W=$!==C.lane;if(W?(Be&$)===$:(c&$)===$){$!==0&&$===xr&&(ff=!0),Z!==null&&(Z=Z.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var Te=i,we=C;$=o;var rt=a;switch(we.tag){case 1:if(Te=we.payload,typeof Te=="function"){se=Te.call(rt,se,$);break e}se=Te;break e;case 3:Te.flags=Te.flags&-65537|128;case 0:if(Te=we.payload,$=typeof Te=="function"?Te.call(rt,se,$):Te,$==null)break e;se=T({},se,$);break e;case 2:Ns=!0}}$=C.callback,$!==null&&(i.flags|=64,W&&(i.flags|=8192),W=y.callbacks,W===null?y.callbacks=[$]:W.push($))}else W={lane:$,tag:C.tag,payload:C.payload,callback:C.callback,next:null},Z===null?(K=Z=W,L=se):Z=Z.next=W,A|=$;if(C=C.next,C===null){if(C=y.shared.pending,C===null)break;W=C,C=W.next,W.next=null,y.lastBaseUpdate=W,y.shared.pending=null}}while(!0);Z===null&&(L=se),y.baseState=L,y.firstBaseUpdate=K,y.lastBaseUpdate=Z,v===null&&(y.shared.lanes=0),Us|=A,i.lanes=A,i.memoizedState=se}}function yg(i,o){if(typeof i!="function")throw Error(s(191,i));i.call(o)}function vg(i,o){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)yg(a[i],o)}var wr=B(null),Pu=B(0);function _g(i,o){i=ns,le(Pu,i),le(wr,o),ns=i|o.baseLanes}function hf(){le(Pu,ns),le(wr,wr.current)}function pf(){ns=Pu.current,Q(wr),Q(Pu)}var Sn=B(null),qn=null;function Ds(i){var o=i.alternate;le(Tt,Tt.current&1),le(Sn,i),qn===null&&(o===null||wr.current!==null||o.memoizedState!==null)&&(qn=i)}function mf(i){le(Tt,Tt.current),le(Sn,i),qn===null&&(qn=i)}function Eg(i){i.tag===22?(le(Tt,Tt.current),le(Sn,i),qn===null&&(qn=i)):Ps()}function Ps(){le(Tt,Tt.current),le(Sn,Sn.current)}function An(i){Q(Sn),qn===i&&(qn=null),Q(Tt)}var Tt=B(0);function Vu(i){for(var o=i;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Th(a)||xh(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ki=0,Ue=null,st=null,Rt=null,ku=!1,Cr=!1,Lo=!1,Uu=0,$a=0,Ir=null,lA=0;function gt(){throw Error(s(321))}function gf(i,o){if(o===null)return!1;for(var a=0;a<o.length&&a<i.length;a++)if(!Tn(i[a],o[a]))return!1;return!0}function yf(i,o,a,c,y,v){return Ki=v,Ue=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,F.H=i===null||i.memoizedState===null?iy:Df,Lo=!1,v=a(c,y),Lo=!1,Cr&&(v=xg(o,a,c,y)),Tg(i),v}function Tg(i){F.H=Wa;var o=st!==null&&st.next!==null;if(Ki=0,Rt=st=Ue=null,ku=!1,$a=0,Ir=null,o)throw Error(s(300));i===null||Mt||(i=i.dependencies,i!==null&&wu(i)&&(Mt=!0))}function xg(i,o,a,c){Ue=i;var y=0;do{if(Cr&&(Ir=null),$a=0,Cr=!1,25<=y)throw Error(s(301));if(y+=1,Rt=st=null,i.updateQueue!=null){var v=i.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}F.H=sy,v=o(a,c)}while(Cr);return v}function uA(){var i=F.H,o=i.useState()[0];return o=typeof o.then=="function"?Qa(o):o,i=i.useState()[0],(st!==null?st.memoizedState:null)!==i&&(Ue.flags|=1024),o}function vf(){var i=Uu!==0;return Uu=0,i}function _f(i,o,a){o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~a}function Ef(i){if(ku){for(i=i.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}ku=!1}Ki=0,Rt=st=Ue=null,Cr=!1,$a=Uu=0,Ir=null}function an(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Ue.memoizedState=Rt=i:Rt=Rt.next=i,Rt}function xt(){if(st===null){var i=Ue.alternate;i=i!==null?i.memoizedState:null}else i=st.next;var o=Rt===null?Ue.memoizedState:Rt.next;if(o!==null)Rt=o,st=i;else{if(i===null)throw Ue.alternate===null?Error(s(467)):Error(s(310));st=i,i={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Rt===null?Ue.memoizedState=Rt=i:Rt=Rt.next=i}return Rt}function Lu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Qa(i){var o=$a;return $a+=1,Ir===null&&(Ir=[]),i=fg(Ir,i,o),o=Ue,(Rt===null?o.memoizedState:Rt.next)===null&&(o=o.alternate,F.H=o===null||o.memoizedState===null?iy:Df),i}function Ou(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Qa(i);if(i.$$typeof===j)return Jt(i)}throw Error(s(438,String(i)))}function Tf(i){var o=null,a=Ue.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var c=Ue.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(y){return y.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Lu(),Ue.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(i),c=0;c<i;c++)a[c]=O;return o.index++,a}function $i(i,o){return typeof o=="function"?o(i):o}function qu(i){var o=xt();return xf(o,st,i)}function xf(i,o,a){var c=i.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var y=i.baseQueue,v=c.pending;if(v!==null){if(y!==null){var A=y.next;y.next=v.next,v.next=A}o.baseQueue=y=v,c.pending=null}if(v=i.baseState,y===null)i.memoizedState=v;else{o=y.next;var C=A=null,L=null,K=o,Z=!1;do{var se=K.lane&-536870913;if(se!==K.lane?(Be&se)===se:(Ki&se)===se){var $=K.revertLane;if($===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),se===xr&&(Z=!0);else if((Ki&$)===$){K=K.next,$===xr&&(Z=!0);continue}else se={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(C=L=se,A=v):L=L.next=se,Ue.lanes|=$,Us|=$;se=K.action,Lo&&a(v,se),v=K.hasEagerState?K.eagerState:a(v,se)}else $={lane:se,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},L===null?(C=L=$,A=v):L=L.next=$,Ue.lanes|=se,Us|=se;K=K.next}while(K!==null&&K!==o);if(L===null?A=v:L.next=C,!Tn(v,i.memoizedState)&&(Mt=!0,Z&&(a=Sr,a!==null)))throw a;i.memoizedState=v,i.baseState=A,i.baseQueue=L,c.lastRenderedState=v}return y===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Sf(i){var o=xt(),a=o.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=i;var c=a.dispatch,y=a.pending,v=o.memoizedState;if(y!==null){a.pending=null;var A=y=y.next;do v=i(v,A.action),A=A.next;while(A!==y);Tn(v,o.memoizedState)||(Mt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),a.lastRenderedState=v}return[v,c]}function Sg(i,o,a){var c=Ue,y=xt(),v=ze;if(v){if(a===void 0)throw Error(s(407));a=a()}else a=o();var A=!Tn((st||y).memoizedState,a);if(A&&(y.memoizedState=a,Mt=!0),y=y.queue,wf(wg.bind(null,c,y,i),[i]),y.getSnapshot!==o||A||Rt!==null&&Rt.memoizedState.tag&1){if(c.flags|=2048,Nr(9,{destroy:void 0},bg.bind(null,c,y,a,o),null),at===null)throw Error(s(349));v||(Ki&127)!==0||Ag(c,o,a)}return a}function Ag(i,o,a){i.flags|=16384,i={getSnapshot:o,value:a},o=Ue.updateQueue,o===null?(o=Lu(),Ue.updateQueue=o,o.stores=[i]):(a=o.stores,a===null?o.stores=[i]:a.push(i))}function bg(i,o,a,c){o.value=a,o.getSnapshot=c,Cg(o)&&Ig(i)}function wg(i,o,a){return a(function(){Cg(o)&&Ig(i)})}function Cg(i){var o=i.getSnapshot;i=i.value;try{var a=o();return!Tn(i,a)}catch{return!0}}function Ig(i){var o=Io(i,2);o!==null&&gn(o,i,2)}function Af(i){var o=an();if(typeof i=="function"){var a=i;if(i=a(),Lo){Nn(!0);try{a()}finally{Nn(!1)}}}return o.memoizedState=o.baseState=i,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:i},o}function Ng(i,o,a,c){return i.baseState=a,xf(i,st,typeof c=="function"?c:$i)}function cA(i,o,a,c,y){if(Fu(i))throw Error(s(485));if(i=o.action,i!==null){var v={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){v.listeners.push(A)}};F.T!==null?a(!0):v.isTransition=!1,c(v),a=o.pending,a===null?(v.next=o.pending=v,Rg(o,v)):(v.next=a.next,o.pending=a.next=v)}}function Rg(i,o){var a=o.action,c=o.payload,y=i.state;if(o.isTransition){var v=F.T,A={};F.T=A;try{var C=a(y,c),L=F.S;L!==null&&L(A,C),Mg(i,o,C)}catch(K){bf(i,o,K)}finally{v!==null&&A.types!==null&&(v.types=A.types),F.T=v}}else try{v=a(y,c),Mg(i,o,v)}catch(K){bf(i,o,K)}}function Mg(i,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Dg(i,o,c)},function(c){return bf(i,o,c)}):Dg(i,o,a)}function Dg(i,o,a){o.status="fulfilled",o.value=a,Pg(o),i.state=a,o=i.pending,o!==null&&(a=o.next,a===o?i.pending=null:(a=a.next,o.next=a,Rg(i,a)))}function bf(i,o,a){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=a,Pg(o),o=o.next;while(o!==c)}i.action=null}function Pg(i){i=i.listeners;for(var o=0;o<i.length;o++)(0,i[o])()}function Vg(i,o){return o}function kg(i,o){if(ze){var a=at.formState;if(a!==null){e:{var c=Ue;if(ze){if(ut){t:{for(var y=ut,v=On;y.nodeType!==8;){if(!v){y=null;break t}if(y=Bn(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){ut=Bn(y.nextSibling),c=y.data==="F!";break e}}Cs(c)}c=!1}c&&(o=a[0])}}return a=an(),a.memoizedState=a.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vg,lastRenderedState:o},a.queue=c,a=ey.bind(null,Ue,c),c.dispatch=a,c=Af(!1),v=Mf.bind(null,Ue,!1,c.queue),c=an(),y={state:o,dispatch:null,action:i,pending:null},c.queue=y,a=cA.bind(null,Ue,y,v,a),y.dispatch=a,c.memoizedState=i,[o,a,!1]}function Ug(i){var o=xt();return Lg(o,st,i)}function Lg(i,o,a){if(o=xf(i,o,Vg)[0],i=qu($i)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=Qa(o)}catch(A){throw A===Ar?Nu:A}else c=o;o=xt();var y=o.queue,v=y.dispatch;return a!==o.memoizedState&&(Ue.flags|=2048,Nr(9,{destroy:void 0},dA.bind(null,y,a),null)),[c,v,i]}function dA(i,o){i.action=o}function Og(i){var o=xt(),a=st;if(a!==null)return Lg(o,a,i);xt(),o=o.memoizedState,a=xt();var c=a.queue.dispatch;return a.memoizedState=i,[o,c,!1]}function Nr(i,o,a,c){return i={tag:i,create:a,deps:c,inst:o,next:null},o=Ue.updateQueue,o===null&&(o=Lu(),Ue.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=i.next=i:(c=a.next,a.next=i,i.next=c,o.lastEffect=i),i}function qg(){return xt().memoizedState}function Bu(i,o,a,c){var y=an();Ue.flags|=i,y.memoizedState=Nr(1|o,{destroy:void 0},a,c===void 0?null:c)}function Gu(i,o,a,c){var y=xt();c=c===void 0?null:c;var v=y.memoizedState.inst;st!==null&&c!==null&&gf(c,st.memoizedState.deps)?y.memoizedState=Nr(o,v,a,c):(Ue.flags|=i,y.memoizedState=Nr(1|o,v,a,c))}function Bg(i,o){Bu(8390656,8,i,o)}function wf(i,o){Gu(2048,8,i,o)}function fA(i){Ue.flags|=4;var o=Ue.updateQueue;if(o===null)o=Lu(),Ue.updateQueue=o,o.events=[i];else{var a=o.events;a===null?o.events=[i]:a.push(i)}}function Gg(i){var o=xt().memoizedState;return fA({ref:o,nextImpl:i}),function(){if((Xe&2)!==0)throw Error(s(440));return o.impl.apply(void 0,arguments)}}function Fg(i,o){return Gu(4,2,i,o)}function Hg(i,o){return Gu(4,4,i,o)}function zg(i,o){if(typeof o=="function"){i=i();var a=o(i);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function jg(i,o,a){a=a!=null?a.concat([i]):null,Gu(4,4,zg.bind(null,o,i),a)}function Cf(){}function Yg(i,o){var a=xt();o=o===void 0?null:o;var c=a.memoizedState;return o!==null&&gf(o,c[1])?c[0]:(a.memoizedState=[i,o],i)}function Jg(i,o){var a=xt();o=o===void 0?null:o;var c=a.memoizedState;if(o!==null&&gf(o,c[1]))return c[0];if(c=i(),Lo){Nn(!0);try{i()}finally{Nn(!1)}}return a.memoizedState=[c,o],c}function If(i,o,a){return a===void 0||(Ki&1073741824)!==0&&(Be&261930)===0?i.memoizedState=o:(i.memoizedState=a,i=Ky(),Ue.lanes|=i,Us|=i,a)}function Kg(i,o,a,c){return Tn(a,o)?a:wr.current!==null?(i=If(i,a,c),Tn(i,o)||(Mt=!0),i):(Ki&42)===0||(Ki&1073741824)!==0&&(Be&261930)===0?(Mt=!0,i.memoizedState=a):(i=Ky(),Ue.lanes|=i,Us|=i,o)}function $g(i,o,a,c,y){var v=ae.p;ae.p=v!==0&&8>v?v:8;var A=F.T,C={};F.T=C,Mf(i,!1,o,a);try{var L=y(),K=F.S;if(K!==null&&K(C,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var Z=aA(L,c);Xa(i,o,Z,Cn(i))}else Xa(i,o,c,Cn(i))}catch(se){Xa(i,o,{then:function(){},status:"rejected",reason:se},Cn())}finally{ae.p=v,A!==null&&C.types!==null&&(A.types=C.types),F.T=A}}function hA(){}function Nf(i,o,a,c){if(i.tag!==5)throw Error(s(476));var y=Qg(i).queue;$g(i,y,o,_e,a===null?hA:function(){return Xg(i),a(c)})}function Qg(i){var o=i.memoizedState;if(o!==null)return o;o={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:_e},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$i,lastRenderedState:a},next:null},i.memoizedState=o,i=i.alternate,i!==null&&(i.memoizedState=o),o}function Xg(i){var o=Qg(i);o.next===null&&(o=i.alternate.memoizedState),Xa(i,o.next.queue,{},Cn())}function Rf(){return Jt(pl)}function Wg(){return xt().memoizedState}function Zg(){return xt().memoizedState}function pA(i){for(var o=i.return;o!==null;){switch(o.tag){case 24:case 3:var a=Cn();i=Rs(a);var c=Ms(o,i,a);c!==null&&(gn(c,o,a),Ya(c,o,a)),o={cache:of()},i.payload=o;return}o=o.return}}function mA(i,o,a){var c=Cn();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Fu(i)?ty(o,a):(a=Jd(i,o,a,c),a!==null&&(gn(a,i,c),ny(a,o,c)))}function ey(i,o,a){var c=Cn();Xa(i,o,a,c)}function Xa(i,o,a,c){var y={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Fu(i))ty(o,y);else{var v=i.alternate;if(i.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var A=o.lastRenderedState,C=v(A,a);if(y.hasEagerState=!0,y.eagerState=C,Tn(C,A))return xu(i,o,y,0),at===null&&Tu(),!1}catch{}finally{}if(a=Jd(i,o,y,c),a!==null)return gn(a,i,c),ny(a,o,c),!0}return!1}function Mf(i,o,a,c){if(c={lane:2,revertLane:uh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Fu(i)){if(o)throw Error(s(479))}else o=Jd(i,a,c,2),o!==null&&gn(o,i,2)}function Fu(i){var o=i.alternate;return i===Ue||o!==null&&o===Ue}function ty(i,o){Cr=ku=!0;var a=i.pending;a===null?o.next=o:(o.next=a.next,a.next=o),i.pending=o}function ny(i,o,a){if((a&4194048)!==0){var c=o.lanes;c&=i.pendingLanes,a|=c,o.lanes=a,_a(i,a)}}var Wa={readContext:Jt,use:Ou,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt};Wa.useEffectEvent=gt;var iy={readContext:Jt,use:Ou,useCallback:function(i,o){return an().memoizedState=[i,o===void 0?null:o],i},useContext:Jt,useEffect:Bg,useImperativeHandle:function(i,o,a){a=a!=null?a.concat([i]):null,Bu(4194308,4,zg.bind(null,o,i),a)},useLayoutEffect:function(i,o){return Bu(4194308,4,i,o)},useInsertionEffect:function(i,o){Bu(4,2,i,o)},useMemo:function(i,o){var a=an();o=o===void 0?null:o;var c=i();if(Lo){Nn(!0);try{i()}finally{Nn(!1)}}return a.memoizedState=[c,o],c},useReducer:function(i,o,a){var c=an();if(a!==void 0){var y=a(o);if(Lo){Nn(!0);try{a(o)}finally{Nn(!1)}}}else y=o;return c.memoizedState=c.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},c.queue=i,i=i.dispatch=mA.bind(null,Ue,i),[c.memoizedState,i]},useRef:function(i){var o=an();return i={current:i},o.memoizedState=i},useState:function(i){i=Af(i);var o=i.queue,a=ey.bind(null,Ue,o);return o.dispatch=a,[i.memoizedState,a]},useDebugValue:Cf,useDeferredValue:function(i,o){var a=an();return If(a,i,o)},useTransition:function(){var i=Af(!1);return i=$g.bind(null,Ue,i.queue,!0,!1),an().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,o,a){var c=Ue,y=an();if(ze){if(a===void 0)throw Error(s(407));a=a()}else{if(a=o(),at===null)throw Error(s(349));(Be&127)!==0||Ag(c,o,a)}y.memoizedState=a;var v={value:a,getSnapshot:o};return y.queue=v,Bg(wg.bind(null,c,v,i),[i]),c.flags|=2048,Nr(9,{destroy:void 0},bg.bind(null,c,v,a,o),null),a},useId:function(){var i=an(),o=at.identifierPrefix;if(ze){var a=Ii,c=Ci;a=(c&~(1<<32-_t(c)-1)).toString(32)+a,o="_"+o+"R_"+a,a=Uu++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=lA++,o="_"+o+"r_"+a.toString(32)+"_";return i.memoizedState=o},useHostTransitionStatus:Rf,useFormState:kg,useActionState:kg,useOptimistic:function(i){var o=an();o.memoizedState=o.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=Mf.bind(null,Ue,!0,a),a.dispatch=o,[i,o]},useMemoCache:Tf,useCacheRefresh:function(){return an().memoizedState=pA.bind(null,Ue)},useEffectEvent:function(i){var o=an(),a={impl:i};return o.memoizedState=a,function(){if((Xe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Df={readContext:Jt,use:Ou,useCallback:Yg,useContext:Jt,useEffect:wf,useImperativeHandle:jg,useInsertionEffect:Fg,useLayoutEffect:Hg,useMemo:Jg,useReducer:qu,useRef:qg,useState:function(){return qu($i)},useDebugValue:Cf,useDeferredValue:function(i,o){var a=xt();return Kg(a,st.memoizedState,i,o)},useTransition:function(){var i=qu($i)[0],o=xt().memoizedState;return[typeof i=="boolean"?i:Qa(i),o]},useSyncExternalStore:Sg,useId:Wg,useHostTransitionStatus:Rf,useFormState:Ug,useActionState:Ug,useOptimistic:function(i,o){var a=xt();return Ng(a,st,i,o)},useMemoCache:Tf,useCacheRefresh:Zg};Df.useEffectEvent=Gg;var sy={readContext:Jt,use:Ou,useCallback:Yg,useContext:Jt,useEffect:wf,useImperativeHandle:jg,useInsertionEffect:Fg,useLayoutEffect:Hg,useMemo:Jg,useReducer:Sf,useRef:qg,useState:function(){return Sf($i)},useDebugValue:Cf,useDeferredValue:function(i,o){var a=xt();return st===null?If(a,i,o):Kg(a,st.memoizedState,i,o)},useTransition:function(){var i=Sf($i)[0],o=xt().memoizedState;return[typeof i=="boolean"?i:Qa(i),o]},useSyncExternalStore:Sg,useId:Wg,useHostTransitionStatus:Rf,useFormState:Og,useActionState:Og,useOptimistic:function(i,o){var a=xt();return st!==null?Ng(a,st,i,o):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:Tf,useCacheRefresh:Zg};sy.useEffectEvent=Gg;function Pf(i,o,a,c){o=i.memoizedState,a=a(c,o),a=a==null?o:T({},o,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Vf={enqueueSetState:function(i,o,a){i=i._reactInternals;var c=Cn(),y=Rs(c);y.payload=o,a!=null&&(y.callback=a),o=Ms(i,y,c),o!==null&&(gn(o,i,c),Ya(o,i,c))},enqueueReplaceState:function(i,o,a){i=i._reactInternals;var c=Cn(),y=Rs(c);y.tag=1,y.payload=o,a!=null&&(y.callback=a),o=Ms(i,y,c),o!==null&&(gn(o,i,c),Ya(o,i,c))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var a=Cn(),c=Rs(a);c.tag=2,o!=null&&(c.callback=o),o=Ms(i,c,a),o!==null&&(gn(o,i,a),Ya(o,i,a))}};function oy(i,o,a,c,y,v,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,v,A):o.prototype&&o.prototype.isPureReactComponent?!Oa(a,c)||!Oa(y,v):!0}function ry(i,o,a,c){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,c),o.state!==i&&Vf.enqueueReplaceState(o,o.state,null)}function Oo(i,o){var a=o;if("ref"in o){a={};for(var c in o)c!=="ref"&&(a[c]=o[c])}if(i=i.defaultProps){a===o&&(a=T({},a));for(var y in i)a[y]===void 0&&(a[y]=i[y])}return a}function ay(i){Eu(i)}function ly(i){console.error(i)}function uy(i){Eu(i)}function Hu(i,o){try{var a=i.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function cy(i,o,a){try{var c=i.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function kf(i,o,a){return a=Rs(a),a.tag=3,a.payload={element:null},a.callback=function(){Hu(i,o)},a}function dy(i){return i=Rs(i),i.tag=3,i}function fy(i,o,a,c){var y=a.type.getDerivedStateFromError;if(typeof y=="function"){var v=c.value;i.payload=function(){return y(v)},i.callback=function(){cy(o,a,c)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){cy(o,a,c),typeof y!="function"&&(Ls===null?Ls=new Set([this]):Ls.add(this));var C=c.stack;this.componentDidCatch(c.value,{componentStack:C!==null?C:""})})}function gA(i,o,a,c,y){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=a.alternate,o!==null&&Tr(o,a,y,!0),a=Sn.current,a!==null){switch(a.tag){case 31:case 13:return qn===null?tc():a.alternate===null&&yt===0&&(yt=3),a.flags&=-257,a.flags|=65536,a.lanes=y,c===Ru?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([c]):o.add(c),rh(i,c,y)),!1;case 22:return a.flags|=65536,c===Ru?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([c]):a.add(c)),rh(i,c,y)),!1}throw Error(s(435,a.tag))}return rh(i,c,y),tc(),!1}if(ze)return o=Sn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=y,c!==Zd&&(i=Error(s(422),{cause:c}),Ga(kn(i,a)))):(c!==Zd&&(o=Error(s(423),{cause:c}),Ga(kn(o,a))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,c=kn(c,a),y=kf(i.stateNode,c,y),df(i,y),yt!==4&&(yt=2)),!1;var v=Error(s(520),{cause:c});if(v=kn(v,a),rl===null?rl=[v]:rl.push(v),yt!==4&&(yt=2),o===null)return!0;c=kn(c,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,i=y&-y,a.lanes|=i,i=kf(a.stateNode,c,i),df(a,i),!1;case 1:if(o=a.type,v=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ls===null||!Ls.has(v))))return a.flags|=65536,y&=-y,a.lanes|=y,y=dy(y),fy(y,i,a,c),df(a,y),!1}a=a.return}while(a!==null);return!1}var Uf=Error(s(461)),Mt=!1;function Kt(i,o,a,c){o.child=i===null?gg(o,null,a,c):Uo(o,i.child,a,c)}function hy(i,o,a,c,y){a=a.render;var v=o.ref;if("ref"in c){var A={};for(var C in c)C!=="ref"&&(A[C]=c[C])}else A=c;return Do(o),c=yf(i,o,a,A,v,y),C=vf(),i!==null&&!Mt?(_f(i,o,y),Qi(i,o,y)):(ze&&C&&Xd(o),o.flags|=1,Kt(i,o,c,y),o.child)}function py(i,o,a,c,y){if(i===null){var v=a.type;return typeof v=="function"&&!Kd(v)&&v.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=v,my(i,o,v,c,y)):(i=Au(a.type,null,c,o,o.mode,y),i.ref=o.ref,i.return=o,o.child=i)}if(v=i.child,!zf(i,y)){var A=v.memoizedProps;if(a=a.compare,a=a!==null?a:Oa,a(A,c)&&i.ref===o.ref)return Qi(i,o,y)}return o.flags|=1,i=zi(v,c),i.ref=o.ref,i.return=o,o.child=i}function my(i,o,a,c,y){if(i!==null){var v=i.memoizedProps;if(Oa(v,c)&&i.ref===o.ref)if(Mt=!1,o.pendingProps=c=v,zf(i,y))(i.flags&131072)!==0&&(Mt=!0);else return o.lanes=i.lanes,Qi(i,o,y)}return Lf(i,o,a,c,y)}function gy(i,o,a,c){var y=c.children,v=i!==null?i.memoizedState:null;if(i===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|a:a,i!==null){for(c=o.child=i.child,y=0;c!==null;)y=y|c.lanes|c.childLanes,c=c.sibling;c=y&~v}else c=0,o.child=null;return yy(i,o,v,a,c)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},i!==null&&Iu(o,v!==null?v.cachePool:null),v!==null?_g(o,v):hf(),Eg(o);else return c=o.lanes=536870912,yy(i,o,v!==null?v.baseLanes|a:a,a,c)}else v!==null?(Iu(o,v.cachePool),_g(o,v),Ps(),o.memoizedState=null):(i!==null&&Iu(o,null),hf(),Ps());return Kt(i,o,y,a),o.child}function Za(i,o){return i!==null&&i.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function yy(i,o,a,c,y){var v=af();return v=v===null?null:{parent:Nt._currentValue,pool:v},o.memoizedState={baseLanes:a,cachePool:v},i!==null&&Iu(o,null),hf(),Eg(o),i!==null&&Tr(i,o,c,!0),o.childLanes=y,null}function zu(i,o){return o=Yu({mode:o.mode,children:o.children},i.mode),o.ref=i.ref,i.child=o,o.return=i,o}function vy(i,o,a){return Uo(o,i.child,null,a),i=zu(o,o.pendingProps),i.flags|=2,An(o),o.memoizedState=null,i}function yA(i,o,a){var c=o.pendingProps,y=(o.flags&128)!==0;if(o.flags&=-129,i===null){if(ze){if(c.mode==="hidden")return i=zu(o,c),o.lanes=536870912,Za(null,i);if(mf(o),(i=ut)?(i=R0(i,On),i=i!==null&&i.data==="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:bs!==null?{id:Ci,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},a=tg(i),a.return=o,o.child=a,Yt=o,ut=null)):i=null,i===null)throw Cs(o);return o.lanes=536870912,null}return zu(o,c)}var v=i.memoizedState;if(v!==null){var A=v.dehydrated;if(mf(o),y)if(o.flags&256)o.flags&=-257,o=vy(i,o,a);else if(o.memoizedState!==null)o.child=i.child,o.flags|=128,o=null;else throw Error(s(558));else if(Mt||Tr(i,o,a,!1),y=(a&i.childLanes)!==0,Mt||y){if(c=at,c!==null&&(A=Ea(c,a),A!==0&&A!==v.retryLane))throw v.retryLane=A,Io(i,A),gn(c,i,A),Uf;tc(),o=vy(i,o,a)}else i=v.treeContext,ut=Bn(A.nextSibling),Yt=o,ze=!0,ws=null,On=!1,i!==null&&sg(o,i),o=zu(o,c),o.flags|=4096;return o}return i=zi(i.child,{mode:c.mode,children:c.children}),i.ref=o.ref,o.child=i,i.return=o,i}function ju(i,o){var a=o.ref;if(a===null)i!==null&&i.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(i===null||i.ref!==a)&&(o.flags|=4194816)}}function Lf(i,o,a,c,y){return Do(o),a=yf(i,o,a,c,void 0,y),c=vf(),i!==null&&!Mt?(_f(i,o,y),Qi(i,o,y)):(ze&&c&&Xd(o),o.flags|=1,Kt(i,o,a,y),o.child)}function _y(i,o,a,c,y,v){return Do(o),o.updateQueue=null,a=xg(o,c,a,y),Tg(i),c=vf(),i!==null&&!Mt?(_f(i,o,v),Qi(i,o,v)):(ze&&c&&Xd(o),o.flags|=1,Kt(i,o,a,v),o.child)}function Ey(i,o,a,c,y){if(Do(o),o.stateNode===null){var v=yr,A=a.contextType;typeof A=="object"&&A!==null&&(v=Jt(A)),v=new a(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Vf,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},uf(o),A=a.contextType,v.context=typeof A=="object"&&A!==null?Jt(A):yr,v.state=o.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Pf(o,a,A,c),v.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(A=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),A!==v.state&&Vf.enqueueReplaceState(v,v.state,null),Ka(o,c,v,y),Ja(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(i===null){v=o.stateNode;var C=o.memoizedProps,L=Oo(a,C);v.props=L;var K=v.context,Z=a.contextType;A=yr,typeof Z=="object"&&Z!==null&&(A=Jt(Z));var se=a.getDerivedStateFromProps;Z=typeof se=="function"||typeof v.getSnapshotBeforeUpdate=="function",C=o.pendingProps!==C,Z||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(C||K!==A)&&ry(o,v,c,A),Ns=!1;var $=o.memoizedState;v.state=$,Ka(o,c,v,y),Ja(),K=o.memoizedState,C||$!==K||Ns?(typeof se=="function"&&(Pf(o,a,se,c),K=o.memoizedState),(L=Ns||oy(o,a,L,c,$,K,A))?(Z||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=K),v.props=c,v.state=K,v.context=A,c=L):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,cf(i,o),A=o.memoizedProps,Z=Oo(a,A),v.props=Z,se=o.pendingProps,$=v.context,K=a.contextType,L=yr,typeof K=="object"&&K!==null&&(L=Jt(K)),C=a.getDerivedStateFromProps,(K=typeof C=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(A!==se||$!==L)&&ry(o,v,c,L),Ns=!1,$=o.memoizedState,v.state=$,Ka(o,c,v,y),Ja();var W=o.memoizedState;A!==se||$!==W||Ns||i!==null&&i.dependencies!==null&&wu(i.dependencies)?(typeof C=="function"&&(Pf(o,a,C,c),W=o.memoizedState),(Z=Ns||oy(o,a,Z,c,$,W,L)||i!==null&&i.dependencies!==null&&wu(i.dependencies))?(K||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,W,L),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,W,L)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=W),v.props=c,v.state=W,v.context=L,c=Z):(typeof v.componentDidUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&$===i.memoizedState||(o.flags|=1024),c=!1)}return v=c,ju(i,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,i!==null&&c?(o.child=Uo(o,i.child,null,y),o.child=Uo(o,null,a,y)):Kt(i,o,a,y),o.memoizedState=v.state,i=o.child):i=Qi(i,o,y),i}function Ty(i,o,a,c){return Ro(),o.flags|=256,Kt(i,o,a,c),o.child}var Of={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qf(i){return{baseLanes:i,cachePool:cg()}}function Bf(i,o,a){return i=i!==null?i.childLanes&~a:0,o&&(i|=wn),i}function xy(i,o,a){var c=o.pendingProps,y=!1,v=(o.flags&128)!==0,A;if((A=v)||(A=i!==null&&i.memoizedState===null?!1:(Tt.current&2)!==0),A&&(y=!0,o.flags&=-129),A=(o.flags&32)!==0,o.flags&=-33,i===null){if(ze){if(y?Ds(o):Ps(),(i=ut)?(i=R0(i,On),i=i!==null&&i.data!=="&"?i:null,i!==null&&(o.memoizedState={dehydrated:i,treeContext:bs!==null?{id:Ci,overflow:Ii}:null,retryLane:536870912,hydrationErrors:null},a=tg(i),a.return=o,o.child=a,Yt=o,ut=null)):i=null,i===null)throw Cs(o);return xh(i)?o.lanes=32:o.lanes=536870912,null}var C=c.children;return c=c.fallback,y?(Ps(),y=o.mode,C=Yu({mode:"hidden",children:C},y),c=No(c,y,a,null),C.return=o,c.return=o,C.sibling=c,o.child=C,c=o.child,c.memoizedState=qf(a),c.childLanes=Bf(i,A,a),o.memoizedState=Of,Za(null,c)):(Ds(o),Gf(o,C))}var L=i.memoizedState;if(L!==null&&(C=L.dehydrated,C!==null)){if(v)o.flags&256?(Ds(o),o.flags&=-257,o=Ff(i,o,a)):o.memoizedState!==null?(Ps(),o.child=i.child,o.flags|=128,o=null):(Ps(),C=c.fallback,y=o.mode,c=Yu({mode:"visible",children:c.children},y),C=No(C,y,a,null),C.flags|=2,c.return=o,C.return=o,c.sibling=C,o.child=c,Uo(o,i.child,null,a),c=o.child,c.memoizedState=qf(a),c.childLanes=Bf(i,A,a),o.memoizedState=Of,o=Za(null,c));else if(Ds(o),xh(C)){if(A=C.nextSibling&&C.nextSibling.dataset,A)var K=A.dgst;A=K,c=Error(s(419)),c.stack="",c.digest=A,Ga({value:c,source:null,stack:null}),o=Ff(i,o,a)}else if(Mt||Tr(i,o,a,!1),A=(a&i.childLanes)!==0,Mt||A){if(A=at,A!==null&&(c=Ea(A,a),c!==0&&c!==L.retryLane))throw L.retryLane=c,Io(i,c),gn(A,i,c),Uf;Th(C)||tc(),o=Ff(i,o,a)}else Th(C)?(o.flags|=192,o.child=i.child,o=null):(i=L.treeContext,ut=Bn(C.nextSibling),Yt=o,ze=!0,ws=null,On=!1,i!==null&&sg(o,i),o=Gf(o,c.children),o.flags|=4096);return o}return y?(Ps(),C=c.fallback,y=o.mode,L=i.child,K=L.sibling,c=zi(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,K!==null?C=zi(K,C):(C=No(C,y,a,null),C.flags|=2),C.return=o,c.return=o,c.sibling=C,o.child=c,Za(null,c),c=o.child,C=i.child.memoizedState,C===null?C=qf(a):(y=C.cachePool,y!==null?(L=Nt._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=cg(),C={baseLanes:C.baseLanes|a,cachePool:y}),c.memoizedState=C,c.childLanes=Bf(i,A,a),o.memoizedState=Of,Za(i.child,c)):(Ds(o),a=i.child,i=a.sibling,a=zi(a,{mode:"visible",children:c.children}),a.return=o,a.sibling=null,i!==null&&(A=o.deletions,A===null?(o.deletions=[i],o.flags|=16):A.push(i)),o.child=a,o.memoizedState=null,a)}function Gf(i,o){return o=Yu({mode:"visible",children:o},i.mode),o.return=i,i.child=o}function Yu(i,o){return i=xn(22,i,null,o),i.lanes=0,i}function Ff(i,o,a){return Uo(o,i.child,null,a),i=Gf(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Sy(i,o,a){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o),nf(i.return,o,a)}function Hf(i,o,a,c,y,v){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:y,treeForkCount:v}:(A.isBackwards=o,A.rendering=null,A.renderingStartTime=0,A.last=c,A.tail=a,A.tailMode=y,A.treeForkCount=v)}function Ay(i,o,a){var c=o.pendingProps,y=c.revealOrder,v=c.tail;c=c.children;var A=Tt.current,C=(A&2)!==0;if(C?(A=A&1|2,o.flags|=128):A&=1,le(Tt,A),Kt(i,o,c,a),c=ze?Ba:0,!C&&i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Sy(i,a,o);else if(i.tag===19)Sy(i,a,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(a=o.child,y=null;a!==null;)i=a.alternate,i!==null&&Vu(i)===null&&(y=a),a=a.sibling;a=y,a===null?(y=o.child,o.child=null):(y=a.sibling,a.sibling=null),Hf(o,!1,y,a,v,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,y=o.child,o.child=null;y!==null;){if(i=y.alternate,i!==null&&Vu(i)===null){o.child=y;break}i=y.sibling,y.sibling=a,a=y,y=i}Hf(o,!0,a,null,v,c);break;case"together":Hf(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function Qi(i,o,a){if(i!==null&&(o.dependencies=i.dependencies),Us|=o.lanes,(a&o.childLanes)===0)if(i!==null){if(Tr(i,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(i!==null&&o.child!==i.child)throw Error(s(153));if(o.child!==null){for(i=o.child,a=zi(i,i.pendingProps),o.child=a,a.return=o;i.sibling!==null;)i=i.sibling,a=a.sibling=zi(i,i.pendingProps),a.return=o;a.sibling=null}return o.child}function zf(i,o){return(i.lanes&o)!==0?!0:(i=i.dependencies,!!(i!==null&&wu(i)))}function vA(i,o,a){switch(o.tag){case 3:pt(o,o.stateNode.containerInfo),Is(o,Nt,i.memoizedState.cache),Ro();break;case 27:case 5:qi(o);break;case 4:pt(o,o.stateNode.containerInfo);break;case 10:Is(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,mf(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(Ds(o),o.flags|=128,null):(a&o.child.childLanes)!==0?xy(i,o,a):(Ds(o),i=Qi(i,o,a),i!==null?i.sibling:null);Ds(o);break;case 19:var y=(i.flags&128)!==0;if(c=(a&o.childLanes)!==0,c||(Tr(i,o,a,!1),c=(a&o.childLanes)!==0),y){if(c)return Ay(i,o,a);o.flags|=128}if(y=o.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),le(Tt,Tt.current),c)break;return null;case 22:return o.lanes=0,gy(i,o,a,o.pendingProps);case 24:Is(o,Nt,i.memoizedState.cache)}return Qi(i,o,a)}function by(i,o,a){if(i!==null)if(i.memoizedProps!==o.pendingProps)Mt=!0;else{if(!zf(i,a)&&(o.flags&128)===0)return Mt=!1,vA(i,o,a);Mt=(i.flags&131072)!==0}else Mt=!1,ze&&(o.flags&1048576)!==0&&ig(o,Ba,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(i=Vo(o.elementType),o.type=i,typeof i=="function")Kd(i)?(c=Oo(i,c),o.tag=1,o=Ey(null,o,i,c,a)):(o.tag=0,o=Lf(null,o,i,c,a));else{if(i!=null){var y=i.$$typeof;if(y===oe){o.tag=11,o=hy(null,o,i,c,a);break e}else if(y===D){o.tag=14,o=py(null,o,i,c,a);break e}}throw o=ye(i)||i,Error(s(306,o,""))}}return o;case 0:return Lf(i,o,o.type,o.pendingProps,a);case 1:return c=o.type,y=Oo(c,o.pendingProps),Ey(i,o,c,y,a);case 3:e:{if(pt(o,o.stateNode.containerInfo),i===null)throw Error(s(387));c=o.pendingProps;var v=o.memoizedState;y=v.element,cf(i,o),Ka(o,c,null,a);var A=o.memoizedState;if(c=A.cache,Is(o,Nt,c),c!==v.cache&&sf(o,[Nt],a,!0),Ja(),c=A.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:A.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=Ty(i,o,c,a);break e}else if(c!==y){y=kn(Error(s(424)),o),Ga(y),o=Ty(i,o,c,a);break e}else{switch(i=o.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(ut=Bn(i.firstChild),Yt=o,ze=!0,ws=null,On=!0,a=gg(o,null,c,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Ro(),c===y){o=Qi(i,o,a);break e}Kt(i,o,c,a)}o=o.child}return o;case 26:return ju(i,o),i===null?(a=U0(o.type,null,o.pendingProps,null))?o.memoizedState=a:ze||(a=o.type,i=o.pendingProps,c=lc(Re.current).createElement(a),c[wt]=o,c[qt]=i,$t(c,a,i),Ct(c),o.stateNode=c):o.memoizedState=U0(o.type,i.memoizedProps,o.pendingProps,i.memoizedState),null;case 27:return qi(o),i===null&&ze&&(c=o.stateNode=P0(o.type,o.pendingProps,Re.current),Yt=o,On=!0,y=ut,Gs(o.type)?(Sh=y,ut=Bn(c.firstChild)):ut=y),Kt(i,o,o.pendingProps.children,a),ju(i,o),i===null&&(o.flags|=4194304),o.child;case 5:return i===null&&ze&&((y=c=ut)&&(c=KA(c,o.type,o.pendingProps,On),c!==null?(o.stateNode=c,Yt=o,ut=Bn(c.firstChild),On=!1,y=!0):y=!1),y||Cs(o)),qi(o),y=o.type,v=o.pendingProps,A=i!==null?i.memoizedProps:null,c=v.children,vh(y,v)?c=null:A!==null&&vh(y,A)&&(o.flags|=32),o.memoizedState!==null&&(y=yf(i,o,uA,null,null,a),pl._currentValue=y),ju(i,o),Kt(i,o,c,a),o.child;case 6:return i===null&&ze&&((i=a=ut)&&(a=$A(a,o.pendingProps,On),a!==null?(o.stateNode=a,Yt=o,ut=null,i=!0):i=!1),i||Cs(o)),null;case 13:return xy(i,o,a);case 4:return pt(o,o.stateNode.containerInfo),c=o.pendingProps,i===null?o.child=Uo(o,null,c,a):Kt(i,o,c,a),o.child;case 11:return hy(i,o,o.type,o.pendingProps,a);case 7:return Kt(i,o,o.pendingProps,a),o.child;case 8:return Kt(i,o,o.pendingProps.children,a),o.child;case 12:return Kt(i,o,o.pendingProps.children,a),o.child;case 10:return c=o.pendingProps,Is(o,o.type,c.value),Kt(i,o,c.children,a),o.child;case 9:return y=o.type._context,c=o.pendingProps.children,Do(o),y=Jt(y),c=c(y),o.flags|=1,Kt(i,o,c,a),o.child;case 14:return py(i,o,o.type,o.pendingProps,a);case 15:return my(i,o,o.type,o.pendingProps,a);case 19:return Ay(i,o,a);case 31:return yA(i,o,a);case 22:return gy(i,o,a,o.pendingProps);case 24:return Do(o),c=Jt(Nt),i===null?(y=af(),y===null&&(y=at,v=of(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=a),y=v),o.memoizedState={parent:c,cache:y},uf(o),Is(o,Nt,y)):((i.lanes&a)!==0&&(cf(i,o),Ka(o,null,null,a),Ja()),y=i.memoizedState,v=o.memoizedState,y.parent!==c?(y={parent:c,cache:c},o.memoizedState=y,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=y),Is(o,Nt,c)):(c=v.cache,Is(o,Nt,c),c!==y.cache&&sf(o,[Nt],a,!0))),Kt(i,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(s(156,o.tag))}function Xi(i){i.flags|=4}function jf(i,o,a,c,y){if((o=(i.mode&32)!==0)&&(o=!1),o){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(Wy())i.flags|=8192;else throw ko=Ru,lf}else i.flags&=-16777217}function wy(i,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!G0(o))if(Wy())i.flags|=8192;else throw ko=Ru,lf}function Ju(i,o){o!==null&&(i.flags|=4),i.flags&16384&&(o=i.tag!==22?Zl():536870912,i.lanes|=o,Pr|=o)}function el(i,o){if(!ze)switch(i.tailMode){case"hidden":o=i.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function ct(i){var o=i.alternate!==null&&i.alternate.child===i.child,a=0,c=0;if(o)for(var y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags&65011712,c|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)a|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=c,i.childLanes=a,o}function _A(i,o,a){var c=o.pendingProps;switch(Wd(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(o),null;case 1:return ct(o),null;case 3:return a=o.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ji(Nt),We(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(Er(o)?Xi(o):i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,ef())),ct(o),null;case 26:var y=o.type,v=o.memoizedState;return i===null?(Xi(o),v!==null?(ct(o),wy(o,v)):(ct(o),jf(o,y,null,c,a))):v?v!==i.memoizedState?(Xi(o),ct(o),wy(o,v)):(ct(o),o.flags&=-16777217):(i=i.memoizedProps,i!==c&&Xi(o),ct(o),jf(o,y,i,c,a)),null;case 27:if(hs(o),a=Re.current,y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==c&&Xi(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return ct(o),null}i=he.current,Er(o)?og(o):(i=P0(y,c,a),o.stateNode=i,Xi(o))}return ct(o),null;case 5:if(hs(o),y=o.type,i!==null&&o.stateNode!=null)i.memoizedProps!==c&&Xi(o);else{if(!c){if(o.stateNode===null)throw Error(s(166));return ct(o),null}if(v=he.current,Er(o))og(o);else{var A=lc(Re.current);switch(v){case 1:v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=A.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=A.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=A.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?A.createElement("select",{is:c.is}):A.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?A.createElement(y,{is:c.is}):A.createElement(y)}}v[wt]=o,v[qt]=c;e:for(A=o.child;A!==null;){if(A.tag===5||A.tag===6)v.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===o)break e;for(;A.sibling===null;){if(A.return===null||A.return===o)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}o.stateNode=v;e:switch($t(v,y,c),y){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Xi(o)}}return ct(o),jf(o,o.type,i===null?null:i.memoizedProps,o.pendingProps,a),null;case 6:if(i&&o.stateNode!=null)i.memoizedProps!==c&&Xi(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(s(166));if(i=Re.current,Er(o)){if(i=o.stateNode,a=o.memoizedProps,c=null,y=Yt,y!==null)switch(y.tag){case 27:case 5:c=y.memoizedProps}i[wt]=o,i=!!(i.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||x0(i.nodeValue,a)),i||Cs(o,!0)}else i=lc(i).createTextNode(c),i[wt]=o,o.stateNode=i}return ct(o),null;case 31:if(a=o.memoizedState,i===null||i.memoizedState!==null){if(c=Er(o),a!==null){if(i===null){if(!c)throw Error(s(318));if(i=o.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(557));i[wt]=o}else Ro(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ct(o),i=!1}else a=ef(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return o.flags&256?(An(o),o):(An(o),null);if((o.flags&128)!==0)throw Error(s(558))}return ct(o),null;case 13:if(c=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=Er(o),c!==null&&c.dehydrated!==null){if(i===null){if(!y)throw Error(s(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[wt]=o}else Ro(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ct(o),y=!1}else y=ef(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return o.flags&256?(An(o),o):(An(o),null)}return An(o),(o.flags&128)!==0?(o.lanes=a,o):(a=c!==null,i=i!==null&&i.memoizedState!==null,a&&(c=o.child,y=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(y=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==y&&(c.flags|=2048)),a!==i&&a&&(o.child.flags|=8192),Ju(o,o.updateQueue),ct(o),null);case 4:return We(),i===null&&hh(o.stateNode.containerInfo),ct(o),null;case 10:return Ji(o.type),ct(o),null;case 19:if(Q(Tt),c=o.memoizedState,c===null)return ct(o),null;if(y=(o.flags&128)!==0,v=c.rendering,v===null)if(y)el(c,!1);else{if(yt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(v=Vu(i),v!==null){for(o.flags|=128,el(c,!1),i=v.updateQueue,o.updateQueue=i,Ju(o,i),o.subtreeFlags=0,i=a,a=o.child;a!==null;)eg(a,i),a=a.sibling;return le(Tt,Tt.current&1|2),ze&&ji(o,c.treeForkCount),o.child}i=i.sibling}c.tail!==null&&on()>Wu&&(o.flags|=128,y=!0,el(c,!1),o.lanes=4194304)}else{if(!y)if(i=Vu(v),i!==null){if(o.flags|=128,y=!0,i=i.updateQueue,o.updateQueue=i,Ju(o,i),el(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!ze)return ct(o),null}else 2*on()-c.renderingStartTime>Wu&&a!==536870912&&(o.flags|=128,y=!0,el(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(i=c.last,i!==null?i.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(i=c.tail,c.rendering=i,c.tail=i.sibling,c.renderingStartTime=on(),i.sibling=null,a=Tt.current,le(Tt,y?a&1|2:a&1),ze&&ji(o,c.treeForkCount),i):(ct(o),null);case 22:case 23:return An(o),pf(),c=o.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(a&536870912)!==0&&(o.flags&128)===0&&(ct(o),o.subtreeFlags&6&&(o.flags|=8192)):ct(o),a=o.updateQueue,a!==null&&Ju(o,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==a&&(o.flags|=2048),i!==null&&Q(Po),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),Ji(Nt),ct(o),null;case 25:return null;case 30:return null}throw Error(s(156,o.tag))}function EA(i,o){switch(Wd(o),o.tag){case 1:return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return Ji(Nt),We(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 26:case 27:case 5:return hs(o),null;case 31:if(o.memoizedState!==null){if(An(o),o.alternate===null)throw Error(s(340));Ro()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 13:if(An(o),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(s(340));Ro()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Q(Tt),null;case 4:return We(),null;case 10:return Ji(o.type),null;case 22:case 23:return An(o),pf(),i!==null&&Q(Po),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 24:return Ji(Nt),null;case 25:return null;default:return null}}function Cy(i,o){switch(Wd(o),o.tag){case 3:Ji(Nt),We();break;case 26:case 27:case 5:hs(o);break;case 4:We();break;case 31:o.memoizedState!==null&&An(o);break;case 13:An(o);break;case 19:Q(Tt);break;case 10:Ji(o.type);break;case 22:case 23:An(o),pf(),i!==null&&Q(Po);break;case 24:Ji(Nt)}}function tl(i,o){try{var a=o.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var y=c.next;a=y;do{if((a.tag&i)===i){c=void 0;var v=a.create,A=a.inst;c=v(),A.destroy=c}a=a.next}while(a!==y)}}catch(C){nt(o,o.return,C)}}function Vs(i,o,a){try{var c=o.updateQueue,y=c!==null?c.lastEffect:null;if(y!==null){var v=y.next;c=v;do{if((c.tag&i)===i){var A=c.inst,C=A.destroy;if(C!==void 0){A.destroy=void 0,y=o;var L=a,K=C;try{K()}catch(Z){nt(y,L,Z)}}}c=c.next}while(c!==v)}}catch(Z){nt(o,o.return,Z)}}function Iy(i){var o=i.updateQueue;if(o!==null){var a=i.stateNode;try{vg(o,a)}catch(c){nt(i,i.return,c)}}}function Ny(i,o,a){a.props=Oo(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(c){nt(i,o,c)}}function nl(i,o){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var c=i.stateNode;break;case 30:c=i.stateNode;break;default:c=i.stateNode}typeof a=="function"?i.refCleanup=a(c):a.current=c}}catch(y){nt(i,o,y)}}function Ni(i,o){var a=i.ref,c=i.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(y){nt(i,o,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(y){nt(i,o,y)}else a.current=null}function Ry(i){var o=i.type,a=i.memoizedProps,c=i.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break e;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(y){nt(i,i.return,y)}}function Yf(i,o,a){try{var c=i.stateNode;FA(c,i.type,a,o),c[qt]=o}catch(y){nt(i,i.return,y)}}function My(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Gs(i.type)||i.tag===4}function Jf(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||My(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Gs(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Kf(i,o,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(i),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=Xn));else if(c!==4&&(c===27&&Gs(i.type)&&(a=i.stateNode,o=null),i=i.child,i!==null))for(Kf(i,o,a),i=i.sibling;i!==null;)Kf(i,o,a),i=i.sibling}function Ku(i,o,a){var c=i.tag;if(c===5||c===6)i=i.stateNode,o?a.insertBefore(i,o):a.appendChild(i);else if(c!==4&&(c===27&&Gs(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Ku(i,o,a),i=i.sibling;i!==null;)Ku(i,o,a),i=i.sibling}function Dy(i){var o=i.stateNode,a=i.memoizedProps;try{for(var c=i.type,y=o.attributes;y.length;)o.removeAttributeNode(y[0]);$t(o,c,a),o[wt]=i,o[qt]=a}catch(v){nt(i,i.return,v)}}var Wi=!1,Dt=!1,$f=!1,Py=typeof WeakSet=="function"?WeakSet:Set,Gt=null;function TA(i,o){if(i=i.containerInfo,gh=mc,i=jm(i),Gd(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var y=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{a.nodeType,v.nodeType}catch{a=null;break e}var A=0,C=-1,L=-1,K=0,Z=0,se=i,$=null;t:for(;;){for(var W;se!==a||y!==0&&se.nodeType!==3||(C=A+y),se!==v||c!==0&&se.nodeType!==3||(L=A+c),se.nodeType===3&&(A+=se.nodeValue.length),(W=se.firstChild)!==null;)$=se,se=W;for(;;){if(se===i)break t;if($===a&&++K===y&&(C=A),$===v&&++Z===c&&(L=A),(W=se.nextSibling)!==null)break;se=$,$=se.parentNode}se=W}a=C===-1||L===-1?null:{start:C,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(yh={focusedElem:i,selectionRange:a},mc=!1,Gt=o;Gt!==null;)if(o=Gt,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,Gt=i;else for(;Gt!==null;){switch(o=Gt,v=o.alternate,i=o.flags,o.tag){case 0:if((i&4)!==0&&(i=o.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)y=i[a],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&v!==null){i=void 0,a=o,y=v.memoizedProps,v=v.memoizedState,c=a.stateNode;try{var Te=Oo(a.type,y);i=c.getSnapshotBeforeUpdate(Te,v),c.__reactInternalSnapshotBeforeUpdate=i}catch(we){nt(a,a.return,we)}}break;case 3:if((i&1024)!==0){if(i=o.stateNode.containerInfo,a=i.nodeType,a===9)Eh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Eh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=o.sibling,i!==null){i.return=o.return,Gt=i;break}Gt=o.return}}function Vy(i,o,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:es(i,a),c&4&&tl(5,a);break;case 1:if(es(i,a),c&4)if(i=a.stateNode,o===null)try{i.componentDidMount()}catch(A){nt(a,a.return,A)}else{var y=Oo(a.type,o.memoizedProps);o=o.memoizedState;try{i.componentDidUpdate(y,o,i.__reactInternalSnapshotBeforeUpdate)}catch(A){nt(a,a.return,A)}}c&64&&Iy(a),c&512&&nl(a,a.return);break;case 3:if(es(i,a),c&64&&(i=a.updateQueue,i!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{vg(i,o)}catch(A){nt(a,a.return,A)}}break;case 27:o===null&&c&4&&Dy(a);case 26:case 5:es(i,a),o===null&&c&4&&Ry(a),c&512&&nl(a,a.return);break;case 12:es(i,a);break;case 31:es(i,a),c&4&&Ly(i,a);break;case 13:es(i,a),c&4&&Oy(i,a),c&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=RA.bind(null,a),QA(i,a))));break;case 22:if(c=a.memoizedState!==null||Wi,!c){o=o!==null&&o.memoizedState!==null||Dt,y=Wi;var v=Dt;Wi=c,(Dt=o)&&!v?ts(i,a,(a.subtreeFlags&8772)!==0):es(i,a),Wi=y,Dt=v}break;case 30:break;default:es(i,a)}}function ky(i){var o=i.alternate;o!==null&&(i.alternate=null,ky(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&ir(o)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ht=null,fn=!1;function Zi(i,o,a){for(a=a.child;a!==null;)Uy(i,o,a),a=a.sibling}function Uy(i,o,a){if(zt&&typeof zt.onCommitFiberUnmount=="function")try{zt.onCommitFiberUnmount(Jn,a)}catch{}switch(a.tag){case 26:Dt||Ni(a,o),Zi(i,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Dt||Ni(a,o);var c=ht,y=fn;Gs(a.type)&&(ht=a.stateNode,fn=!1),Zi(i,o,a),dl(a.stateNode),ht=c,fn=y;break;case 5:Dt||Ni(a,o);case 6:if(c=ht,y=fn,ht=null,Zi(i,o,a),ht=c,fn=y,ht!==null)if(fn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(v){nt(a,o,v)}else try{ht.removeChild(a.stateNode)}catch(v){nt(a,o,v)}break;case 18:ht!==null&&(fn?(i=ht,I0(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Gr(i)):I0(ht,a.stateNode));break;case 4:c=ht,y=fn,ht=a.stateNode.containerInfo,fn=!0,Zi(i,o,a),ht=c,fn=y;break;case 0:case 11:case 14:case 15:Vs(2,a,o),Dt||Vs(4,a,o),Zi(i,o,a);break;case 1:Dt||(Ni(a,o),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Ny(a,o,c)),Zi(i,o,a);break;case 21:Zi(i,o,a);break;case 22:Dt=(c=Dt)||a.memoizedState!==null,Zi(i,o,a),Dt=c;break;default:Zi(i,o,a)}}function Ly(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Gr(i)}catch(a){nt(o,o.return,a)}}}function Oy(i,o){if(o.memoizedState===null&&(i=o.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Gr(i)}catch(a){nt(o,o.return,a)}}function xA(i){switch(i.tag){case 31:case 13:case 19:var o=i.stateNode;return o===null&&(o=i.stateNode=new Py),o;case 22:return i=i.stateNode,o=i._retryCache,o===null&&(o=i._retryCache=new Py),o;default:throw Error(s(435,i.tag))}}function $u(i,o){var a=xA(i);o.forEach(function(c){if(!a.has(c)){a.add(c);var y=MA.bind(null,i,c);c.then(y,y)}})}function hn(i,o){var a=o.deletions;if(a!==null)for(var c=0;c<a.length;c++){var y=a[c],v=i,A=o,C=A;e:for(;C!==null;){switch(C.tag){case 27:if(Gs(C.type)){ht=C.stateNode,fn=!1;break e}break;case 5:ht=C.stateNode,fn=!1;break e;case 3:case 4:ht=C.stateNode.containerInfo,fn=!0;break e}C=C.return}if(ht===null)throw Error(s(160));Uy(v,A,y),ht=null,fn=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)qy(o,i),o=o.sibling}var ii=null;function qy(i,o){var a=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:hn(o,i),pn(i),c&4&&(Vs(3,i,i.return),tl(3,i),Vs(5,i,i.return));break;case 1:hn(o,i),pn(i),c&512&&(Dt||a===null||Ni(a,a.return)),c&64&&Wi&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var y=ii;if(hn(o,i),pn(i),c&512&&(Dt||a===null||Ni(a,a.return)),c&4){var v=a!==null?a.memoizedState:null;if(c=i.memoizedState,a===null)if(c===null)if(i.stateNode===null){e:{c=i.type,a=i.memoizedProps,y=y.ownerDocument||y;t:switch(c){case"title":v=y.getElementsByTagName("title")[0],(!v||v[mi]||v[wt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(c),y.head.insertBefore(v,y.querySelector("head > title"))),$t(v,c,a),v[wt]=i,Ct(v),c=v;break e;case"link":var A=q0("link","href",y).get(c+(a.href||""));if(A){for(var C=0;C<A.length;C++)if(v=A[C],v.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&v.getAttribute("rel")===(a.rel==null?null:a.rel)&&v.getAttribute("title")===(a.title==null?null:a.title)&&v.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(C,1);break t}}v=y.createElement(c),$t(v,c,a),y.head.appendChild(v);break;case"meta":if(A=q0("meta","content",y).get(c+(a.content||""))){for(C=0;C<A.length;C++)if(v=A[C],v.getAttribute("content")===(a.content==null?null:""+a.content)&&v.getAttribute("name")===(a.name==null?null:a.name)&&v.getAttribute("property")===(a.property==null?null:a.property)&&v.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&v.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(C,1);break t}}v=y.createElement(c),$t(v,c,a),y.head.appendChild(v);break;default:throw Error(s(468,c))}v[wt]=i,Ct(v),c=v}i.stateNode=c}else B0(y,i.type,i.stateNode);else i.stateNode=O0(y,c,i.memoizedProps);else v!==c?(v===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):v.count--,c===null?B0(y,i.type,i.stateNode):O0(y,c,i.memoizedProps)):c===null&&i.stateNode!==null&&Yf(i,i.memoizedProps,a.memoizedProps)}break;case 27:hn(o,i),pn(i),c&512&&(Dt||a===null||Ni(a,a.return)),a!==null&&c&4&&Yf(i,i.memoizedProps,a.memoizedProps);break;case 5:if(hn(o,i),pn(i),c&512&&(Dt||a===null||Ni(a,a.return)),i.flags&32){y=i.stateNode;try{dn(y,"")}catch(Te){nt(i,i.return,Te)}}c&4&&i.stateNode!=null&&(y=i.memoizedProps,Yf(i,y,a!==null?a.memoizedProps:y)),c&1024&&($f=!0);break;case 6:if(hn(o,i),pn(i),c&4){if(i.stateNode===null)throw Error(s(162));c=i.memoizedProps,a=i.stateNode;try{a.nodeValue=c}catch(Te){nt(i,i.return,Te)}}break;case 3:if(dc=null,y=ii,ii=uc(o.containerInfo),hn(o,i),ii=y,pn(i),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Gr(o.containerInfo)}catch(Te){nt(i,i.return,Te)}$f&&($f=!1,By(i));break;case 4:c=ii,ii=uc(i.stateNode.containerInfo),hn(o,i),pn(i),ii=c;break;case 12:hn(o,i),pn(i);break;case 31:hn(o,i),pn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,$u(i,c)));break;case 13:hn(o,i),pn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Xu=on()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,$u(i,c)));break;case 22:y=i.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,K=Wi,Z=Dt;if(Wi=K||y,Dt=Z||L,hn(o,i),Dt=Z,Wi=K,pn(i),c&8192)e:for(o=i.stateNode,o._visibility=y?o._visibility&-2:o._visibility|1,y&&(a===null||L||Wi||Dt||qo(i)),a=null,o=i;;){if(o.tag===5||o.tag===26){if(a===null){L=a=o;try{if(v=L.stateNode,y)A=v.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{C=L.stateNode;var se=L.memoizedProps.style,$=se!=null&&se.hasOwnProperty("display")?se.display:null;C.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Te){nt(L,L.return,Te)}}}else if(o.tag===6){if(a===null){L=o;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(Te){nt(L,L.return,Te)}}}else if(o.tag===18){if(a===null){L=o;try{var W=L.stateNode;y?N0(W,!0):N0(L.stateNode,!1)}catch(Te){nt(L,L.return,Te)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===i)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=i.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,$u(i,a))));break;case 19:hn(o,i),pn(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,$u(i,c)));break;case 30:break;case 21:break;default:hn(o,i),pn(i)}}function pn(i){var o=i.flags;if(o&2){try{for(var a,c=i.return;c!==null;){if(My(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var y=a.stateNode,v=Jf(i);Ku(i,v,y);break;case 5:var A=a.stateNode;a.flags&32&&(dn(A,""),a.flags&=-33);var C=Jf(i);Ku(i,C,A);break;case 3:case 4:var L=a.stateNode.containerInfo,K=Jf(i);Kf(i,K,L);break;default:throw Error(s(161))}}catch(Z){nt(i,i.return,Z)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function By(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var o=i;By(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),i=i.sibling}}function es(i,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Vy(i,o.alternate,o),o=o.sibling}function qo(i){for(i=i.child;i!==null;){var o=i;switch(o.tag){case 0:case 11:case 14:case 15:Vs(4,o,o.return),qo(o);break;case 1:Ni(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Ny(o,o.return,a),qo(o);break;case 27:dl(o.stateNode);case 26:case 5:Ni(o,o.return),qo(o);break;case 22:o.memoizedState===null&&qo(o);break;case 30:qo(o);break;default:qo(o)}i=i.sibling}}function ts(i,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,y=i,v=o,A=v.flags;switch(v.tag){case 0:case 11:case 15:ts(y,v,a),tl(4,v);break;case 1:if(ts(y,v,a),c=v,y=c.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(K){nt(c,c.return,K)}if(c=v,y=c.updateQueue,y!==null){var C=c.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)yg(L[y],C)}catch(K){nt(c,c.return,K)}}a&&A&64&&Iy(v),nl(v,v.return);break;case 27:Dy(v);case 26:case 5:ts(y,v,a),a&&c===null&&A&4&&Ry(v),nl(v,v.return);break;case 12:ts(y,v,a);break;case 31:ts(y,v,a),a&&A&4&&Ly(y,v);break;case 13:ts(y,v,a),a&&A&4&&Oy(y,v);break;case 22:v.memoizedState===null&&ts(y,v,a),nl(v,v.return);break;case 30:break;default:ts(y,v,a)}o=o.sibling}}function Qf(i,o){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(i=o.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&Fa(a))}function Xf(i,o){i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Fa(i))}function si(i,o,a,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Gy(i,o,a,c),o=o.sibling}function Gy(i,o,a,c){var y=o.flags;switch(o.tag){case 0:case 11:case 15:si(i,o,a,c),y&2048&&tl(9,o);break;case 1:si(i,o,a,c);break;case 3:si(i,o,a,c),y&2048&&(i=null,o.alternate!==null&&(i=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==i&&(o.refCount++,i!=null&&Fa(i)));break;case 12:if(y&2048){si(i,o,a,c),i=o.stateNode;try{var v=o.memoizedProps,A=v.id,C=v.onPostCommit;typeof C=="function"&&C(A,o.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(L){nt(o,o.return,L)}}else si(i,o,a,c);break;case 31:si(i,o,a,c);break;case 13:si(i,o,a,c);break;case 23:break;case 22:v=o.stateNode,A=o.alternate,o.memoizedState!==null?v._visibility&2?si(i,o,a,c):il(i,o):v._visibility&2?si(i,o,a,c):(v._visibility|=2,Rr(i,o,a,c,(o.subtreeFlags&10256)!==0||!1)),y&2048&&Qf(A,o);break;case 24:si(i,o,a,c),y&2048&&Xf(o.alternate,o);break;default:si(i,o,a,c)}}function Rr(i,o,a,c,y){for(y=y&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=i,A=o,C=a,L=c,K=A.flags;switch(A.tag){case 0:case 11:case 15:Rr(v,A,C,L,y),tl(8,A);break;case 23:break;case 22:var Z=A.stateNode;A.memoizedState!==null?Z._visibility&2?Rr(v,A,C,L,y):il(v,A):(Z._visibility|=2,Rr(v,A,C,L,y)),y&&K&2048&&Qf(A.alternate,A);break;case 24:Rr(v,A,C,L,y),y&&K&2048&&Xf(A.alternate,A);break;default:Rr(v,A,C,L,y)}o=o.sibling}}function il(i,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=i,c=o,y=c.flags;switch(c.tag){case 22:il(a,c),y&2048&&Qf(c.alternate,c);break;case 24:il(a,c),y&2048&&Xf(c.alternate,c);break;default:il(a,c)}o=o.sibling}}var sl=8192;function Mr(i,o,a){if(i.subtreeFlags&sl)for(i=i.child;i!==null;)Fy(i,o,a),i=i.sibling}function Fy(i,o,a){switch(i.tag){case 26:Mr(i,o,a),i.flags&sl&&i.memoizedState!==null&&lb(a,ii,i.memoizedState,i.memoizedProps);break;case 5:Mr(i,o,a);break;case 3:case 4:var c=ii;ii=uc(i.stateNode.containerInfo),Mr(i,o,a),ii=c;break;case 22:i.memoizedState===null&&(c=i.alternate,c!==null&&c.memoizedState!==null?(c=sl,sl=16777216,Mr(i,o,a),sl=c):Mr(i,o,a));break;default:Mr(i,o,a)}}function Hy(i){var o=i.alternate;if(o!==null&&(i=o.child,i!==null)){o.child=null;do o=i.sibling,i.sibling=null,i=o;while(i!==null)}}function ol(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];Gt=c,jy(c,i)}Hy(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)zy(i),i=i.sibling}function zy(i){switch(i.tag){case 0:case 11:case 15:ol(i),i.flags&2048&&Vs(9,i,i.return);break;case 3:ol(i);break;case 12:ol(i);break;case 22:var o=i.stateNode;i.memoizedState!==null&&o._visibility&2&&(i.return===null||i.return.tag!==13)?(o._visibility&=-3,Qu(i)):ol(i);break;default:ol(i)}}function Qu(i){var o=i.deletions;if((i.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var c=o[a];Gt=c,jy(c,i)}Hy(i)}for(i=i.child;i!==null;){switch(o=i,o.tag){case 0:case 11:case 15:Vs(8,o,o.return),Qu(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,Qu(o));break;default:Qu(o)}i=i.sibling}}function jy(i,o){for(;Gt!==null;){var a=Gt;switch(a.tag){case 0:case 11:case 15:Vs(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Fa(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Gt=c;else e:for(a=i;Gt!==null;){c=Gt;var y=c.sibling,v=c.return;if(ky(c),c===a){Gt=null;break e}if(y!==null){y.return=v,Gt=y;break e}Gt=v}}}var SA={getCacheForType:function(i){var o=Jt(Nt),a=o.data.get(i);return a===void 0&&(a=i(),o.data.set(i,a)),a},cacheSignal:function(){return Jt(Nt).controller.signal}},AA=typeof WeakMap=="function"?WeakMap:Map,Xe=0,at=null,Oe=null,Be=0,tt=0,bn=null,ks=!1,Dr=!1,Wf=!1,ns=0,yt=0,Us=0,Bo=0,Zf=0,wn=0,Pr=0,rl=null,mn=null,eh=!1,Xu=0,Yy=0,Wu=1/0,Zu=null,Ls=null,Lt=0,Os=null,Vr=null,is=0,th=0,nh=null,Jy=null,al=0,ih=null;function Cn(){return(Xe&2)!==0&&Be!==0?Be&-Be:F.T!==null?uh():eu()}function Ky(){if(wn===0)if((Be&536870912)===0||ze){var i=ho;ho<<=1,(ho&3932160)===0&&(ho=262144),wn=i}else wn=536870912;return i=Sn.current,i!==null&&(i.flags|=32),wn}function gn(i,o,a){(i===at&&(tt===2||tt===9)||i.cancelPendingCommit!==null)&&(kr(i,0),qs(i,Be,wn,!1)),po(i,a),((Xe&2)===0||i!==at)&&(i===at&&((Xe&2)===0&&(Bo|=a),yt===4&&qs(i,Be,wn,!1)),Ri(i))}function $y(i,o,a){if((Xe&6)!==0)throw Error(s(327));var c=!a&&(o&127)===0&&(o&i.expiredLanes)===0||Kn(i,o),y=c?CA(i,o):oh(i,o,!0),v=c;do{if(y===0){Dr&&!c&&qs(i,o,0,!1);break}else{if(a=i.current.alternate,v&&!bA(a)){y=oh(i,o,!1),v=!1;continue}if(y===2){if(v=o,i.errorRecoveryDisabledLanes&v)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){o=A;e:{var C=i;y=rl;var L=C.current.memoizedState.isDehydrated;if(L&&(kr(C,A).flags|=256),A=oh(C,A,!1),A!==2){if(Wf&&!L){C.errorRecoveryDisabledLanes|=v,Bo|=v,y=4;break e}v=mn,mn=y,v!==null&&(mn===null?mn=v:mn.push.apply(mn,v))}y=A}if(v=!1,y!==2)continue}}if(y===1){kr(i,0),qs(i,o,0,!0);break}e:{switch(c=i,v=y,v){case 0:case 1:throw Error(s(345));case 4:if((o&4194048)!==o)break;case 6:qs(c,o,wn,!ks);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((o&62914560)===o&&(y=Xu+300-on(),10<y)){if(qs(c,o,wn,!ks),fi(c,0,!0)!==0)break e;is=o,c.timeoutHandle=w0(Qy.bind(null,c,a,mn,Zu,eh,o,wn,Bo,Pr,ks,v,"Throttled",-0,0),y);break e}Qy(c,a,mn,Zu,eh,o,wn,Bo,Pr,ks,v,null,-0,0)}}break}while(!0);Ri(i)}function Qy(i,o,a,c,y,v,A,C,L,K,Z,se,$,W){if(i.timeoutHandle=-1,se=o.subtreeFlags,se&8192||(se&16785408)===16785408){se={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xn},Fy(o,v,se);var Te=(v&62914560)===v?Xu-on():(v&4194048)===v?Yy-on():0;if(Te=ub(se,Te),Te!==null){is=v,i.cancelPendingCommit=Te(s0.bind(null,i,o,v,a,c,y,A,C,L,Z,se,null,$,W)),qs(i,v,A,!K);return}}s0(i,o,v,a,c,y,A,C,L)}function bA(i){for(var o=i;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var y=a[c],v=y.getSnapshot;y=y.value;try{if(!Tn(v(),y))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function qs(i,o,a,c){o&=~Zf,o&=~Bo,i.suspendedLanes|=o,i.pingedLanes&=~o,c&&(i.warmLanes|=o),c=i.expirationTimes;for(var y=o;0<y;){var v=31-_t(y),A=1<<v;c[v]=-1,y&=~A}a!==0&&mo(i,a,o)}function ec(){return(Xe&6)===0?(ll(0),!1):!0}function sh(){if(Oe!==null){if(tt===0)var i=Oe.return;else i=Oe,Yi=Mo=null,Ef(i),br=null,za=0,i=Oe;for(;i!==null;)Cy(i.alternate,i),i=i.return;Oe=null}}function kr(i,o){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,jA(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),is=0,sh(),at=i,Oe=a=zi(i.current,null),Be=o,tt=0,bn=null,ks=!1,Dr=Kn(i,o),Wf=!1,Pr=wn=Zf=Bo=Us=yt=0,mn=rl=null,eh=!1,(o&8)!==0&&(o|=o&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=o;0<c;){var y=31-_t(c),v=1<<y;o|=i[y],c&=~v}return ns=o,Tu(),a}function Xy(i,o){Ue=null,F.H=Wa,o===Ar||o===Nu?(o=hg(),tt=3):o===lf?(o=hg(),tt=4):tt=o===Uf?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,bn=o,Oe===null&&(yt=1,Hu(i,kn(o,i.current)))}function Wy(){var i=Sn.current;return i===null?!0:(Be&4194048)===Be?qn===null:(Be&62914560)===Be||(Be&536870912)!==0?i===qn:!1}function Zy(){var i=F.H;return F.H=Wa,i===null?Wa:i}function e0(){var i=F.A;return F.A=SA,i}function tc(){yt=4,ks||(Be&4194048)!==Be&&Sn.current!==null||(Dr=!0),(Us&134217727)===0&&(Bo&134217727)===0||at===null||qs(at,Be,wn,!1)}function oh(i,o,a){var c=Xe;Xe|=2;var y=Zy(),v=e0();(at!==i||Be!==o)&&(Zu=null,kr(i,o)),o=!1;var A=yt;e:do try{if(tt!==0&&Oe!==null){var C=Oe,L=bn;switch(tt){case 8:sh(),A=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(o=!0);var K=tt;if(tt=0,bn=null,Ur(i,C,L,K),a&&Dr){A=0;break e}break;default:K=tt,tt=0,bn=null,Ur(i,C,L,K)}}wA(),A=yt;break}catch(Z){Xy(i,Z)}while(!0);return o&&i.shellSuspendCounter++,Yi=Mo=null,Xe=c,F.H=y,F.A=v,Oe===null&&(at=null,Be=0,Tu()),A}function wA(){for(;Oe!==null;)t0(Oe)}function CA(i,o){var a=Xe;Xe|=2;var c=Zy(),y=e0();at!==i||Be!==o?(Zu=null,Wu=on()+500,kr(i,o)):Dr=Kn(i,o);e:do try{if(tt!==0&&Oe!==null){o=Oe;var v=bn;t:switch(tt){case 1:tt=0,bn=null,Ur(i,o,v,1);break;case 2:case 9:if(dg(v)){tt=0,bn=null,n0(o);break}o=function(){tt!==2&&tt!==9||at!==i||(tt=7),Ri(i)},v.then(o,o);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:dg(v)?(tt=0,bn=null,n0(o)):(tt=0,bn=null,Ur(i,o,v,7));break;case 5:var A=null;switch(Oe.tag){case 26:A=Oe.memoizedState;case 5:case 27:var C=Oe;if(A?G0(A):C.stateNode.complete){tt=0,bn=null;var L=C.sibling;if(L!==null)Oe=L;else{var K=C.return;K!==null?(Oe=K,nc(K)):Oe=null}break t}}tt=0,bn=null,Ur(i,o,v,5);break;case 6:tt=0,bn=null,Ur(i,o,v,6);break;case 8:sh(),yt=6;break e;default:throw Error(s(462))}}IA();break}catch(Z){Xy(i,Z)}while(!0);return Yi=Mo=null,F.H=c,F.A=y,Xe=a,Oe!==null?0:(at=null,Be=0,Tu(),yt)}function IA(){for(;Oe!==null&&!Vd();)t0(Oe)}function t0(i){var o=by(i.alternate,i,ns);i.memoizedProps=i.pendingProps,o===null?nc(i):Oe=o}function n0(i){var o=i,a=o.alternate;switch(o.tag){case 15:case 0:o=_y(a,o,o.pendingProps,o.type,void 0,Be);break;case 11:o=_y(a,o,o.pendingProps,o.type.render,o.ref,Be);break;case 5:Ef(o);default:Cy(a,o),o=Oe=eg(o,ns),o=by(a,o,ns)}i.memoizedProps=i.pendingProps,o===null?nc(i):Oe=o}function Ur(i,o,a,c){Yi=Mo=null,Ef(o),br=null,za=0;var y=o.return;try{if(gA(i,y,o,a,Be)){yt=1,Hu(i,kn(a,i.current)),Oe=null;return}}catch(v){if(y!==null)throw Oe=y,v;yt=1,Hu(i,kn(a,i.current)),Oe=null;return}o.flags&32768?(ze||c===1?i=!0:Dr||(Be&536870912)!==0?i=!1:(ks=i=!0,(c===2||c===9||c===3||c===6)&&(c=Sn.current,c!==null&&c.tag===13&&(c.flags|=16384))),i0(o,i)):nc(o)}function nc(i){var o=i;do{if((o.flags&32768)!==0){i0(o,ks);return}i=o.return;var a=_A(o.alternate,o,ns);if(a!==null){Oe=a;return}if(o=o.sibling,o!==null){Oe=o;return}Oe=o=i}while(o!==null);yt===0&&(yt=5)}function i0(i,o){do{var a=EA(i.alternate,i);if(a!==null){a.flags&=32767,Oe=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(i=i.sibling,i!==null)){Oe=i;return}Oe=i=a}while(i!==null);yt=6,Oe=null}function s0(i,o,a,c,y,v,A,C,L){i.cancelPendingCommit=null;do ic();while(Lt!==0);if((Xe&6)!==0)throw Error(s(327));if(o!==null){if(o===i.current)throw Error(s(177));if(v=o.lanes|o.childLanes,v|=Yd,Ld(i,a,v,A,C,L),i===at&&(Oe=at=null,Be=0),Vr=o,Os=i,is=a,th=v,nh=y,Jy=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,DA(ms,function(){return u0(),null})):(i.callbackNode=null,i.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=F.T,F.T=null,y=ae.p,ae.p=2,A=Xe,Xe|=4;try{TA(i,o,a)}finally{Xe=A,ae.p=y,F.T=c}}Lt=1,o0(),r0(),a0()}}function o0(){if(Lt===1){Lt=0;var i=Os,o=Vr,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var c=ae.p;ae.p=2;var y=Xe;Xe|=4;try{qy(o,i);var v=yh,A=jm(i.containerInfo),C=v.focusedElem,L=v.selectionRange;if(A!==C&&C&&C.ownerDocument&&zm(C.ownerDocument.documentElement,C)){if(L!==null&&Gd(C)){var K=L.start,Z=L.end;if(Z===void 0&&(Z=K),"selectionStart"in C)C.selectionStart=K,C.selectionEnd=Math.min(Z,C.value.length);else{var se=C.ownerDocument||document,$=se&&se.defaultView||window;if($.getSelection){var W=$.getSelection(),Te=C.textContent.length,we=Math.min(L.start,Te),rt=L.end===void 0?we:Math.min(L.end,Te);!W.extend&&we>rt&&(A=rt,rt=we,we=A);var z=Hm(C,we),G=Hm(C,rt);if(z&&G&&(W.rangeCount!==1||W.anchorNode!==z.node||W.anchorOffset!==z.offset||W.focusNode!==G.node||W.focusOffset!==G.offset)){var J=se.createRange();J.setStart(z.node,z.offset),W.removeAllRanges(),we>rt?(W.addRange(J),W.extend(G.node,G.offset)):(J.setEnd(G.node,G.offset),W.addRange(J))}}}}for(se=[],W=C;W=W.parentNode;)W.nodeType===1&&se.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<se.length;C++){var ne=se[C];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}mc=!!gh,yh=gh=null}finally{Xe=y,ae.p=c,F.T=a}}i.current=o,Lt=2}}function r0(){if(Lt===2){Lt=0;var i=Os,o=Vr,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var c=ae.p;ae.p=2;var y=Xe;Xe|=4;try{Vy(i,o.alternate,o)}finally{Xe=y,ae.p=c,F.T=a}}Lt=3}}function a0(){if(Lt===4||Lt===3){Lt=0,Jl();var i=Os,o=Vr,a=is,c=Jy;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Lt=5:(Lt=0,Vr=Os=null,l0(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Ls=null),Bi(a),o=o.stateNode,zt&&typeof zt.onCommitFiberRoot=="function")try{zt.onCommitFiberRoot(Jn,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=F.T,y=ae.p,ae.p=2,F.T=null;try{for(var v=i.onRecoverableError,A=0;A<c.length;A++){var C=c[A];v(C.value,{componentStack:C.stack})}}finally{F.T=o,ae.p=y}}(is&3)!==0&&ic(),Ri(i),y=i.pendingLanes,(a&261930)!==0&&(y&42)!==0?i===ih?al++:(al=0,ih=i):al=0,ll(0)}}function l0(i,o){(i.pooledCacheLanes&=o)===0&&(o=i.pooledCache,o!=null&&(i.pooledCache=null,Fa(o)))}function ic(){return o0(),r0(),a0(),u0()}function u0(){if(Lt!==5)return!1;var i=Os,o=th;th=0;var a=Bi(is),c=F.T,y=ae.p;try{ae.p=32>a?32:a,F.T=null,a=nh,nh=null;var v=Os,A=is;if(Lt=0,Vr=Os=null,is=0,(Xe&6)!==0)throw Error(s(331));var C=Xe;if(Xe|=4,zy(v.current),Gy(v,v.current,A,a),Xe=C,ll(0,!1),zt&&typeof zt.onPostCommitFiberRoot=="function")try{zt.onPostCommitFiberRoot(Jn,v)}catch{}return!0}finally{ae.p=y,F.T=c,l0(i,o)}}function c0(i,o,a){o=kn(a,o),o=kf(i.stateNode,o,2),i=Ms(i,o,2),i!==null&&(po(i,2),Ri(i))}function nt(i,o,a){if(i.tag===3)c0(i,i,a);else for(;o!==null;){if(o.tag===3){c0(o,i,a);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ls===null||!Ls.has(c))){i=kn(a,i),a=dy(2),c=Ms(o,a,2),c!==null&&(fy(a,c,o,i),po(c,2),Ri(c));break}}o=o.return}}function rh(i,o,a){var c=i.pingCache;if(c===null){c=i.pingCache=new AA;var y=new Set;c.set(o,y)}else y=c.get(o),y===void 0&&(y=new Set,c.set(o,y));y.has(a)||(Wf=!0,y.add(a),i=NA.bind(null,i,o,a),o.then(i,i))}function NA(i,o,a){var c=i.pingCache;c!==null&&c.delete(o),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,at===i&&(Be&a)===a&&(yt===4||yt===3&&(Be&62914560)===Be&&300>on()-Xu?(Xe&2)===0&&kr(i,0):Zf|=a,Pr===Be&&(Pr=0)),Ri(i)}function d0(i,o){o===0&&(o=Zl()),i=Io(i,o),i!==null&&(po(i,o),Ri(i))}function RA(i){var o=i.memoizedState,a=0;o!==null&&(a=o.retryLane),d0(i,a)}function MA(i,o){var a=0;switch(i.tag){case 31:case 13:var c=i.stateNode,y=i.memoizedState;y!==null&&(a=y.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(o),d0(i,a)}function DA(i,o){return Ut(i,o)}var sc=null,Lr=null,ah=!1,oc=!1,lh=!1,Bs=0;function Ri(i){i!==Lr&&i.next===null&&(Lr===null?sc=Lr=i:Lr=Lr.next=i),oc=!0,ah||(ah=!0,VA())}function ll(i,o){if(!lh&&oc){lh=!0;do for(var a=!1,c=sc;c!==null;){if(i!==0){var y=c.pendingLanes;if(y===0)var v=0;else{var A=c.suspendedLanes,C=c.pingedLanes;v=(1<<31-_t(42|i)+1)-1,v&=y&~(A&~C),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(a=!0,m0(c,v))}else v=Be,v=fi(c,c===at?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Kn(c,v)||(a=!0,m0(c,v));c=c.next}while(a);lh=!1}}function PA(){f0()}function f0(){oc=ah=!1;var i=0;Bs!==0&&zA()&&(i=Bs);for(var o=on(),a=null,c=sc;c!==null;){var y=c.next,v=h0(c,o);v===0?(c.next=null,a===null?sc=y:a.next=y,y===null&&(Lr=a)):(a=c,(i!==0||(v&3)!==0)&&(oc=!0)),c=y}Lt!==0&&Lt!==5||ll(i),Bs!==0&&(Bs=0)}function h0(i,o){for(var a=i.suspendedLanes,c=i.pingedLanes,y=i.expirationTimes,v=i.pendingLanes&-62914561;0<v;){var A=31-_t(v),C=1<<A,L=y[A];L===-1?((C&a)===0||(C&c)!==0)&&(y[A]=Ud(C,o)):L<=o&&(i.expiredLanes|=C),v&=~C}if(o=at,a=Be,a=fi(i,i===o?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c=i.callbackNode,a===0||i===o&&(tt===2||tt===9)||i.cancelPendingCommit!==null)return c!==null&&c!==null&&ps(c),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Kn(i,a)){if(o=a&-a,o===i.callbackPriority)return o;switch(c!==null&&ps(c),Bi(a)){case 2:case 8:a=va;break;case 32:a=ms;break;case 268435456:a=Kl;break;default:a=ms}return c=p0.bind(null,i),a=Ut(a,c),i.callbackPriority=o,i.callbackNode=a,o}return c!==null&&c!==null&&ps(c),i.callbackPriority=2,i.callbackNode=null,2}function p0(i,o){if(Lt!==0&&Lt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(ic()&&i.callbackNode!==a)return null;var c=Be;return c=fi(i,i===at?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),c===0?null:($y(i,c,o),h0(i,on()),i.callbackNode!=null&&i.callbackNode===a?p0.bind(null,i):null)}function m0(i,o){if(ic())return null;$y(i,o,!0)}function VA(){YA(function(){(Xe&6)!==0?Ut(ya,PA):f0()})}function uh(){if(Bs===0){var i=xr;i===0&&(i=ci,ci<<=1,(ci&261888)===0&&(ci=256)),Bs=i}return Bs}function g0(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:ar(""+i)}function y0(i,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,i.id&&a.setAttribute("form",i.id),o.parentNode.insertBefore(a,o),i=new FormData(i),a.parentNode.removeChild(a),i}function kA(i,o,a,c,y){if(o==="submit"&&a&&a.stateNode===y){var v=g0((y[qt]||null).action),A=c.submitter;A&&(o=(o=A[qt]||null)?g0(o.formAction):A.getAttribute("formAction"),o!==null&&(v=o,A=null));var C=new Si("action","action",null,c,y);i.push({event:C,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Bs!==0){var L=A?y0(y,A):new FormData(y);Nf(a,{pending:!0,data:L,method:y.method,action:v},null,L)}}else typeof v=="function"&&(C.preventDefault(),L=A?y0(y,A):new FormData(y),Nf(a,{pending:!0,data:L,method:y.method,action:v},v,L))},currentTarget:y}]})}}for(var ch=0;ch<jd.length;ch++){var dh=jd[ch],UA=dh.toLowerCase(),LA=dh[0].toUpperCase()+dh.slice(1);ni(UA,"on"+LA)}ni(Km,"onAnimationEnd"),ni($m,"onAnimationIteration"),ni(Qm,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(ZS,"onTransitionRun"),ni(eA,"onTransitionStart"),ni(tA,"onTransitionCancel"),ni(Xm,"onTransitionEnd"),_i("onMouseEnter",["mouseout","mouseover"]),_i("onMouseLeave",["mouseout","mouseover"]),_i("onPointerEnter",["pointerout","pointerover"]),_i("onPointerLeave",["pointerout","pointerover"]),vi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vi("onBeforeInput",["compositionend","keypress","textInput","paste"]),vi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ul));function v0(i,o){o=(o&4)!==0;for(var a=0;a<i.length;a++){var c=i[a],y=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var A=c.length-1;0<=A;A--){var C=c[A],L=C.instance,K=C.currentTarget;if(C=C.listener,L!==v&&y.isPropagationStopped())break e;v=C,y.currentTarget=K;try{v(y)}catch(Z){Eu(Z)}y.currentTarget=null,v=L}else for(A=0;A<c.length;A++){if(C=c[A],L=C.instance,K=C.currentTarget,C=C.listener,L!==v&&y.isPropagationStopped())break e;v=C,y.currentTarget=K;try{v(y)}catch(Z){Eu(Z)}y.currentTarget=null,v=L}}}}function qe(i,o){var a=o[nr];a===void 0&&(a=o[nr]=new Set);var c=i+"__bubble";a.has(c)||(_0(o,i,2,!1),a.add(c))}function fh(i,o,a){var c=0;o&&(c|=4),_0(a,i,c,o)}var rc="_reactListening"+Math.random().toString(36).slice(2);function hh(i){if(!i[rc]){i[rc]=!0,Ta.forEach(function(a){a!=="selectionchange"&&(OA.has(a)||fh(a,!1,i),fh(a,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[rc]||(o[rc]=!0,fh("selectionchange",!1,o))}}function _0(i,o,a,c){switch(K0(o)){case 2:var y=fb;break;case 8:y=hb;break;default:y=Ih}a=y.bind(null,o,a,i),y=void 0,!Eo||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(y=!0),c?y!==void 0?i.addEventListener(o,a,{capture:!0,passive:y}):i.addEventListener(o,a,!0):y!==void 0?i.addEventListener(o,a,{passive:y}):i.addEventListener(o,a,!1)}function ph(i,o,a,c,y){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var A=c.tag;if(A===3||A===4){var C=c.stateNode.containerInfo;if(C===y)break;if(A===4)for(A=c.return;A!==null;){var L=A.tag;if((L===3||L===4)&&A.stateNode.containerInfo===y)return;A=A.return}for(;C!==null;){if(A=gi(C),A===null)return;if(L=A.tag,L===5||L===6||L===26||L===27){c=v=A;continue e}C=C.parentNode}}c=c.return}Ts(function(){var K=v,Z=Mn(a),se=[];e:{var $=Wm.get(i);if($!==void 0){var W=Si,Te=i;switch(i){case"keypress":if(xo(a)===0)break e;case"keydown":case"keyup":W=yu;break;case"focusin":Te="focus",W=Ao;break;case"focusout":Te="blur",W=Ao;break;case"beforeblur":case"afterblur":W=Ao;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=Va;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=lu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=S;break;case Km:case $m:case Qm:W=cu;break;case Xm:W=I;break;case"scroll":case"scrollend":W=Pa;break;case"wheel":W=X;break;case"copy":case"cut":case"paste":W=du;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=Hi;break;case"toggle":case"beforetoggle":W=ke}var we=(o&4)!==0,rt=!we&&(i==="scroll"||i==="scrollend"),z=we?$!==null?$+"Capture":null:$;we=[];for(var G=K,J;G!==null;){var ne=G;if(J=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||J===null||z===null||(ne=Wn(G,z),ne!=null&&we.push(cl(G,ne,J))),rt)break;G=G.return}0<we.length&&($=new W($,Te,null,a,Z),se.push({event:$,listeners:we}))}}if((o&7)===0){e:{if($=i==="mouseover"||i==="pointerover",W=i==="mouseout"||i==="pointerout",$&&a!==Ra&&(Te=a.relatedTarget||a.fromElement)&&(gi(Te)||Te[pi]))break e;if((W||$)&&($=Z.window===Z?Z:($=Z.ownerDocument)?$.defaultView||$.parentWindow:window,W?(Te=a.relatedTarget||a.toElement,W=K,Te=Te?gi(Te):null,Te!==null&&(rt=l(Te),we=Te.tag,Te!==rt||we!==5&&we!==27&&we!==6)&&(Te=null)):(W=null,Te=K),W!==Te)){if(we=Va,ne="onMouseLeave",z="onMouseEnter",G="mouse",(i==="pointerout"||i==="pointerover")&&(we=Hi,ne="onPointerLeave",z="onPointerEnter",G="pointer"),rt=W==null?$:_n(W),J=Te==null?$:_n(Te),$=new we(ne,G+"leave",W,a,Z),$.target=rt,$.relatedTarget=J,ne=null,gi(Z)===K&&(we=new we(z,G+"enter",Te,a,Z),we.target=J,we.relatedTarget=rt,ne=we),rt=ne,W&&Te)t:{for(we=qA,z=W,G=Te,J=0,ne=z;ne;ne=we(ne))J++;ne=0;for(var Ae=G;Ae;Ae=we(Ae))ne++;for(;0<J-ne;)z=we(z),J--;for(;0<ne-J;)G=we(G),ne--;for(;J--;){if(z===G||G!==null&&z===G.alternate){we=z;break t}z=we(z),G=we(G)}we=null}else we=null;W!==null&&E0(se,$,W,we,!1),Te!==null&&rt!==null&&E0(se,rt,Te,we,!0)}}e:{if($=K?_n(K):window,W=$.nodeName&&$.nodeName.toLowerCase(),W==="select"||W==="input"&&$.type==="file")var Je=Lm;else if(km($))if(Om)Je=QS;else{Je=KS;var xe=JS}else W=$.nodeName,!W||W.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?K&&rr(K.elementType)&&(Je=Lm):Je=$S;if(Je&&(Je=Je(i,K))){Um(se,Je,a,Z);break e}xe&&xe(i,$,K),i==="focusout"&&K&&$.type==="number"&&K.memoizedProps.value!=null&&Ca($,"number",$.value)}switch(xe=K?_n(K):window,i){case"focusin":(km(xe)||xe.contentEditable==="true")&&(pr=xe,Fd=K,qa=null);break;case"focusout":qa=Fd=pr=null;break;case"mousedown":Hd=!0;break;case"contextmenu":case"mouseup":case"dragend":Hd=!1,Ym(se,a,Z);break;case"selectionchange":if(WS)break;case"keydown":case"keyup":Ym(se,a,Z)}var Le;if(Qe)e:{switch(i){case"compositionstart":var Ge="onCompositionStart";break e;case"compositionend":Ge="onCompositionEnd";break e;case"compositionupdate":Ge="onCompositionUpdate";break e}Ge=void 0}else hr?bo(i,a)&&(Ge="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Ge="onCompositionStart");Ge&&(wi&&a.locale!=="ko"&&(hr||Ge!=="onCompositionStart"?Ge==="onCompositionEnd"&&hr&&(Le=Da()):(xi=Z,Ma="value"in xi?xi.value:xi.textContent,hr=!0)),xe=ac(K,Ge),0<xe.length&&(Ge=new bi(Ge,i,null,a,Z),se.push({event:Ge,listeners:xe}),Le?Ge.data=Le:(Le=fr(a),Le!==null&&(Ge.data=Le)))),(Le=Pn?HS(i,a):zS(i,a))&&(Ge=ac(K,"onBeforeInput"),0<Ge.length&&(xe=new bi("onBeforeInput","beforeinput",null,a,Z),se.push({event:xe,listeners:Ge}),xe.data=Le)),kA(se,i,K,a,Z)}v0(se,o)})}function cl(i,o,a){return{instance:i,listener:o,currentTarget:a}}function ac(i,o){for(var a=o+"Capture",c=[];i!==null;){var y=i,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=Wn(i,a),y!=null&&c.unshift(cl(i,y,v)),y=Wn(i,o),y!=null&&c.push(cl(i,y,v))),i.tag===3)return c;i=i.return}return[]}function qA(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function E0(i,o,a,c,y){for(var v=o._reactName,A=[];a!==null&&a!==c;){var C=a,L=C.alternate,K=C.stateNode;if(C=C.tag,L!==null&&L===c)break;C!==5&&C!==26&&C!==27||K===null||(L=K,y?(K=Wn(a,v),K!=null&&A.unshift(cl(a,K,L))):y||(K=Wn(a,v),K!=null&&A.push(cl(a,K,L)))),a=a.return}A.length!==0&&i.push({event:o,listeners:A})}var BA=/\r\n?/g,GA=/\u0000|\uFFFD/g;function T0(i){return(typeof i=="string"?i:""+i).replace(BA,`
`).replace(GA,"")}function x0(i,o){return o=T0(o),T0(i)===o}function ot(i,o,a,c,y,v){switch(a){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||dn(i,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&dn(i,""+c);break;case"className":En(i,"class",c);break;case"tabIndex":En(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":En(i,a,c);break;case"style":Na(i,c,v);break;case"data":if(o!=="object"){En(i,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||a!=="href")){i.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=ar(""+c),i.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(a==="formAction"?(o!=="input"&&ot(i,o,"name",y.name,y,null),ot(i,o,"formEncType",y.formEncType,y,null),ot(i,o,"formMethod",y.formMethod,y,null),ot(i,o,"formTarget",y.formTarget,y,null)):(ot(i,o,"encType",y.encType,y,null),ot(i,o,"method",y.method,y,null),ot(i,o,"target",y.target,y,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(a);break}c=ar(""+c),i.setAttribute(a,c);break;case"onClick":c!=null&&(i.onclick=Xn);break;case"onScroll":c!=null&&qe("scroll",i);break;case"onScrollEnd":c!=null&&qe("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}a=ar(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""+c):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":c===!0?i.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(a,c):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(a,c):i.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(a):i.setAttribute(a,c);break;case"popover":qe("beforetoggle",i),qe("toggle",i),sr(i,"popover",c);break;case"xlinkActuate":It(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":It(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":It(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":It(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":It(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":It(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":It(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":It(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":It(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":sr(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=au.get(a)||a,sr(i,a,c))}}function mh(i,o,a,c,y,v){switch(a){case"style":Na(i,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(y.children!=null)throw Error(s(60));i.innerHTML=a}}break;case"children":typeof c=="string"?dn(i,c):(typeof c=="number"||typeof c=="bigint")&&dn(i,""+c);break;case"onScroll":c!=null&&qe("scroll",i);break;case"onScrollEnd":c!=null&&qe("scrollend",i);break;case"onClick":c!=null&&(i.onclick=Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!xa.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(y=a.endsWith("Capture"),o=a.slice(2,y?a.length-7:void 0),v=i[qt]||null,v=v!=null?v[a]:null,typeof v=="function"&&i.removeEventListener(o,v,y),typeof c=="function")){typeof v!="function"&&v!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(o,c,y);break e}a in i?i[a]=c:c===!0?i.setAttribute(a,""):sr(i,a,c)}}}function $t(i,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qe("error",i),qe("load",i);var c=!1,y=!1,v;for(v in a)if(a.hasOwnProperty(v)){var A=a[v];if(A!=null)switch(v){case"src":c=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:ot(i,o,v,A,a,null)}}y&&ot(i,o,"srcSet",a.srcSet,a,null),c&&ot(i,o,"src",a.src,a,null);return;case"input":qe("invalid",i);var C=v=A=y=null,L=null,K=null;for(c in a)if(a.hasOwnProperty(c)){var Z=a[c];if(Z!=null)switch(c){case"name":y=Z;break;case"type":A=Z;break;case"checked":L=Z;break;case"defaultChecked":K=Z;break;case"value":v=Z;break;case"defaultValue":C=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(s(137,o));break;default:ot(i,o,c,Z,a,null)}}su(i,v,C,L,K,A,y,!1);return;case"select":qe("invalid",i),c=A=v=null;for(y in a)if(a.hasOwnProperty(y)&&(C=a[y],C!=null))switch(y){case"value":v=C;break;case"defaultValue":A=C;break;case"multiple":c=C;default:ot(i,o,y,C,a,null)}o=v,a=A,i.multiple=!!c,o!=null?ys(i,!!c,o,!1):a!=null&&ys(i,!!c,a,!0);return;case"textarea":qe("invalid",i),v=y=c=null;for(A in a)if(a.hasOwnProperty(A)&&(C=a[A],C!=null))switch(A){case"value":c=C;break;case"defaultValue":y=C;break;case"children":v=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(s(91));break;default:ot(i,o,A,C,a,null)}vs(i,c,y,v);return;case"option":for(L in a)if(a.hasOwnProperty(L)&&(c=a[L],c!=null))switch(L){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(i,o,L,c,a,null)}return;case"dialog":qe("beforetoggle",i),qe("toggle",i),qe("cancel",i),qe("close",i);break;case"iframe":case"object":qe("load",i);break;case"video":case"audio":for(c=0;c<ul.length;c++)qe(ul[c],i);break;case"image":qe("error",i),qe("load",i);break;case"details":qe("toggle",i);break;case"embed":case"source":case"link":qe("error",i),qe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in a)if(a.hasOwnProperty(K)&&(c=a[K],c!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,o));default:ot(i,o,K,c,a,null)}return;default:if(rr(o)){for(Z in a)a.hasOwnProperty(Z)&&(c=a[Z],c!==void 0&&mh(i,o,Z,c,a,void 0));return}}for(C in a)a.hasOwnProperty(C)&&(c=a[C],c!=null&&ot(i,o,C,c,a,null))}function FA(i,o,a,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,A=null,C=null,L=null,K=null,Z=null;for(W in a){var se=a[W];if(a.hasOwnProperty(W)&&se!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":L=se;default:c.hasOwnProperty(W)||ot(i,o,W,null,c,se)}}for(var $ in c){var W=c[$];if(se=a[$],c.hasOwnProperty($)&&(W!=null||se!=null))switch($){case"type":v=W;break;case"name":y=W;break;case"checked":K=W;break;case"defaultChecked":Z=W;break;case"value":A=W;break;case"defaultValue":C=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,o));break;default:W!==se&&ot(i,o,$,W,c,se)}}or(i,A,C,L,K,Z,v,y);return;case"select":W=A=C=$=null;for(v in a)if(L=a[v],a.hasOwnProperty(v)&&L!=null)switch(v){case"value":break;case"multiple":W=L;default:c.hasOwnProperty(v)||ot(i,o,v,null,c,L)}for(y in c)if(v=c[y],L=a[y],c.hasOwnProperty(y)&&(v!=null||L!=null))switch(y){case"value":$=v;break;case"defaultValue":C=v;break;case"multiple":A=v;default:v!==L&&ot(i,o,y,v,c,L)}o=C,a=A,c=W,$!=null?ys(i,!!a,$,!1):!!c!=!!a&&(o!=null?ys(i,!!a,o,!0):ys(i,!!a,a?[]:"",!1));return;case"textarea":W=$=null;for(C in a)if(y=a[C],a.hasOwnProperty(C)&&y!=null&&!c.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:ot(i,o,C,null,c,y)}for(A in c)if(y=c[A],v=a[A],c.hasOwnProperty(A)&&(y!=null||v!=null))switch(A){case"value":$=y;break;case"defaultValue":W=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==v&&ot(i,o,A,y,c,v)}ou(i,$,W);return;case"option":for(var Te in a)if($=a[Te],a.hasOwnProperty(Te)&&$!=null&&!c.hasOwnProperty(Te))switch(Te){case"selected":i.selected=!1;break;default:ot(i,o,Te,null,c,$)}for(L in c)if($=c[L],W=a[L],c.hasOwnProperty(L)&&$!==W&&($!=null||W!=null))switch(L){case"selected":i.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:ot(i,o,L,$,c,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in a)$=a[we],a.hasOwnProperty(we)&&$!=null&&!c.hasOwnProperty(we)&&ot(i,o,we,null,c,$);for(K in c)if($=c[K],W=a[K],c.hasOwnProperty(K)&&$!==W&&($!=null||W!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,o));break;default:ot(i,o,K,$,c,W)}return;default:if(rr(o)){for(var rt in a)$=a[rt],a.hasOwnProperty(rt)&&$!==void 0&&!c.hasOwnProperty(rt)&&mh(i,o,rt,void 0,c,$);for(Z in c)$=c[Z],W=a[Z],!c.hasOwnProperty(Z)||$===W||$===void 0&&W===void 0||mh(i,o,Z,$,c,W);return}}for(var z in a)$=a[z],a.hasOwnProperty(z)&&$!=null&&!c.hasOwnProperty(z)&&ot(i,o,z,null,c,$);for(se in c)$=c[se],W=a[se],!c.hasOwnProperty(se)||$===W||$==null&&W==null||ot(i,o,se,$,c,W)}function S0(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function HA(){if(typeof performance.getEntriesByType=="function"){for(var i=0,o=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var y=a[c],v=y.transferSize,A=y.initiatorType,C=y.duration;if(v&&C&&S0(A)){for(A=0,C=y.responseEnd,c+=1;c<a.length;c++){var L=a[c],K=L.startTime;if(K>C)break;var Z=L.transferSize,se=L.initiatorType;Z&&S0(se)&&(L=L.responseEnd,A+=Z*(L<C?1:(C-K)/(L-K)))}if(--c,o+=8*(v+A)/(y.duration/1e3),i++,10<i)break}}if(0<i)return o/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var gh=null,yh=null;function lc(i){return i.nodeType===9?i:i.ownerDocument}function A0(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b0(i,o){if(i===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&o==="foreignObject"?0:i}function vh(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var _h=null;function zA(){var i=window.event;return i&&i.type==="popstate"?i===_h?!1:(_h=i,!0):(_h=null,!1)}var w0=typeof setTimeout=="function"?setTimeout:void 0,jA=typeof clearTimeout=="function"?clearTimeout:void 0,C0=typeof Promise=="function"?Promise:void 0,YA=typeof queueMicrotask=="function"?queueMicrotask:typeof C0<"u"?function(i){return C0.resolve(null).then(i).catch(JA)}:w0;function JA(i){setTimeout(function(){throw i})}function Gs(i){return i==="head"}function I0(i,o){var a=o,c=0;do{var y=a.nextSibling;if(i.removeChild(a),y&&y.nodeType===8)if(a=y.data,a==="/$"||a==="/&"){if(c===0){i.removeChild(y),Gr(o);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")dl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,dl(a);for(var v=a.firstChild;v;){var A=v.nextSibling,C=v.nodeName;v[mi]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&v.rel.toLowerCase()==="stylesheet"||a.removeChild(v),v=A}}else a==="body"&&dl(i.ownerDocument.body);a=y}while(a);Gr(o)}function N0(i,o){var a=i;i=0;do{var c=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=c}while(a)}function Eh(i){var o=i.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Eh(a),ir(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function KA(i,o,a,c){for(;i.nodeType===1;){var y=a;if(i.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[mi])switch(o){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(v=i.getAttribute("rel"),v==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(v!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(v=i.getAttribute("src"),(v!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(o==="input"&&i.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===v)return i}else return i;if(i=Bn(i.nextSibling),i===null)break}return null}function $A(i,o,a){if(o==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Bn(i.nextSibling),i===null))return null;return i}function R0(i,o){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Bn(i.nextSibling),i===null))return null;return i}function Th(i){return i.data==="$?"||i.data==="$~"}function xh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function QA(i,o){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=o;else if(i.data!=="$?"||a.readyState!=="loading")o();else{var c=function(){o(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),i._reactRetry=c}}function Bn(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return i}var Sh=null;function M0(i){i=i.nextSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(o===0)return Bn(i.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}i=i.nextSibling}return null}function D0(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return i;o--}else a!=="/$"&&a!=="/&"||o++}i=i.previousSibling}return null}function P0(i,o,a){switch(o=lc(a),i){case"html":if(i=o.documentElement,!i)throw Error(s(452));return i;case"head":if(i=o.head,!i)throw Error(s(453));return i;case"body":if(i=o.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function dl(i){for(var o=i.attributes;o.length;)i.removeAttributeNode(o[0]);ir(i)}var Gn=new Map,V0=new Set;function uc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ss=ae.d;ae.d={f:XA,r:WA,D:ZA,C:eb,L:tb,m:nb,X:sb,S:ib,M:ob};function XA(){var i=ss.f(),o=ec();return i||o}function WA(i){var o=Rn(i);o!==null&&o.tag===5&&o.type==="form"?Xg(o):ss.r(i)}var Or=typeof document>"u"?null:document;function k0(i,o,a){var c=Or;if(c&&typeof o=="string"&&o){var y=cn(o);y='link[rel="'+i+'"][href="'+y+'"]',typeof a=="string"&&(y+='[crossorigin="'+a+'"]'),V0.has(y)||(V0.add(y),i={rel:i,crossOrigin:a,href:o},c.querySelector(y)===null&&(o=c.createElement("link"),$t(o,"link",i),Ct(o),c.head.appendChild(o)))}}function ZA(i){ss.D(i),k0("dns-prefetch",i,null)}function eb(i,o){ss.C(i,o),k0("preconnect",i,o)}function tb(i,o,a){ss.L(i,o,a);var c=Or;if(c&&i&&o){var y='link[rel="preload"][as="'+cn(o)+'"]';o==="image"&&a&&a.imageSrcSet?(y+='[imagesrcset="'+cn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(y+='[imagesizes="'+cn(a.imageSizes)+'"]')):y+='[href="'+cn(i)+'"]';var v=y;switch(o){case"style":v=qr(i);break;case"script":v=Br(i)}Gn.has(v)||(i=T({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:i,as:o},a),Gn.set(v,i),c.querySelector(y)!==null||o==="style"&&c.querySelector(fl(v))||o==="script"&&c.querySelector(hl(v))||(o=c.createElement("link"),$t(o,"link",i),Ct(o),c.head.appendChild(o)))}}function nb(i,o){ss.m(i,o);var a=Or;if(a&&i){var c=o&&typeof o.as=="string"?o.as:"script",y='link[rel="modulepreload"][as="'+cn(c)+'"][href="'+cn(i)+'"]',v=y;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=Br(i)}if(!Gn.has(v)&&(i=T({rel:"modulepreload",href:i},o),Gn.set(v,i),a.querySelector(y)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(hl(v)))return}c=a.createElement("link"),$t(c,"link",i),Ct(c),a.head.appendChild(c)}}}function ib(i,o,a){ss.S(i,o,a);var c=Or;if(c&&i){var y=yi(c).hoistableStyles,v=qr(i);o=o||"default";var A=y.get(v);if(!A){var C={loading:0,preload:null};if(A=c.querySelector(fl(v)))C.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":o},a),(a=Gn.get(v))&&Ah(i,a);var L=A=c.createElement("link");Ct(L),$t(L,"link",i),L._p=new Promise(function(K,Z){L.onload=K,L.onerror=Z}),L.addEventListener("load",function(){C.loading|=1}),L.addEventListener("error",function(){C.loading|=2}),C.loading|=4,cc(A,o,c)}A={type:"stylesheet",instance:A,count:1,state:C},y.set(v,A)}}}function sb(i,o){ss.X(i,o);var a=Or;if(a&&i){var c=yi(a).hoistableScripts,y=Br(i),v=c.get(y);v||(v=a.querySelector(hl(y)),v||(i=T({src:i,async:!0},o),(o=Gn.get(y))&&bh(i,o),v=a.createElement("script"),Ct(v),$t(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function ob(i,o){ss.M(i,o);var a=Or;if(a&&i){var c=yi(a).hoistableScripts,y=Br(i),v=c.get(y);v||(v=a.querySelector(hl(y)),v||(i=T({src:i,async:!0,type:"module"},o),(o=Gn.get(y))&&bh(i,o),v=a.createElement("script"),Ct(v),$t(v,"link",i),a.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(y,v))}}function U0(i,o,a,c){var y=(y=Re.current)?uc(y):null;if(!y)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=qr(a.href),a=yi(y).hoistableStyles,c=a.get(o),c||(c={type:"style",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=qr(a.href);var v=yi(y).hoistableStyles,A=v.get(i);if(A||(y=y.ownerDocument||y,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(i,A),(v=y.querySelector(fl(i)))&&!v._p&&(A.instance=v,A.state.loading=5),Gn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Gn.set(i,a),v||rb(y,i,a,A.state))),o&&c===null)throw Error(s(528,""));return A}if(o&&c!==null)throw Error(s(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=Br(a),a=yi(y).hoistableScripts,c=a.get(o),c||(c={type:"script",instance:null,count:0,state:null},a.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function qr(i){return'href="'+cn(i)+'"'}function fl(i){return'link[rel="stylesheet"]['+i+"]"}function L0(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function rb(i,o,a,c){i.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=i.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),$t(o,"link",a),Ct(o),i.head.appendChild(o))}function Br(i){return'[src="'+cn(i)+'"]'}function hl(i){return"script[async]"+i}function O0(i,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var c=i.querySelector('style[data-href~="'+cn(a.href)+'"]');if(c)return o.instance=c,Ct(c),c;var y=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),Ct(c),$t(c,"style",y),cc(c,a.precedence,i),o.instance=c;case"stylesheet":y=qr(a.href);var v=i.querySelector(fl(y));if(v)return o.state.loading|=4,o.instance=v,Ct(v),v;c=L0(a),(y=Gn.get(y))&&Ah(c,y),v=(i.ownerDocument||i).createElement("link"),Ct(v);var A=v;return A._p=new Promise(function(C,L){A.onload=C,A.onerror=L}),$t(v,"link",c),o.state.loading|=4,cc(v,a.precedence,i),o.instance=v;case"script":return v=Br(a.src),(y=i.querySelector(hl(v)))?(o.instance=y,Ct(y),y):(c=a,(y=Gn.get(v))&&(c=T({},a),bh(c,y)),i=i.ownerDocument||i,y=i.createElement("script"),Ct(y),$t(y,"link",c),i.head.appendChild(y),o.instance=y);case"void":return null;default:throw Error(s(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,cc(c,a.precedence,i));return o.instance}function cc(i,o,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=c.length?c[c.length-1]:null,v=y,A=0;A<c.length;A++){var C=c[A];if(C.dataset.precedence===o)v=C;else if(v!==y)break}v?v.parentNode.insertBefore(i,v.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(i,o.firstChild))}function Ah(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.title==null&&(i.title=o.title)}function bh(i,o){i.crossOrigin==null&&(i.crossOrigin=o.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=o.referrerPolicy),i.integrity==null&&(i.integrity=o.integrity)}var dc=null;function q0(i,o,a){if(dc===null){var c=new Map,y=dc=new Map;y.set(a,c)}else y=dc,c=y.get(a),c||(c=new Map,y.set(a,c));if(c.has(i))return c;for(c.set(i,null),a=a.getElementsByTagName(i),y=0;y<a.length;y++){var v=a[y];if(!(v[mi]||v[wt]||i==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var A=v.getAttribute(o)||"";A=i+A;var C=c.get(A);C?C.push(v):c.set(A,[v])}}return c}function B0(i,o,a){i=i.ownerDocument||i,i.head.insertBefore(a,o==="title"?i.querySelector("head > title"):null)}function ab(i,o,a){if(a===1||o.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return i=o.disabled,typeof o.precedence=="string"&&i==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function G0(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function lb(i,o,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var y=qr(c.href),v=o.querySelector(fl(y));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(i.count++,i=fc.bind(i),o.then(i,i)),a.state.loading|=4,a.instance=v,Ct(v);return}v=o.ownerDocument||o,c=L0(c),(y=Gn.get(y))&&Ah(c,y),v=v.createElement("link"),Ct(v);var A=v;A._p=new Promise(function(C,L){A.onload=C,A.onerror=L}),$t(v,"link",c),a.instance=v}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=fc.bind(i),o.addEventListener("load",a),o.addEventListener("error",a))}}var wh=0;function ub(i,o){return i.stylesheets&&i.count===0&&pc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var c=setTimeout(function(){if(i.stylesheets&&pc(i,i.stylesheets),i.unsuspend){var v=i.unsuspend;i.unsuspend=null,v()}},6e4+o);0<i.imgBytes&&wh===0&&(wh=62500*HA());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&pc(i,i.stylesheets),i.unsuspend)){var v=i.unsuspend;i.unsuspend=null,v()}},(i.imgBytes>wh?50:800)+o);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(c),clearTimeout(y)}}:null}function fc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var hc=null;function pc(i,o){i.stylesheets=null,i.unsuspend!==null&&(i.count++,hc=new Map,o.forEach(cb,i),hc=null,fc.call(i))}function cb(i,o){if(!(o.state.loading&4)){var a=hc.get(i);if(a)var c=a.get(null);else{a=new Map,hc.set(i,a);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var A=y[v];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),c=A)}c&&a.set(null,c)}y=o.instance,A=y.getAttribute("data-precedence"),v=a.get(A)||c,v===c&&a.set(null,y),a.set(A,y),this.count++,c=fc.bind(this),y.addEventListener("load",c),y.addEventListener("error",c),v?v.parentNode.insertBefore(y,v.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),o.state.loading|=4}}var pl={$$typeof:j,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function db(i,o,a,c,y,v,A,C,L){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.hiddenUpdates=hi(null),this.identifierPrefix=c,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function F0(i,o,a,c,y,v,A,C,L,K,Z,se){return i=new db(i,o,a,A,L,K,Z,se,C),o=1,v===!0&&(o|=24),v=xn(3,null,null,o),i.current=v,v.stateNode=i,o=of(),o.refCount++,i.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:a,cache:o},uf(v),i}function H0(i){return i?(i=yr,i):yr}function z0(i,o,a,c,y,v){y=H0(y),c.context===null?c.context=y:c.pendingContext=y,c=Rs(o),c.payload={element:a},v=v===void 0?null:v,v!==null&&(c.callback=v),a=Ms(i,c,o),a!==null&&(gn(a,i,o),Ya(a,i,o))}function j0(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<o?a:o}}function Ch(i,o){j0(i,o),(i=i.alternate)&&j0(i,o)}function Y0(i){if(i.tag===13||i.tag===31){var o=Io(i,67108864);o!==null&&gn(o,i,67108864),Ch(i,67108864)}}function J0(i){if(i.tag===13||i.tag===31){var o=Cn();o=go(o);var a=Io(i,o);a!==null&&gn(a,i,o),Ch(i,o)}}var mc=!0;function fb(i,o,a,c){var y=F.T;F.T=null;var v=ae.p;try{ae.p=2,Ih(i,o,a,c)}finally{ae.p=v,F.T=y}}function hb(i,o,a,c){var y=F.T;F.T=null;var v=ae.p;try{ae.p=8,Ih(i,o,a,c)}finally{ae.p=v,F.T=y}}function Ih(i,o,a,c){if(mc){var y=Nh(c);if(y===null)ph(i,o,c,gc,a),$0(i,c);else if(mb(y,i,o,a,c))c.stopPropagation();else if($0(i,c),o&4&&-1<pb.indexOf(i)){for(;y!==null;){var v=Rn(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var A=di(v.pendingLanes);if(A!==0){var C=v;for(C.pendingLanes|=2,C.entangledLanes|=2;A;){var L=1<<31-_t(A);C.entanglements[1]|=L,A&=~L}Ri(v),(Xe&6)===0&&(Wu=on()+500,ll(0))}}break;case 31:case 13:C=Io(v,2),C!==null&&gn(C,v,2),ec(),Ch(v,2)}if(v=Nh(c),v===null&&ph(i,o,c,gc,a),v===y)break;y=v}y!==null&&c.stopPropagation()}else ph(i,o,c,null,a)}}function Nh(i){return i=Mn(i),Rh(i)}var gc=null;function Rh(i){if(gc=null,i=gi(i),i!==null){var o=l(i);if(o===null)i=null;else{var a=o.tag;if(a===13){if(i=u(o),i!==null)return i;i=null}else if(a===31){if(i=f(o),i!==null)return i;i=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return gc=i,null}function K0(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fo()){case ya:return 2;case va:return 8;case ms:case kd:return 32;case Kl:return 268435456;default:return 32}default:return 32}}var Mh=!1,Fs=null,Hs=null,zs=null,ml=new Map,gl=new Map,js=[],pb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function $0(i,o){switch(i){case"focusin":case"focusout":Fs=null;break;case"dragenter":case"dragleave":Hs=null;break;case"mouseover":case"mouseout":zs=null;break;case"pointerover":case"pointerout":ml.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(o.pointerId)}}function yl(i,o,a,c,y,v){return i===null||i.nativeEvent!==v?(i={blockedOn:o,domEventName:a,eventSystemFlags:c,nativeEvent:v,targetContainers:[y]},o!==null&&(o=Rn(o),o!==null&&Y0(o)),i):(i.eventSystemFlags|=c,o=i.targetContainers,y!==null&&o.indexOf(y)===-1&&o.push(y),i)}function mb(i,o,a,c,y){switch(o){case"focusin":return Fs=yl(Fs,i,o,a,c,y),!0;case"dragenter":return Hs=yl(Hs,i,o,a,c,y),!0;case"mouseover":return zs=yl(zs,i,o,a,c,y),!0;case"pointerover":var v=y.pointerId;return ml.set(v,yl(ml.get(v)||null,i,o,a,c,y)),!0;case"gotpointercapture":return v=y.pointerId,gl.set(v,yl(gl.get(v)||null,i,o,a,c,y)),!0}return!1}function Q0(i){var o=gi(i.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=u(a),o!==null){i.blockedOn=o,$n(i.priority,function(){J0(a)});return}}else if(o===31){if(o=f(a),o!==null){i.blockedOn=o,$n(i.priority,function(){J0(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function yc(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var a=Nh(i.nativeEvent);if(a===null){a=i.nativeEvent;var c=new a.constructor(a.type,a);Ra=c,a.target.dispatchEvent(c),Ra=null}else return o=Rn(a),o!==null&&Y0(o),i.blockedOn=a,!1;o.shift()}return!0}function X0(i,o,a){yc(i)&&a.delete(o)}function gb(){Mh=!1,Fs!==null&&yc(Fs)&&(Fs=null),Hs!==null&&yc(Hs)&&(Hs=null),zs!==null&&yc(zs)&&(zs=null),ml.forEach(X0),gl.forEach(X0)}function vc(i,o){i.blockedOn===o&&(i.blockedOn=null,Mh||(Mh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,gb)))}var _c=null;function W0(i){_c!==i&&(_c=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){_c===i&&(_c=null);for(var o=0;o<i.length;o+=3){var a=i[o],c=i[o+1],y=i[o+2];if(typeof c!="function"){if(Rh(c||a)===null)continue;break}var v=Rn(a);v!==null&&(i.splice(o,3),o-=3,Nf(v,{pending:!0,data:y,method:a.method,action:c},c,y))}}))}function Gr(i){function o(L){return vc(L,i)}Fs!==null&&vc(Fs,i),Hs!==null&&vc(Hs,i),zs!==null&&vc(zs,i),ml.forEach(o),gl.forEach(o);for(var a=0;a<js.length;a++){var c=js[a];c.blockedOn===i&&(c.blockedOn=null)}for(;0<js.length&&(a=js[0],a.blockedOn===null);)Q0(a),a.blockedOn===null&&js.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var y=a[c],v=a[c+1],A=y[qt]||null;if(typeof v=="function")A||W0(a);else if(A){var C=null;if(v&&v.hasAttribute("formAction")){if(y=v,A=v[qt]||null)C=A.formAction;else if(Rh(y)!==null)continue}else C=A.action;typeof C=="function"?a[c+1]=C:(a.splice(c,3),c-=3),W0(a)}}}function Z0(){function i(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(A){return y=A})},focusReset:"manual",scroll:"manual"})}function o(){y!==null&&(y(),y=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),y!==null&&(y(),y=null)}}}function Dh(i){this._internalRoot=i}Ec.prototype.render=Dh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(s(409));var a=o.current,c=Cn();z0(a,c,i,o,null,null)},Ec.prototype.unmount=Dh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;z0(i.current,2,null,i,null,null),ec(),o[pi]=null}};function Ec(i){this._internalRoot=i}Ec.prototype.unstable_scheduleHydration=function(i){if(i){var o=eu();i={blockedOn:null,target:i,priority:o};for(var a=0;a<js.length&&o!==0&&o<js[a].priority;a++);js.splice(a,0,i),a===0&&Q0(i)}};var ev=e.version;if(ev!=="19.2.3")throw Error(s(527,ev,"19.2.3"));ae.findDOMNode=function(i){var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=h(o),i=i!==null?_(i):null,i=i===null?null:i.stateNode,i};var yb={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Tc.isDisabled&&Tc.supportsFiber)try{Jn=Tc.inject(yb),zt=Tc}catch{}}return _l.createRoot=function(i,o){if(!r(i))throw Error(s(299));var a=!1,c="",y=ay,v=ly,A=uy;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(y=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(A=o.onRecoverableError)),o=F0(i,1,!1,null,null,a,c,null,y,v,A,Z0),i[pi]=o.current,hh(i),new Dh(o)},_l.hydrateRoot=function(i,o,a){if(!r(i))throw Error(s(299));var c=!1,y="",v=ay,A=ly,C=uy,L=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),o=F0(i,1,!0,o,a??null,c,y,L,v,A,C,Z0),o.context=H0(null),a=o.current,c=Cn(),c=go(c),y=Rs(c),y.callback=null,Ms(a,y,c),a=c,o.current.lanes=a,po(o,a),Ri(o),i[pi]=o.current,hh(i),new Ec(o)},_l.version="19.2.3",_l}var cv;function Ib(){if(cv)return kh.exports;cv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),kh.exports=Cb(),kh.exports}var Nb=Ib();const Rb=aT(Nb);/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb=()=>{};var dv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lT=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let r=n.charCodeAt(s);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Db=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const r=n[t++];if(r<128)e[s++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[s++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],u=n[t++],f=n[t++],g=((r&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=n[t++],u=n[t++];e[s++]=String.fromCharCode((r&15)<<12|(l&63)<<6|u&63)}}return e.join("")},uT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let r=0;r<n.length;r+=3){const l=n[r],u=r+1<n.length,f=u?n[r+1]:0,g=r+2<n.length,h=g?n[r+2]:0,_=l>>2,T=(l&3)<<4|f>>4;let x=(f&15)<<2|h>>6,w=h&63;g||(w=64,u||(x=64)),s.push(t[_],t[T],t[x],t[w])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(lT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Db(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],f=r<n.length?t[n.charAt(r)]:0;++r;const h=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||f==null||h==null||T==null)throw new Pb;const x=l<<2|f>>4;if(s.push(x),h!==64){const w=f<<4&240|h>>2;if(s.push(w),T!==64){const k=h<<6&192|T;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Pb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Vb=function(n){const e=lT(n);return uT.encodeByteArray(e,!0)},Bc=function(n){return Vb(n).replace(/\./g,"")},kb=function(n){try{return uT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=()=>Ub().__FIREBASE_DEFAULTS__,Ob=()=>{if(typeof process>"u"||typeof dv>"u")return;const n=dv.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},qb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&kb(n[1]);return e&&JSON.parse(e)},Lp=()=>{try{return Mb()||Lb()||Ob()||qb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Bb=n=>{var e,t;return(t=(e=Lp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Gb=n=>{const e=Bb(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},cT=()=>{var n;return(n=Lp())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Hb(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${s}`,aud:s,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Bc(JSON.stringify(t)),Bc(JSON.stringify(u)),""].join(".")}const Cl={};function jb(){const n={prod:[],emulator:[]};for(const e of Object.keys(Cl))Cl[e]?n.emulator.push(e):n.prod.push(e);return n}function Yb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let fv=!1;function Jb(n,e){if(typeof window>"u"||typeof document>"u"||!Op(window.location.host)||Cl[n]===e||Cl[n]||fv)return;Cl[n]=e;function t(x){return`__firebase__banner__${x}`}const s="__firebase__banner",l=jb().prod.length>0;function u(){const x=document.getElementById(s);x&&x.remove()}function f(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function g(x,w){x.setAttribute("width","24"),x.setAttribute("id",w),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function h(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{fv=!0,u()},x}function _(x,w){x.setAttribute("id",w),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function T(){const x=Yb(s),w=t("text"),k=document.getElementById(w)||document.createElement("span"),q=t("learnmore"),P=document.getElementById(q)||document.createElement("a"),H=t("preprendIcon"),te=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const j=x.element;f(j),_(P,q);const oe=h();g(te,H),j.append(te,k,P,oe),document.body.appendChild(j)}l?(k.innerText="Preview backend disconnected.",te.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(te.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function $b(){var e;const n=(e=Lp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qb(){return!$b()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xb(){try{return typeof indexedDB=="object"}catch{return!1}}function Wb(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(s);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="FirebaseError";class oa extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=Zb,Object.setPrototypeOf(this,oa.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dT.prototype.create)}}class dT{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],u=l?ew(l,s):"Error",f=`${this.serviceName}: ${u} (${r}).`;return new oa(r,f,s)}}function ew(n,e){return n.replace(tw,(t,s)=>{const r=e[s];return r!=null?String(r):`<${s}?>`})}const tw=/\{\$([^}]+)}/g;function Gc(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const r of t){if(!s.includes(r))return!1;const l=n[r],u=e[r];if(hv(l)&&hv(u)){if(!Gc(l,u))return!1}else if(l!==u)return!1}for(const r of s)if(!t.includes(r))return!1;return!0}function hv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(n){return n&&n._delegate?n._delegate:n}class Dl{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new Fb;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&s.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(s)return null;throw r}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sw(e))try{this.getOrInitializeService({instanceIdentifier:Fo})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});s.resolve(l)}catch{}}}}clearInstance(e=Fo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Fo){return this.instances.has(e)}getOptions(e=Fo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);s===f&&u.resolve(r)}return r}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(s)??new Set;r.add(e),this.onInitCallbacks.set(s,r);const l=this.instances.get(s);return l&&e(l,s),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const r of s)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iw(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Fo){return this.component?this.component.multipleInstances?e:Fo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iw(n){return n===Fo?void 0:n}function sw(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new nw(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ye;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ye||(Ye={}));const rw={debug:Ye.DEBUG,verbose:Ye.VERBOSE,info:Ye.INFO,warn:Ye.WARN,error:Ye.ERROR,silent:Ye.SILENT},aw=Ye.INFO,lw={[Ye.DEBUG]:"log",[Ye.VERBOSE]:"log",[Ye.INFO]:"info",[Ye.WARN]:"warn",[Ye.ERROR]:"error"},uw=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),r=lw[e];if(r)console[r](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fT{constructor(e){this.name=e,this._logLevel=aw,this._logHandler=uw,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ye))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ye.DEBUG,...e),this._logHandler(this,Ye.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ye.VERBOSE,...e),this._logHandler(this,Ye.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ye.INFO,...e),this._logHandler(this,Ye.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ye.WARN,...e),this._logHandler(this,Ye.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ye.ERROR,...e),this._logHandler(this,Ye.ERROR,...e)}}const cw=(n,e)=>e.some(t=>n instanceof t);let pv,mv;function dw(){return pv||(pv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function fw(){return mv||(mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const hT=new WeakMap,Zh=new WeakMap,pT=new WeakMap,qh=new WeakMap,qp=new WeakMap;function hw(n){const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t($s(n.result)),r()},u=()=>{s(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&hT.set(t,n)}).catch(()=>{}),qp.set(e,n),e}function pw(n){if(Zh.has(n))return;const e=new Promise((t,s)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),r()},u=()=>{s(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Zh.set(n,e)}let ep={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Zh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||pT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $s(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mw(n){ep=n(ep)}function gw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(Bh(this),e,...t);return pT.set(s,e.sort?e.sort():[e]),$s(s)}:fw().includes(n)?function(...e){return n.apply(Bh(this),e),$s(hT.get(this))}:function(...e){return $s(n.apply(Bh(this),e))}}function yw(n){return typeof n=="function"?gw(n):(n instanceof IDBTransaction&&pw(n),cw(n,dw())?new Proxy(n,ep):n)}function $s(n){if(n instanceof IDBRequest)return hw(n);if(qh.has(n))return qh.get(n);const e=yw(n);return e!==n&&(qh.set(n,e),qp.set(e,n)),e}const Bh=n=>qp.get(n);function vw(n,e,{blocked:t,upgrade:s,blocking:r,terminated:l}={}){const u=indexedDB.open(n,e),f=$s(u);return s&&u.addEventListener("upgradeneeded",g=>{s($s(u.result),g.oldVersion,g.newVersion,$s(u.transaction),g)}),t&&u.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),f.then(g=>{l&&g.addEventListener("close",()=>l()),r&&g.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),f}const _w=["get","getKey","getAll","getAllKeys","count"],Ew=["put","add","delete","clear"],Gh=new Map;function gv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Gh.get(e))return Gh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,r=Ew.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(r||_w.includes(t)))return;const l=async function(u,...f){const g=this.transaction(u,r?"readwrite":"readonly");let h=g.store;return s&&(h=h.index(f.shift())),(await Promise.all([h[t](...f),r&&g.done]))[0]};return Gh.set(e,l),l}mw(n=>({...n,get:(e,t,s)=>gv(e,t)||n.get(e,t,s),has:(e,t)=>!!gv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xw(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function xw(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tp="@firebase/app",yv="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as=new fT("@firebase/app"),Sw="@firebase/app-compat",Aw="@firebase/analytics-compat",bw="@firebase/analytics",ww="@firebase/app-check-compat",Cw="@firebase/app-check",Iw="@firebase/auth",Nw="@firebase/auth-compat",Rw="@firebase/database",Mw="@firebase/data-connect",Dw="@firebase/database-compat",Pw="@firebase/functions",Vw="@firebase/functions-compat",kw="@firebase/installations",Uw="@firebase/installations-compat",Lw="@firebase/messaging",Ow="@firebase/messaging-compat",qw="@firebase/performance",Bw="@firebase/performance-compat",Gw="@firebase/remote-config",Fw="@firebase/remote-config-compat",Hw="@firebase/storage",zw="@firebase/storage-compat",jw="@firebase/firestore",Yw="@firebase/ai",Jw="@firebase/firestore-compat",Kw="firebase",$w="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="[DEFAULT]",Qw={[tp]:"fire-core",[Sw]:"fire-core-compat",[bw]:"fire-analytics",[Aw]:"fire-analytics-compat",[Cw]:"fire-app-check",[ww]:"fire-app-check-compat",[Iw]:"fire-auth",[Nw]:"fire-auth-compat",[Rw]:"fire-rtdb",[Mw]:"fire-data-connect",[Dw]:"fire-rtdb-compat",[Pw]:"fire-fn",[Vw]:"fire-fn-compat",[kw]:"fire-iid",[Uw]:"fire-iid-compat",[Lw]:"fire-fcm",[Ow]:"fire-fcm-compat",[qw]:"fire-perf",[Bw]:"fire-perf-compat",[Gw]:"fire-rc",[Fw]:"fire-rc-compat",[Hw]:"fire-gcs",[zw]:"fire-gcs-compat",[jw]:"fire-fst",[Jw]:"fire-fst-compat",[Yw]:"fire-vertex","fire-js":"fire-js",[Kw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fc=new Map,Xw=new Map,ip=new Map;function vv(n,e){try{n.container.addComponent(e)}catch(t){as.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Hc(n){const e=n.name;if(ip.has(e))return as.debug(`There were multiple attempts to register component ${e}.`),!1;ip.set(e,n);for(const t of Fc.values())vv(t,n);for(const t of Xw.values())vv(t,n);return!0}function Ww(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Zw(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qs=new dT("app","Firebase",eC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Dl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=$w;function mT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:np,automaticDataCollectionEnabled:!0,...e},r=s.name;if(typeof r!="string"||!r)throw Qs.create("bad-app-name",{appName:String(r)});if(t||(t=cT()),!t)throw Qs.create("no-options");const l=Fc.get(r);if(l){if(Gc(t,l.options)&&Gc(s,l.config))return l;throw Qs.create("duplicate-app",{appName:r})}const u=new ow(r);for(const g of ip.values())u.addComponent(g);const f=new tC(t,s,u);return Fc.set(r,f),f}function iC(n=np){const e=Fc.get(n);if(!e&&n===np&&cT())return mT();if(!e)throw Qs.create("no-app",{appName:n});return e}function $r(n,e,t){let s=Qw[n]??n;t&&(s+=`-${t}`);const r=s.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const u=[`Unable to register library "${s}" with version "${e}":`];r&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),r&&l&&u.push("and"),l&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),as.warn(u.join(" "));return}Hc(new Dl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC="firebase-heartbeat-database",oC=1,Pl="firebase-heartbeat-store";let Fh=null;function gT(){return Fh||(Fh=vw(sC,oC,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qs.create("idb-open",{originalErrorMessage:n.message})})),Fh}async function rC(n){try{const t=(await gT()).transaction(Pl),s=await t.objectStore(Pl).get(yT(n));return await t.done,s}catch(e){if(e instanceof oa)as.warn(e.message);else{const t=Qs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});as.warn(t.message)}}}async function _v(n,e){try{const s=(await gT()).transaction(Pl,"readwrite");await s.objectStore(Pl).put(e,yT(n)),await s.done}catch(t){if(t instanceof oa)as.warn(t.message);else{const s=Qs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});as.warn(s.message)}}}function yT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=1024,lC=30;class uC{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dC(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Ev();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>lC){const u=fC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){as.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Ev(),{heartbeatsToSend:s,unsentEntries:r}=cC(this._heartbeatsCache.heartbeats),l=Bc(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return as.warn(t),""}}}function Ev(){return new Date().toISOString().substring(0,10)}function cC(n,e=aC){const t=[];let s=n.slice();for(const r of n){const l=t.find(u=>u.agent===r.agent);if(l){if(l.dates.push(r.date),Tv(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Tv(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class dC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xb()?Wb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await rC(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return _v(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return _v(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Tv(n){return Bc(JSON.stringify({version:2,heartbeats:n})).length}function fC(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hC(n){Hc(new Dl("platform-logger",e=>new Tw(e),"PRIVATE")),Hc(new Dl("heartbeat",e=>new uC(e),"PRIVATE")),$r(tp,yv,n),$r(tp,yv,"esm2020"),$r("fire-js","")}hC("");var pC="firebase",mC="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$r(pC,mC,"app");var xv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xs,vT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,M){function R(){}R.prototype=M.prototype,D.F=M.prototype,D.prototype=new R,D.prototype.constructor=D,D.D=function(O,U,V){for(var N=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)N[ye-2]=arguments[ye];return M.prototype[U].apply(O,N)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,M,R){R||(R=0);const O=Array(16);if(typeof M=="string")for(var U=0;U<16;++U)O[U]=M.charCodeAt(R++)|M.charCodeAt(R++)<<8|M.charCodeAt(R++)<<16|M.charCodeAt(R++)<<24;else for(U=0;U<16;++U)O[U]=M[R++]|M[R++]<<8|M[R++]<<16|M[R++]<<24;M=D.g[0],R=D.g[1],U=D.g[2];let V=D.g[3],N;N=M+(V^R&(U^V))+O[0]+3614090360&4294967295,M=R+(N<<7&4294967295|N>>>25),N=V+(U^M&(R^U))+O[1]+3905402710&4294967295,V=M+(N<<12&4294967295|N>>>20),N=U+(R^V&(M^R))+O[2]+606105819&4294967295,U=V+(N<<17&4294967295|N>>>15),N=R+(M^U&(V^M))+O[3]+3250441966&4294967295,R=U+(N<<22&4294967295|N>>>10),N=M+(V^R&(U^V))+O[4]+4118548399&4294967295,M=R+(N<<7&4294967295|N>>>25),N=V+(U^M&(R^U))+O[5]+1200080426&4294967295,V=M+(N<<12&4294967295|N>>>20),N=U+(R^V&(M^R))+O[6]+2821735955&4294967295,U=V+(N<<17&4294967295|N>>>15),N=R+(M^U&(V^M))+O[7]+4249261313&4294967295,R=U+(N<<22&4294967295|N>>>10),N=M+(V^R&(U^V))+O[8]+1770035416&4294967295,M=R+(N<<7&4294967295|N>>>25),N=V+(U^M&(R^U))+O[9]+2336552879&4294967295,V=M+(N<<12&4294967295|N>>>20),N=U+(R^V&(M^R))+O[10]+4294925233&4294967295,U=V+(N<<17&4294967295|N>>>15),N=R+(M^U&(V^M))+O[11]+2304563134&4294967295,R=U+(N<<22&4294967295|N>>>10),N=M+(V^R&(U^V))+O[12]+1804603682&4294967295,M=R+(N<<7&4294967295|N>>>25),N=V+(U^M&(R^U))+O[13]+4254626195&4294967295,V=M+(N<<12&4294967295|N>>>20),N=U+(R^V&(M^R))+O[14]+2792965006&4294967295,U=V+(N<<17&4294967295|N>>>15),N=R+(M^U&(V^M))+O[15]+1236535329&4294967295,R=U+(N<<22&4294967295|N>>>10),N=M+(U^V&(R^U))+O[1]+4129170786&4294967295,M=R+(N<<5&4294967295|N>>>27),N=V+(R^U&(M^R))+O[6]+3225465664&4294967295,V=M+(N<<9&4294967295|N>>>23),N=U+(M^R&(V^M))+O[11]+643717713&4294967295,U=V+(N<<14&4294967295|N>>>18),N=R+(V^M&(U^V))+O[0]+3921069994&4294967295,R=U+(N<<20&4294967295|N>>>12),N=M+(U^V&(R^U))+O[5]+3593408605&4294967295,M=R+(N<<5&4294967295|N>>>27),N=V+(R^U&(M^R))+O[10]+38016083&4294967295,V=M+(N<<9&4294967295|N>>>23),N=U+(M^R&(V^M))+O[15]+3634488961&4294967295,U=V+(N<<14&4294967295|N>>>18),N=R+(V^M&(U^V))+O[4]+3889429448&4294967295,R=U+(N<<20&4294967295|N>>>12),N=M+(U^V&(R^U))+O[9]+568446438&4294967295,M=R+(N<<5&4294967295|N>>>27),N=V+(R^U&(M^R))+O[14]+3275163606&4294967295,V=M+(N<<9&4294967295|N>>>23),N=U+(M^R&(V^M))+O[3]+4107603335&4294967295,U=V+(N<<14&4294967295|N>>>18),N=R+(V^M&(U^V))+O[8]+1163531501&4294967295,R=U+(N<<20&4294967295|N>>>12),N=M+(U^V&(R^U))+O[13]+2850285829&4294967295,M=R+(N<<5&4294967295|N>>>27),N=V+(R^U&(M^R))+O[2]+4243563512&4294967295,V=M+(N<<9&4294967295|N>>>23),N=U+(M^R&(V^M))+O[7]+1735328473&4294967295,U=V+(N<<14&4294967295|N>>>18),N=R+(V^M&(U^V))+O[12]+2368359562&4294967295,R=U+(N<<20&4294967295|N>>>12),N=M+(R^U^V)+O[5]+4294588738&4294967295,M=R+(N<<4&4294967295|N>>>28),N=V+(M^R^U)+O[8]+2272392833&4294967295,V=M+(N<<11&4294967295|N>>>21),N=U+(V^M^R)+O[11]+1839030562&4294967295,U=V+(N<<16&4294967295|N>>>16),N=R+(U^V^M)+O[14]+4259657740&4294967295,R=U+(N<<23&4294967295|N>>>9),N=M+(R^U^V)+O[1]+2763975236&4294967295,M=R+(N<<4&4294967295|N>>>28),N=V+(M^R^U)+O[4]+1272893353&4294967295,V=M+(N<<11&4294967295|N>>>21),N=U+(V^M^R)+O[7]+4139469664&4294967295,U=V+(N<<16&4294967295|N>>>16),N=R+(U^V^M)+O[10]+3200236656&4294967295,R=U+(N<<23&4294967295|N>>>9),N=M+(R^U^V)+O[13]+681279174&4294967295,M=R+(N<<4&4294967295|N>>>28),N=V+(M^R^U)+O[0]+3936430074&4294967295,V=M+(N<<11&4294967295|N>>>21),N=U+(V^M^R)+O[3]+3572445317&4294967295,U=V+(N<<16&4294967295|N>>>16),N=R+(U^V^M)+O[6]+76029189&4294967295,R=U+(N<<23&4294967295|N>>>9),N=M+(R^U^V)+O[9]+3654602809&4294967295,M=R+(N<<4&4294967295|N>>>28),N=V+(M^R^U)+O[12]+3873151461&4294967295,V=M+(N<<11&4294967295|N>>>21),N=U+(V^M^R)+O[15]+530742520&4294967295,U=V+(N<<16&4294967295|N>>>16),N=R+(U^V^M)+O[2]+3299628645&4294967295,R=U+(N<<23&4294967295|N>>>9),N=M+(U^(R|~V))+O[0]+4096336452&4294967295,M=R+(N<<6&4294967295|N>>>26),N=V+(R^(M|~U))+O[7]+1126891415&4294967295,V=M+(N<<10&4294967295|N>>>22),N=U+(M^(V|~R))+O[14]+2878612391&4294967295,U=V+(N<<15&4294967295|N>>>17),N=R+(V^(U|~M))+O[5]+4237533241&4294967295,R=U+(N<<21&4294967295|N>>>11),N=M+(U^(R|~V))+O[12]+1700485571&4294967295,M=R+(N<<6&4294967295|N>>>26),N=V+(R^(M|~U))+O[3]+2399980690&4294967295,V=M+(N<<10&4294967295|N>>>22),N=U+(M^(V|~R))+O[10]+4293915773&4294967295,U=V+(N<<15&4294967295|N>>>17),N=R+(V^(U|~M))+O[1]+2240044497&4294967295,R=U+(N<<21&4294967295|N>>>11),N=M+(U^(R|~V))+O[8]+1873313359&4294967295,M=R+(N<<6&4294967295|N>>>26),N=V+(R^(M|~U))+O[15]+4264355552&4294967295,V=M+(N<<10&4294967295|N>>>22),N=U+(M^(V|~R))+O[6]+2734768916&4294967295,U=V+(N<<15&4294967295|N>>>17),N=R+(V^(U|~M))+O[13]+1309151649&4294967295,R=U+(N<<21&4294967295|N>>>11),N=M+(U^(R|~V))+O[4]+4149444226&4294967295,M=R+(N<<6&4294967295|N>>>26),N=V+(R^(M|~U))+O[11]+3174756917&4294967295,V=M+(N<<10&4294967295|N>>>22),N=U+(M^(V|~R))+O[2]+718787259&4294967295,U=V+(N<<15&4294967295|N>>>17),N=R+(V^(U|~M))+O[9]+3951481745&4294967295,D.g[0]=D.g[0]+M&4294967295,D.g[1]=D.g[1]+(U+(N<<21&4294967295|N>>>11))&4294967295,D.g[2]=D.g[2]+U&4294967295,D.g[3]=D.g[3]+V&4294967295}s.prototype.v=function(D,M){M===void 0&&(M=D.length);const R=M-this.blockSize,O=this.C;let U=this.h,V=0;for(;V<M;){if(U==0)for(;V<=R;)r(this,D,V),V+=this.blockSize;if(typeof D=="string"){for(;V<M;)if(O[U++]=D.charCodeAt(V++),U==this.blockSize){r(this,O),U=0;break}}else for(;V<M;)if(O[U++]=D[V++],U==this.blockSize){r(this,O),U=0;break}}this.h=U,this.o+=M},s.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var M=1;M<D.length-8;++M)D[M]=0;M=this.o*8;for(var R=D.length-8;R<D.length;++R)D[R]=M&255,M/=256;for(this.v(D),D=Array(16),M=0,R=0;R<4;++R)for(let O=0;O<32;O+=8)D[M++]=this.g[R]>>>O&255;return D};function l(D,M){var R=f;return Object.prototype.hasOwnProperty.call(R,D)?R[D]:R[D]=M(D)}function u(D,M){this.h=M;const R=[];let O=!0;for(let U=D.length-1;U>=0;U--){const V=D[U]|0;O&&V==M||(R[U]=V,O=!1)}this.g=R}var f={};function g(D){return-128<=D&&D<128?l(D,function(M){return new u([M|0],M<0?-1:0)}):new u([D|0],D<0?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return P(h(-D));const M=[];let R=1;for(let O=0;D>=R;O++)M[O]=D/R|0,R*=4294967296;return new u(M,0)}function _(D,M){if(D.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(D.charAt(0)=="-")return P(_(D.substring(1),M));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=h(Math.pow(M,8));let O=T;for(let V=0;V<D.length;V+=8){var U=Math.min(8,D.length-V);const N=parseInt(D.substring(V,V+U),M);U<8?(U=h(Math.pow(M,U)),O=O.j(U).add(h(N))):(O=O.j(R),O=O.add(h(N)))}return O}var T=g(0),x=g(1),w=g(16777216);n=u.prototype,n.m=function(){if(q(this))return-P(this).m();let D=0,M=1;for(let R=0;R<this.g.length;R++){const O=this.i(R);D+=(O>=0?O:4294967296+O)*M,M*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(k(this))return"0";if(q(this))return"-"+P(this).toString(D);const M=h(Math.pow(D,6));var R=this;let O="";for(;;){const U=oe(R,M).g;R=H(R,U.j(M));let V=((R.g.length>0?R.g[0]:R.h)>>>0).toString(D);if(R=U,k(R))return V+O;for(;V.length<6;)V="0"+V;O=V+O}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function k(D){if(D.h!=0)return!1;for(let M=0;M<D.g.length;M++)if(D.g[M]!=0)return!1;return!0}function q(D){return D.h==-1}n.l=function(D){return D=H(this,D),q(D)?-1:k(D)?0:1};function P(D){const M=D.g.length,R=[];for(let O=0;O<M;O++)R[O]=~D.g[O];return new u(R,~D.h).add(x)}n.abs=function(){return q(this)?P(this):this},n.add=function(D){const M=Math.max(this.g.length,D.g.length),R=[];let O=0;for(let U=0;U<=M;U++){let V=O+(this.i(U)&65535)+(D.i(U)&65535),N=(V>>>16)+(this.i(U)>>>16)+(D.i(U)>>>16);O=N>>>16,V&=65535,N&=65535,R[U]=N<<16|V}return new u(R,R[R.length-1]&-2147483648?-1:0)};function H(D,M){return D.add(P(M))}n.j=function(D){if(k(this)||k(D))return T;if(q(this))return q(D)?P(this).j(P(D)):P(P(this).j(D));if(q(D))return P(this.j(P(D)));if(this.l(w)<0&&D.l(w)<0)return h(this.m()*D.m());const M=this.g.length+D.g.length,R=[];for(var O=0;O<2*M;O++)R[O]=0;for(O=0;O<this.g.length;O++)for(let U=0;U<D.g.length;U++){const V=this.i(O)>>>16,N=this.i(O)&65535,ye=D.i(U)>>>16,ee=D.i(U)&65535;R[2*O+2*U]+=N*ee,te(R,2*O+2*U),R[2*O+2*U+1]+=V*ee,te(R,2*O+2*U+1),R[2*O+2*U+1]+=N*ye,te(R,2*O+2*U+1),R[2*O+2*U+2]+=V*ye,te(R,2*O+2*U+2)}for(D=0;D<M;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=M;D<2*M;D++)R[D]=0;return new u(R,0)};function te(D,M){for(;(D[M]&65535)!=D[M];)D[M+1]+=D[M]>>>16,D[M]&=65535,M++}function j(D,M){this.g=D,this.h=M}function oe(D,M){if(k(M))throw Error("division by zero");if(k(D))return new j(T,T);if(q(D))return M=oe(P(D),M),new j(P(M.g),P(M.h));if(q(M))return M=oe(D,P(M)),new j(P(M.g),M.h);if(D.g.length>30){if(q(D)||q(M))throw Error("slowDivide_ only works with positive integers.");for(var R=x,O=M;O.l(D)<=0;)R=de(R),O=de(O);var U=ce(R,1),V=ce(O,1);for(O=ce(O,2),R=ce(R,2);!k(O);){var N=V.add(O);N.l(D)<=0&&(U=U.add(R),V=N),O=ce(O,1),R=ce(R,1)}return M=H(D,U.j(M)),new j(U,M)}for(U=T;D.l(M)>=0;){for(R=Math.max(1,Math.floor(D.m()/M.m())),O=Math.ceil(Math.log(R)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),V=h(R),N=V.j(M);q(N)||N.l(D)>0;)R-=O,V=h(R),N=V.j(M);k(V)&&(V=x),U=U.add(V),D=H(D,N)}return new j(U,D)}n.B=function(D){return oe(this,D).h},n.and=function(D){const M=Math.max(this.g.length,D.g.length),R=[];for(let O=0;O<M;O++)R[O]=this.i(O)&D.i(O);return new u(R,this.h&D.h)},n.or=function(D){const M=Math.max(this.g.length,D.g.length),R=[];for(let O=0;O<M;O++)R[O]=this.i(O)|D.i(O);return new u(R,this.h|D.h)},n.xor=function(D){const M=Math.max(this.g.length,D.g.length),R=[];for(let O=0;O<M;O++)R[O]=this.i(O)^D.i(O);return new u(R,this.h^D.h)};function de(D){const M=D.g.length+1,R=[];for(let O=0;O<M;O++)R[O]=D.i(O)<<1|D.i(O-1)>>>31;return new u(R,D.h)}function ce(D,M){const R=M>>5;M%=32;const O=D.g.length-R,U=[];for(let V=0;V<O;V++)U[V]=M>0?D.i(V+R)>>>M|D.i(V+R+1)<<32-M:D.i(V+R);return new u(U,D.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,vT=s,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=h,u.fromString=_,Xs=u}).apply(typeof xv<"u"?xv:typeof self<"u"?self:typeof window<"u"?window:{});var xc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _T,xl,ET,Dc,sp,TT,xT,ST;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof xc=="object"&&xc];for(var S=0;S<m.length;++S){var b=m[S];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var s=t(this);function r(m,S){if(S)e:{var b=s;m=m.split(".");for(var I=0;I<m.length-1;I++){var Y=m[I];if(!(Y in b))break e;b=b[Y]}m=m[m.length-1],I=b[m],S=S(I),S!=I&&S!=null&&e(b,m,{configurable:!0,writable:!0,value:S})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(S){var b=[],I;for(I in S)Object.prototype.hasOwnProperty.call(S,I)&&b.push([I,S[I]]);return b}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},u=this||self;function f(m){var S=typeof m;return S=="object"&&m!=null||S=="function"}function g(m,S,b){return m.call.apply(m.bind,arguments)}function h(m,S,b){return h=g,h.apply(null,arguments)}function _(m,S){var b=Array.prototype.slice.call(arguments,1);return function(){var I=b.slice();return I.push.apply(I,arguments),m.apply(this,I)}}function T(m,S){function b(){}b.prototype=S.prototype,m.Z=S.prototype,m.prototype=new b,m.prototype.constructor=m,m.Ob=function(I,Y,X){for(var fe=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)fe[ke-2]=arguments[ke];return S.prototype[Y].apply(I,fe)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function w(m){const S=m.length;if(S>0){const b=Array(S);for(let I=0;I<S;I++)b[I]=m[I];return b}return[]}function k(m,S){for(let I=1;I<arguments.length;I++){const Y=arguments[I];var b=typeof Y;if(b=b!="object"?b:Y?Array.isArray(Y)?"array":b:"null",b=="array"||b=="object"&&typeof Y.length=="number"){b=m.length||0;const X=Y.length||0;m.length=b+X;for(let fe=0;fe<X;fe++)m[b+fe]=Y[fe]}else m.push(Y)}}class q{constructor(S,b){this.i=S,this.j=b,this.h=0,this.g=null}get(){let S;return this.h>0?(this.h--,S=this.g,this.g=S.next,S.next=null):S=this.i(),S}}function P(m){u.setTimeout(()=>{throw m},0)}function H(){var m=D;let S=null;return m.g&&(S=m.g,m.g=m.g.next,m.g||(m.h=null),S.next=null),S}class te{constructor(){this.h=this.g=null}add(S,b){const I=j.get();I.set(S,b),this.h?this.h.next=I:this.g=I,this.h=I}}var j=new q(()=>new oe,m=>m.reset());class oe{constructor(){this.next=this.g=this.h=null}set(S,b){this.h=S,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let de,ce=!1,D=new te,M=()=>{const m=Promise.resolve(void 0);de=()=>{m.then(R)}};function R(){for(var m;m=H();){try{m.h.call(m.g)}catch(b){P(b)}var S=j;S.j(m),S.h<100&&(S.h++,m.next=S.g,S.g=m)}ce=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function U(m,S){this.type=m,this.g=this.target=S,this.defaultPrevented=!1}U.prototype.h=function(){this.defaultPrevented=!0};var V=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var m=!1,S=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const b=()=>{};u.addEventListener("test",b,S),u.removeEventListener("test",b,S)}catch{}return m})();function N(m){return/^[\s\xa0]*$/.test(m)}function ye(m,S){U.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,S)}T(ye,U),ye.prototype.init=function(m,S){const b=this.type=m.type,I=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=S,S=m.relatedTarget,S||(b=="mouseover"?S=m.fromElement:b=="mouseout"&&(S=m.toElement)),this.relatedTarget=S,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&ye.Z.h.call(this)},ye.prototype.h=function(){ye.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ee="closure_listenable_"+(Math.random()*1e6|0),F=0;function ae(m,S,b,I,Y){this.listener=m,this.proxy=null,this.src=S,this.type=b,this.capture=!!I,this.ha=Y,this.key=++F,this.da=this.fa=!1}function _e(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function ue(m,S,b){for(const I in m)S.call(b,m[I],I,m)}function Se(m,S){for(const b in m)S.call(void 0,m[b],b,m)}function B(m){const S={};for(const b in m)S[b]=m[b];return S}const Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(m,S){let b,I;for(let Y=1;Y<arguments.length;Y++){I=arguments[Y];for(b in I)m[b]=I[b];for(let X=0;X<Q.length;X++)b=Q[X],Object.prototype.hasOwnProperty.call(I,b)&&(m[b]=I[b])}}function he(m){this.src=m,this.g={},this.h=0}he.prototype.add=function(m,S,b,I,Y){const X=m.toString();m=this.g[X],m||(m=this.g[X]=[],this.h++);const fe=Re(m,S,I,Y);return fe>-1?(S=m[fe],b||(S.fa=!1)):(S=new ae(S,this.src,X,!!I,Y),S.fa=b,m.push(S)),S};function Ee(m,S){const b=S.type;if(b in m.g){var I=m.g[b],Y=Array.prototype.indexOf.call(I,S,void 0),X;(X=Y>=0)&&Array.prototype.splice.call(I,Y,1),X&&(_e(S),m.g[b].length==0&&(delete m.g[b],m.h--))}}function Re(m,S,b,I){for(let Y=0;Y<m.length;++Y){const X=m[Y];if(!X.da&&X.listener==S&&X.capture==!!b&&X.ha==I)return Y}return-1}var Ce="closure_lm_"+(Math.random()*1e6|0),pt={};function We(m,S,b,I,Y){if(Array.isArray(S)){for(let X=0;X<S.length;X++)We(m,S[X],b,I,Y);return null}return b=ga(b),m&&m[ee]?m.J(S,b,f(I)?!!I.capture:!1,Y):qi(m,S,b,!1,I,Y)}function qi(m,S,b,I,Y,X){if(!S)throw Error("Invalid event type");const fe=f(Y)?!!Y.capture:!!Y;let ke=co(m);if(ke||(m[Ce]=ke=new he(m)),b=ke.add(S,b,I,fe,X),b.proxy)return b;if(I=hs(),b.proxy=I,I.src=m,I.listener=b,m.addEventListener)V||(Y=fe),Y===void 0&&(Y=!1),m.addEventListener(S.toString(),I,Y);else if(m.attachEvent)m.attachEvent(ui(S.toString()),I);else if(m.addListener&&m.removeListener)m.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return b}function hs(){function m(b){return S.call(m.src,m.listener,b)}const S=pa;return m}function Zo(m,S,b,I,Y){if(Array.isArray(S))for(var X=0;X<S.length;X++)Zo(m,S[X],b,I,Y);else I=f(I)?!!I.capture:!!I,b=ga(b),m&&m[ee]?(m=m.i,X=String(S).toString(),X in m.g&&(S=m.g[X],b=Re(S,b,I,Y),b>-1&&(_e(S[b]),Array.prototype.splice.call(S,b,1),S.length==0&&(delete m.g[X],m.h--)))):m&&(m=co(m))&&(S=m.g[S.toString()],m=-1,S&&(m=Re(S,b,I,Y)),(b=m>-1?S[m]:null)&&er(b))}function er(m){if(typeof m!="number"&&m&&!m.da){var S=m.src;if(S&&S[ee])Ee(S.i,m);else{var b=m.type,I=m.proxy;S.removeEventListener?S.removeEventListener(b,I,m.capture):S.detachEvent?S.detachEvent(ui(b),I):S.addListener&&S.removeListener&&S.removeListener(I),(b=co(S))?(Ee(b,m),b.h==0&&(b.src=null,S[Ce]=null)):_e(m)}}}function ui(m){return m in pt?pt[m]:pt[m]="on"+m}function pa(m,S){if(m.da)m=!0;else{S=new ye(S,this);const b=m.listener,I=m.ha||m.src;m.fa&&er(m),m=b.call(I,S)}return m}function co(m){return m=m[Ce],m instanceof he?m:null}var ma="__closure_events_fn_"+(Math.random()*1e9>>>0);function ga(m){return typeof m=="function"?m:(m[ma]||(m[ma]=function(S){return m.handleEvent(S)}),m[ma])}function At(){O.call(this),this.i=new he(this),this.M=this,this.G=null}T(At,O),At.prototype[ee]=!0,At.prototype.removeEventListener=function(m,S,b,I){Zo(this,m,S,b,I)};function Ut(m,S){var b,I=m.G;if(I)for(b=[];I;I=I.G)b.push(I);if(m=m.M,I=S.type||S,typeof S=="string")S=new U(S,m);else if(S instanceof U)S.target=S.target||m;else{var Y=S;S=new U(I,m),le(S,Y)}Y=!0;let X,fe;if(b)for(fe=b.length-1;fe>=0;fe--)X=S.g=b[fe],Y=ps(X,I,!0,S)&&Y;if(X=S.g=m,Y=ps(X,I,!0,S)&&Y,Y=ps(X,I,!1,S)&&Y,b)for(fe=0;fe<b.length;fe++)X=S.g=b[fe],Y=ps(X,I,!1,S)&&Y}At.prototype.N=function(){if(At.Z.N.call(this),this.i){var m=this.i;for(const S in m.g){const b=m.g[S];for(let I=0;I<b.length;I++)_e(b[I]);delete m.g[S],m.h--}}this.G=null},At.prototype.J=function(m,S,b,I){return this.i.add(String(m),S,!1,b,I)},At.prototype.K=function(m,S,b,I){return this.i.add(String(m),S,!0,b,I)};function ps(m,S,b,I){if(S=m.i.g[String(S)],!S)return!0;S=S.concat();let Y=!0;for(let X=0;X<S.length;++X){const fe=S[X];if(fe&&!fe.da&&fe.capture==b){const ke=fe.listener,Et=fe.ha||fe.src;fe.fa&&Ee(m.i,fe),Y=ke.call(Et,I)!==!1&&Y}}return Y&&!I.defaultPrevented}function Vd(m,S){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(S)>2147483647?-1:u.setTimeout(m,S||0)}function Jl(m){m.g=Vd(()=>{m.g=null,m.i&&(m.i=!1,Jl(m))},m.l);const S=m.h;m.h=null,m.m.apply(null,S)}class on extends O{constructor(S,b){super(),this.m=S,this.l=b,this.h=null,this.i=!1,this.g=null}j(S){this.h=arguments,this.g?this.i=!0:Jl(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fo(m){O.call(this),this.h=m,this.g={}}T(fo,O);var ya=[];function va(m){ue(m.g,function(S,b){this.g.hasOwnProperty(b)&&er(S)},m),m.g={}}fo.prototype.N=function(){fo.Z.N.call(this),va(this)},fo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ms=u.JSON.stringify,kd=u.JSON.parse,Kl=class{stringify(m){return u.JSON.stringify(m,void 0)}parse(m){return u.JSON.parse(m,void 0)}};function $l(){}function Ql(){}var Jn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function zt(){U.call(this,"d")}T(zt,U);function Nn(){U.call(this,"c")}T(Nn,U);var _t={},Xl=null;function tr(){return Xl=Xl||new At}_t.Ia="serverreachability";function Wl(m){U.call(this,_t.Ia,m)}T(Wl,U);function ci(m){const S=tr();Ut(S,new Wl(S))}_t.STAT_EVENT="statevent";function ho(m,S){U.call(this,_t.STAT_EVENT,m),this.stat=S}T(ho,U);function bt(m){const S=tr();Ut(S,new ho(S,m))}_t.Ja="timingevent";function di(m,S){U.call(this,_t.Ja,m),this.size=S}T(di,U);function fi(m,S){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){m()},S)}function Kn(){this.g=!0}Kn.prototype.ua=function(){this.g=!1};function Ud(m,S,b,I,Y,X){m.info(function(){if(m.g)if(X){var fe="",ke=X.split("&");for(let Qe=0;Qe<ke.length;Qe++){var Et=ke[Qe].split("=");if(Et.length>1){const ft=Et[0];Et=Et[1];const Pn=ft.split("_");fe=Pn.length>=2&&Pn[1]=="type"?fe+(ft+"="+Et+"&"):fe+(ft+"=redacted&")}}}else fe=null;else fe=X;return"XMLHTTP REQ ("+I+") [attempt "+Y+"]: "+S+`
`+b+`
`+fe})}function Zl(m,S,b,I,Y,X,fe){m.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Y+"]: "+S+`
`+b+`
`+X+" "+fe})}function hi(m,S,b,I){m.info(function(){return"XMLHTTP TEXT ("+S+"): "+Ld(m,b)+(I?" "+I:"")})}function po(m,S){m.info(function(){return"TIMEOUT: "+S})}Kn.prototype.info=function(){};function Ld(m,S){if(!m.g)return S;if(!S)return null;try{const X=JSON.parse(S);if(X){for(m=0;m<X.length;m++)if(Array.isArray(X[m])){var b=X[m];if(!(b.length<2)){var I=b[1];if(Array.isArray(I)&&!(I.length<1)){var Y=I[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(let fe=1;fe<I.length;fe++)I[fe]=""}}}}return ms(X)}catch{return S}}var mo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_a={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ea;function go(){}T(go,$l),go.prototype.g=function(){return new XMLHttpRequest},Ea=new go;function Bi(m){return encodeURIComponent(String(m))}function eu(m){var S=1;m=m.split(":");const b=[];for(;S>0&&m.length;)b.push(m.shift()),S--;return m.length&&b.push(m.join(":")),b}function $n(m,S,b,I){this.j=m,this.i=S,this.l=b,this.S=I||1,this.V=new fo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qn}function Qn(){this.i=null,this.g="",this.h=!1}var wt={},qt={};function pi(m,S,b){m.M=1,m.A=yo(It(S)),m.u=b,m.R=!0,nr(m,null)}function nr(m,S){m.F=Date.now(),mi(m),m.B=It(m.A);var b=m.B,I=m.S;Array.isArray(I)||(I=[String(I)]),rr(b.i,"t",I),m.C=0,b=m.j.L,m.h=new Qn,m.g=mu(m.j,b?S:null,!m.u),m.P>0&&(m.O=new on(h(m.Y,m,m.g),m.P)),S=m.V,b=m.g,I=m.ba;var Y="readystatechange";Array.isArray(Y)||(Y&&(ya[0]=Y.toString()),Y=ya);for(let X=0;X<Y.length;X++){const fe=We(b,Y[X],I||S.handleEvent,!1,S.h||S);if(!fe)break;S.g[fe.key]=fe}S=m.J?B(m.J):{},m.u?(m.v||(m.v="POST"),S["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,S)):(m.v="GET",m.g.ea(m.B,m.v,null,S)),ci(),Ud(m.i,m.v,m.B,m.l,m.S,m.u)}$n.prototype.ba=function(m){m=m.target;const S=this.O;S&&Zn(m)==3?S.j():this.Y(m)},$n.prototype.Y=function(m){try{if(m==this.g)e:{const ke=Zn(this.g),Et=this.g.ya(),Qe=this.g.ca();if(!(ke<3)&&(ke!=3||this.g&&(this.h.h||this.g.la()||jt(this.g)))){this.K||ke!=4||Et==7||(Et==8||Qe<=0?ci(3):ci(2)),gi(this);var S=this.g.ca();this.X=S;var b=Od(this);if(this.o=S==200,Zl(this.i,this.v,this.B,this.l,this.S,ke,S),this.o){if(this.U&&!this.L){t:{if(this.g){var I,Y=this.g;if((I=Y.g?Y.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(I)){var X=I;break t}}X=null}if(m=X)hi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,yi(this,m);else{this.o=!1,this.m=3,bt(12),_n(this),Rn(this);break e}}if(this.R){m=!0;let ft;for(;!this.K&&this.C<b.length;)if(ft=nu(this,b),ft==qt){ke==4&&(this.m=4,bt(14),m=!1),hi(this.i,this.l,null,"[Incomplete Response]");break}else if(ft==wt){this.m=4,bt(15),hi(this.i,this.l,b,"[Invalid Chunk]"),m=!1;break}else hi(this.i,this.l,ft,null),yi(this,ft);if(tu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ke!=4||b.length!=0||this.h.h||(this.m=1,bt(16),m=!1),this.o=this.o&&m,!m)hi(this.i,this.l,b,"[Invalid Chunked Response]"),_n(this),Rn(this);else if(b.length>0&&!this.W){this.W=!0;var fe=this.j;fe.g==this&&fe.aa&&!fe.P&&(fe.j.info("Great, no buffering proxy detected. Bytes received: "+b.length),ka(fe),fe.P=!0,bt(11))}}else hi(this.i,this.l,b,null),yi(this,b);ke==4&&_n(this),this.o&&!this.K&&(ke==4?du(this.j,this):(this.o=!1,mi(this)))}else Fi(this.g),S==400&&b.indexOf("Unknown SID")>0?(this.m=3,bt(12)):(this.m=0,bt(13)),_n(this),Rn(this)}}}catch{}finally{}};function Od(m){if(!tu(m))return m.g.la();const S=jt(m.g);if(S==="")return"";let b="";const I=S.length,Y=Zn(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return _n(m),Rn(m),"";m.h.i=new u.TextDecoder}for(let X=0;X<I;X++)m.h.h=!0,b+=m.h.i.decode(S[X],{stream:!(Y&&X==I-1)});return S.length=0,m.h.g+=b,m.C=0,m.h.g}function tu(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function nu(m,S){var b=m.C,I=S.indexOf(`
`,b);return I==-1?qt:(b=Number(S.substring(b,I)),isNaN(b)?wt:(I+=1,I+b>S.length?qt:(S=S.slice(I,I+b),m.C=I+b,S)))}$n.prototype.cancel=function(){this.K=!0,_n(this)};function mi(m){m.T=Date.now()+m.H,ir(m,m.H)}function ir(m,S){if(m.D!=null)throw Error("WatchDog timer not null");m.D=fi(h(m.aa,m),S)}function gi(m){m.D&&(u.clearTimeout(m.D),m.D=null)}$n.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(po(this.i,this.B),this.M!=2&&(ci(),bt(17)),_n(this),this.m=2,Rn(this)):ir(this,this.T-m)};function Rn(m){m.j.I==0||m.K||du(m.j,m)}function _n(m){gi(m);var S=m.O;S&&typeof S.dispose=="function"&&S.dispose(),m.O=null,va(m.V),m.g&&(S=m.g,m.g=null,S.abort(),S.dispose())}function yi(m,S){try{var b=m.j;if(b.I!=0&&(b.g==m||_i(b.h,m))){if(!m.L&&_i(b.h,m)&&b.I==3){try{var I=b.Ba.g.parse(S)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Y=I;if(Y[0]==0){e:if(!b.v){if(b.g)if(b.g.F+3e3<m.F)dr(b),Ss(b);else break e;Ao(b),bt(18)}}else b.xa=Y[1],0<b.xa-b.K&&Y[2]<37500&&b.F&&b.A==0&&!b.C&&(b.C=fi(h(b.Va,b),6e3));vi(b.h)<=1&&b.ta&&(b.ta=void 0)}else bi(b,11)}else if((m.L||b.g==m)&&dr(b),!N(S))for(Y=b.Ba.g.parse(S),S=0;S<Y.length;S++){let Qe=Y[S];const ft=Qe[0];if(!(ft<=b.K))if(b.K=ft,Qe=Qe[1],b.I==2)if(Qe[0]=="c"){b.M=Qe[1],b.ba=Qe[2];const Pn=Qe[3];Pn!=null&&(b.ka=Pn,b.j.info("VER="+b.ka));const wi=Qe[4];wi!=null&&(b.za=wi,b.j.info("SVER="+b.za));const ei=Qe[5];ei!=null&&typeof ei=="number"&&ei>0&&(I=1.5*ei,b.O=I,b.j.info("backChannelRequestTimeoutMs_="+I)),I=b;const ti=m.g;if(ti){const bo=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bo){var X=I.h;X.g||bo.indexOf("spdy")==-1&&bo.indexOf("quic")==-1&&bo.indexOf("h2")==-1||(X.j=X.l,X.g=new Set,X.h&&(Sa(X,X.h),X.h=null))}if(I.G){const fr=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;fr&&(I.wa=fr,et(I.J,I.G,fr))}}b.I=3,b.l&&b.l.ra(),b.aa&&(b.T=Date.now()-m.F,b.j.info("Handshake RTT: "+b.T+"ms")),I=b;var fe=m;if(I.na=pu(I,I.L?I.ba:null,I.W),fe.L){Aa(I.h,fe);var ke=fe,Et=I.O;Et&&(ke.H=Et),ke.D&&(gi(ke),mi(ke)),I.g=fe}else uu(I);b.i.length>0&&Ai(b)}else Qe[0]!="stop"&&Qe[0]!="close"||bi(b,7);else b.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?bi(b,7):Pa(b):Qe[0]!="noop"&&b.l&&b.l.qa(Qe),b.A=0)}}ci(4)}catch{}}var Ct=class{constructor(m,S){this.g=m,this.map=S}};function Ta(m){this.l=m||10,u.PerformanceNavigationTiming?(m=u.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function xa(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function vi(m){return m.h?1:m.g?m.g.size:0}function _i(m,S){return m.h?m.h==S:m.g?m.g.has(S):!1}function Sa(m,S){m.g?m.g.add(S):m.h=S}function Aa(m,S){m.h&&m.h==S?m.h=null:m.g&&m.g.has(S)&&m.g.delete(S)}Ta.prototype.cancel=function(){if(this.i=ba(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function ba(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let S=m.i;for(const b of m.g.values())S=S.concat(b.G);return S}return w(m.i)}var iu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function sr(m,S){if(m){m=m.split("&");for(let b=0;b<m.length;b++){const I=m[b].indexOf("=");let Y,X=null;I>=0?(Y=m[b].substring(0,I),X=m[b].substring(I+1)):Y=m[b],S(Y,X?decodeURIComponent(X.replace(/\+/g," ")):"")}}}function En(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let S;m instanceof En?(this.l=m.l,Bt(this,m.j),this.o=m.o,this.g=m.g,gs(this,m.u),this.h=m.h,wa(this,au(m.i)),this.m=m.m):m&&(S=String(m).match(iu))?(this.l=!1,Bt(this,S[1]||"",!0),this.o=Ei(S[2]||""),this.g=Ei(S[3]||"",!0),gs(this,S[4]),this.h=Ei(S[5]||"",!0),wa(this,S[6]||"",!0),this.m=Ei(S[7]||"")):(this.l=!1,this.i=new vs(null,this.l))}En.prototype.toString=function(){const m=[];var S=this.j;S&&m.push(vo(S,or,!0),":");var b=this.g;return(b||S=="file")&&(m.push("//"),(S=this.o)&&m.push(vo(S,or,!0),"@"),m.push(Bi(b).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.u,b!=null&&m.push(":",String(b))),(b=this.h)&&(this.g&&b.charAt(0)!="/"&&m.push("/"),m.push(vo(b,b.charAt(0)=="/"?Ca:su,!0))),(b=this.i.toString())&&m.push("?",b),(b=this.m)&&m.push("#",vo(b,ou)),m.join("")},En.prototype.resolve=function(m){const S=It(this);let b=!!m.j;b?Bt(S,m.j):b=!!m.o,b?S.o=m.o:b=!!m.g,b?S.g=m.g:b=m.u!=null;var I=m.h;if(b)gs(S,m.u);else if(b=!!m.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var Y=S.h.lastIndexOf("/");Y!=-1&&(I=S.h.slice(0,Y+1)+I)}if(Y=I,Y==".."||Y==".")I="";else if(Y.indexOf("./")!=-1||Y.indexOf("/.")!=-1){I=Y.lastIndexOf("/",0)==0,Y=Y.split("/");const X=[];for(let fe=0;fe<Y.length;){const ke=Y[fe++];ke=="."?I&&fe==Y.length&&X.push(""):ke==".."?((X.length>1||X.length==1&&X[0]!="")&&X.pop(),I&&fe==Y.length&&X.push("")):(X.push(ke),I=!0)}I=X.join("/")}else I=Y}return b?S.h=I:b=m.i.toString()!=="",b?wa(S,au(m.i)):b=!!m.m,b&&(S.m=m.m),S};function It(m){return new En(m)}function Bt(m,S,b){m.j=b?Ei(S,!0):S,m.j&&(m.j=m.j.replace(/:$/,""))}function gs(m,S){if(S){if(S=Number(S),isNaN(S)||S<0)throw Error("Bad port number "+S);m.u=S}else m.u=null}function wa(m,S,b){S instanceof vs?(m.i=S,ar(m.i,m.l)):(b||(S=vo(S,ys)),m.i=new vs(S,m.l))}function et(m,S,b){m.i.set(S,b)}function yo(m){return et(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function Ei(m,S){return m?S?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function vo(m,S,b){return typeof m=="string"?(m=encodeURI(m).replace(S,cn),b&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function cn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var or=/[#\/\?@]/g,su=/[#\?:]/g,Ca=/[#\?]/g,ys=/[#\?@]/g,ou=/#/g;function vs(m,S){this.h=this.g=null,this.i=m||null,this.j=!!S}function dn(m){m.g||(m.g=new Map,m.h=0,m.i&&sr(m.i,function(S,b){m.add(decodeURIComponent(S.replace(/\+/g," ")),b)}))}n=vs.prototype,n.add=function(m,S){dn(this),this.i=null,m=_s(this,m);let b=this.g.get(m);return b||this.g.set(m,b=[]),b.push(S),this.h+=1,this};function ru(m,S){dn(m),S=_s(m,S),m.g.has(S)&&(m.i=null,m.h-=m.g.get(S).length,m.g.delete(S))}function Ia(m,S){return dn(m),S=_s(m,S),m.g.has(S)}n.forEach=function(m,S){dn(this),this.g.forEach(function(b,I){b.forEach(function(Y){m.call(S,Y,I,this)},this)},this)};function Na(m,S){dn(m);let b=[];if(typeof S=="string")Ia(m,S)&&(b=b.concat(m.g.get(_s(m,S))));else for(m=Array.from(m.g.values()),S=0;S<m.length;S++)b=b.concat(m[S]);return b}n.set=function(m,S){return dn(this),this.i=null,m=_s(this,m),Ia(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[S]),this.h+=1,this},n.get=function(m,S){return m?(m=Na(this,m),m.length>0?String(m[0]):S):S};function rr(m,S,b){ru(m,S),b.length>0&&(m.i=null,m.g.set(_s(m,S),w(b)),m.h+=b.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],S=Array.from(this.g.keys());for(let I=0;I<S.length;I++){var b=S[I];const Y=Bi(b);b=Na(this,b);for(let X=0;X<b.length;X++){let fe=Y;b[X]!==""&&(fe+="="+Bi(b[X])),m.push(fe)}}return this.i=m.join("&")};function au(m){const S=new vs;return S.i=m.i,m.g&&(S.g=new Map(m.g),S.h=m.h),S}function _s(m,S){return S=String(S),m.j&&(S=S.toLowerCase()),S}function ar(m,S){S&&!m.j&&(dn(m),m.i=null,m.g.forEach(function(b,I){const Y=I.toLowerCase();I!=Y&&(ru(this,I),rr(this,Y,b))},m)),m.j=S}function Xn(m,S){const b=new Kn;if(u.Image){const I=new Image;I.onload=_(Mn,b,"TestLoadImage: loaded",!0,S,I),I.onerror=_(Mn,b,"TestLoadImage: error",!1,S,I),I.onabort=_(Mn,b,"TestLoadImage: abort",!1,S,I),I.ontimeout=_(Mn,b,"TestLoadImage: timeout",!1,S,I),u.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=m}else S(!1)}function Ra(m,S){const b=new Kn,I=new AbortController,Y=setTimeout(()=>{I.abort(),Mn(b,"TestPingServer: timeout",!1,S)},1e4);fetch(m,{signal:I.signal}).then(X=>{clearTimeout(Y),X.ok?Mn(b,"TestPingServer: ok",!0,S):Mn(b,"TestPingServer: server error",!1,S)}).catch(()=>{clearTimeout(Y),Mn(b,"TestPingServer: error",!1,S)})}function Mn(m,S,b,I,Y){try{Y&&(Y.onload=null,Y.onerror=null,Y.onabort=null,Y.ontimeout=null),I(b)}catch{}}function Es(){this.g=new Kl}function Ti(m){this.i=m.Sb||null,this.h=m.ab||!1}T(Ti,$l),Ti.prototype.g=function(){return new _o(this.i,this.h)};function _o(m,S){At.call(this),this.H=m,this.o=S,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(_o,At),n=_o.prototype,n.open=function(m,S){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=S,this.readyState=1,Wn(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const S={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(S.body=m),(this.H||u).fetch(new Request(this.D,S)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ts(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Wn(this)),this.g&&(this.readyState=3,Wn(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;lr(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function lr(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var S=m.value?m.value:new Uint8Array(0);(S=this.B.decode(S,{stream:!m.done}))&&(this.response=this.responseText+=S)}m.done?Ts(this):Wn(this),this.readyState==3&&lr(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,Ts(this))},n.Na=function(m){this.g&&(this.response=m,Ts(this))},n.ga=function(){this.g&&Ts(this)};function Ts(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Wn(m)}n.setRequestHeader=function(m,S){this.A.append(m,S)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],S=this.h.entries();for(var b=S.next();!b.done;)b=b.value,m.push(b[0]+": "+b[1]),b=S.next();return m.join(`\r
`)};function Wn(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(_o.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function Dn(m){let S="";return ue(m,function(b,I){S+=I,S+=":",S+=b,S+=`\r
`}),S}function Eo(m,S,b){e:{for(I in b){var I=!1;break e}I=!0}I||(b=Dn(b),typeof m=="string"?b!=null&&Bi(b):et(m,S,b))}function it(m){At.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(it,At);var xi=/^https?$/i,Ma=["POST","PUT"];n=it.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,S,b,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);S=S?S.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ea.g(),this.g.onreadystatechange=x(h(this.Ca,this));try{this.B=!0,this.g.open(S,String(m),!0),this.B=!1}catch(X){To(this,X);return}if(m=b||"",b=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Y in I)b.set(Y,I[Y]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const X of I.keys())b.set(X,I.get(X));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(b.keys()).find(X=>X.toLowerCase()=="content-type"),Y=u.FormData&&m instanceof u.FormData,!(Array.prototype.indexOf.call(Ma,S,void 0)>=0)||I||Y||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[X,fe]of b)this.g.setRequestHeader(X,fe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(X){To(this,X)}};function To(m,S){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=S,m.o=5,Da(m),Gi(m)}function Da(m){m.A||(m.A=!0,Ut(m,"complete"),Ut(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Ut(this,"complete"),Ut(this,"abort"),Gi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gi(this,!0)),it.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?xo(this):this.Xa())},n.Xa=function(){xo(this)};function xo(m){if(m.h&&typeof l<"u"){if(m.v&&Zn(m)==4)setTimeout(m.Ca.bind(m),0);else if(Ut(m,"readystatechange"),Zn(m)==4){m.h=!1;try{const X=m.ca();e:switch(X){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var S=!0;break e;default:S=!1}var b;if(!(b=S)){var I;if(I=X===0){let fe=String(m.D).match(iu)[1]||null;!fe&&u.self&&u.self.location&&(fe=u.self.location.protocol.slice(0,-1)),I=!xi.test(fe?fe.toLowerCase():"")}b=I}if(b)Ut(m,"complete"),Ut(m,"success");else{m.o=6;try{var Y=Zn(m)>2?m.g.statusText:""}catch{Y=""}m.l=Y+" ["+m.ca()+"]",Da(m)}}finally{Gi(m)}}}}function Gi(m,S){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const b=m.g;m.g=null,S||Ut(m,"ready");try{b.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Zn(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Zn(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var S=this.g.responseText;return m&&S.indexOf(m)==0&&(S=S.substring(m.length)),kd(S)}};function jt(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Fi(m){const S={};m=(m.g&&Zn(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<m.length;I++){if(N(m[I]))continue;var b=eu(m[I]);const Y=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const X=S[Y]||[];S[Y]=X,X.push(b)}Se(S,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Si(m,S,b){return b&&b.internalChannelParams&&b.internalChannelParams[m]||S}function xs(m){this.za=0,this.i=[],this.j=new Kn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Si("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Si("baseRetryDelayMs",5e3,m),this.Za=Si("retryDelaySeedMs",1e4,m),this.Ta=Si("forwardChannelMaxRetries",2,m),this.va=Si("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new Ta(m&&m.concurrentRequestLimit),this.Ba=new Es,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=xs.prototype,n.ka=8,n.I=1,n.connect=function(m,S,b,I){bt(0),this.W=m,this.H=S||{},b&&I!==void 0&&(this.H.OSID=b,this.H.OAID=I),this.F=this.X,this.J=pu(this,null,this.W),Ai(this)};function Pa(m){if(ur(m),m.I==3){var S=m.V++,b=It(m.J);if(et(b,"SID",m.M),et(b,"RID",S),et(b,"TYPE","terminate"),So(m,b),S=new $n(m,m.j,S),S.M=2,S.A=yo(It(b)),b=!1,u.navigator&&u.navigator.sendBeacon)try{b=u.navigator.sendBeacon(S.A.toString(),"")}catch{}!b&&u.Image&&(new Image().src=S.A,b=!0),b||(S.g=mu(S.j,null),S.g.ea(S.A)),S.F=Date.now(),mi(S)}hu(m)}function Ss(m){m.g&&(ka(m),m.g.cancel(),m.g=null)}function ur(m){Ss(m),m.v&&(u.clearTimeout(m.v),m.v=null),dr(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&u.clearTimeout(m.m),m.m=null)}function Ai(m){if(!xa(m.h)&&!m.m){m.m=!0;var S=m.Ea;de||M(),ce||(de(),ce=!0),D.add(S,m),m.D=0}}function cr(m,S){return vi(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=S.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=fi(h(m.Ea,m,S),fu(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const Y=new $n(this,this.j,m);let X=this.o;if(this.U&&(X?(X=B(X),le(X,this.U)):X=this.U),this.u!==null||this.R||(Y.J=X,X=null),this.S)e:{for(var S=0,b=0;b<this.i.length;b++){t:{var I=this.i[b];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(S+=I,S>4096){S=b;break e}if(S===4096||b===this.i.length-1){S=b+1;break e}}S=1e3}else S=1e3;S=lu(this,Y,S),b=It(this.J),et(b,"RID",m),et(b,"CVER",22),this.G&&et(b,"X-HTTP-Session-Id",this.G),So(this,b),X&&(this.R?S="headers="+Bi(Dn(X))+"&"+S:this.u&&Eo(b,this.u,X)),Sa(this.h,Y),this.Ra&&et(b,"TYPE","init"),this.S?(et(b,"$req",S),et(b,"SID","null"),Y.U=!0,pi(Y,b,null)):pi(Y,b,S),this.I=2}}else this.I==3&&(m?Va(this,m):this.i.length==0||xa(this.h)||Va(this))};function Va(m,S){var b;S?b=S.l:b=m.V++;const I=It(m.J);et(I,"SID",m.M),et(I,"RID",b),et(I,"AID",m.K),So(m,I),m.u&&m.o&&Eo(I,m.u,m.o),b=new $n(m,m.j,b,m.D+1),m.u===null&&(b.J=m.o),S&&(m.i=S.G.concat(m.i)),S=lu(m,b,1e3),b.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),Sa(m.h,b),pi(b,I,S)}function So(m,S){m.H&&ue(m.H,function(b,I){et(S,I,b)}),m.l&&ue({},function(b,I){et(S,I,b)})}function lu(m,S,b){b=Math.min(m.i.length,b);const I=m.l?h(m.l.Ka,m.l,m):null;e:{var Y=m.i;let ke=-1;for(;;){const Et=["count="+b];ke==-1?b>0?(ke=Y[0].g,Et.push("ofs="+ke)):ke=0:Et.push("ofs="+ke);let Qe=!0;for(let ft=0;ft<b;ft++){var X=Y[ft].g;const Pn=Y[ft].map;if(X-=ke,X<0)ke=Math.max(0,Y[ft].g-100),Qe=!1;else try{X="req"+X+"_"||"";try{var fe=Pn instanceof Map?Pn:Object.entries(Pn);for(const[wi,ei]of fe){let ti=ei;f(ei)&&(ti=ms(ei)),Et.push(X+wi+"="+encodeURIComponent(ti))}}catch(wi){throw Et.push(X+"type="+encodeURIComponent("_badmap")),wi}}catch{I&&I(Pn)}}if(Qe){fe=Et.join("&");break e}}fe=void 0}return m=m.i.splice(0,b),S.G=m,fe}function uu(m){if(!m.g&&!m.v){m.Y=1;var S=m.Da;de||M(),ce||(de(),ce=!0),D.add(S,m),m.A=0}}function Ao(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=fi(h(m.Da,m),fu(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,cu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=fi(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,bt(10),Ss(this),cu(this))};function ka(m){m.B!=null&&(u.clearTimeout(m.B),m.B=null)}function cu(m){m.g=new $n(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var S=It(m.na);et(S,"RID","rpc"),et(S,"SID",m.M),et(S,"AID",m.K),et(S,"CI",m.F?"0":"1"),!m.F&&m.ia&&et(S,"TO",m.ia),et(S,"TYPE","xmlhttp"),So(m,S),m.u&&m.o&&Eo(S,m.u,m.o),m.O&&(m.g.H=m.O);var b=m.g;m=m.ba,b.M=1,b.A=yo(It(S)),b.u=null,b.R=!0,nr(b,m)}n.Va=function(){this.C!=null&&(this.C=null,Ss(this),Ao(this),bt(19))};function dr(m){m.C!=null&&(u.clearTimeout(m.C),m.C=null)}function du(m,S){var b=null;if(m.g==S){dr(m),ka(m),m.g=null;var I=2}else if(_i(m.h,S))b=S.G,Aa(m.h,S),I=1;else return;if(m.I!=0){if(S.o)if(I==1){b=S.u?S.u.length:0,S=Date.now()-S.F;var Y=m.D;I=tr(),Ut(I,new di(I,b)),Ai(m)}else uu(m);else if(Y=S.m,Y==3||Y==0&&S.X>0||!(I==1&&cr(m,S)||I==2&&Ao(m)))switch(b&&b.length>0&&(S=m.h,S.i=S.i.concat(b)),Y){case 1:bi(m,5);break;case 4:bi(m,10);break;case 3:bi(m,6);break;default:bi(m,2)}}}function fu(m,S){let b=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(b*=2),b*S}function bi(m,S){if(m.j.info("Error code "+S),S==2){var b=h(m.bb,m),I=m.Ua;const Y=!I;I=new En(I||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Bt(I,"https"),yo(I),Y?Xn(I.toString(),b):Ra(I.toString(),b)}else bt(2);m.I=0,m.l&&m.l.pa(S),hu(m),ur(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function hu(m){if(m.I=0,m.ja=[],m.l){const S=ba(m.h);(S.length!=0||m.i.length!=0)&&(k(m.ja,S),k(m.ja,m.i),m.h.i.length=0,w(m.i),m.i.length=0),m.l.oa()}}function pu(m,S,b){var I=b instanceof En?It(b):new En(b);if(I.g!="")S&&(I.g=S+"."+I.g),gs(I,I.u);else{var Y=u.location;I=Y.protocol,S=S?S+"."+Y.hostname:Y.hostname,Y=+Y.port;const X=new En(null);I&&Bt(X,I),S&&(X.g=S),Y&&gs(X,Y),b&&(X.h=b),I=X}return b=m.G,S=m.wa,b&&S&&et(I,b,S),et(I,"VER",m.ka),So(m,I),I}function mu(m,S,b){if(S&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return S=m.Aa&&!m.ma?new it(new Ti({ab:b})):new it(m.ma),S.Fa(m.L),S}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function gu(){}n=gu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function As(){}As.prototype.g=function(m,S){return new rn(m,S)};function rn(m,S){At.call(this),this.g=new xs(S),this.l=m,this.h=S&&S.messageUrlParams||null,m=S&&S.messageHeaders||null,S&&S.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=S&&S.initMessageHeaders||null,S&&S.messageContentType&&(m?m["X-WebChannel-Content-Type"]=S.messageContentType:m={"X-WebChannel-Content-Type":S.messageContentType}),S&&S.sa&&(m?m["X-WebChannel-Client-Profile"]=S.sa:m={"X-WebChannel-Client-Profile":S.sa}),this.g.U=m,(m=S&&S.Qb)&&!N(m)&&(this.g.u=m),this.A=S&&S.supportsCrossDomainXhr||!1,this.v=S&&S.sendRawJson||!1,(S=S&&S.httpSessionIdParam)&&!N(S)&&(this.g.G=S,m=this.h,m!==null&&S in m&&(m=this.h,S in m&&delete m[S])),this.j=new Hi(this)}T(rn,At),rn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},rn.prototype.close=function(){Pa(this.g)},rn.prototype.o=function(m){var S=this.g;if(typeof m=="string"){var b={};b.__data__=m,m=b}else this.v&&(b={},b.__data__=ms(m),m=b);S.i.push(new Ct(S.Ya++,m)),S.I==3&&Ai(S)},rn.prototype.N=function(){this.g.l=null,delete this.j,Pa(this.g),delete this.g,rn.Z.N.call(this)};function yu(m){zt.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var S=m.__sm__;if(S){e:{for(const b in S){m=b;break e}m=void 0}(this.i=m)&&(m=this.i,S=S!==null&&m in S?S[m]:void 0),this.data=S}else this.data=m}T(yu,zt);function vu(){Nn.call(this),this.status=1}T(vu,Nn);function Hi(m){this.g=m}T(Hi,gu),Hi.prototype.ra=function(){Ut(this.g,"a")},Hi.prototype.qa=function(m){Ut(this.g,new yu(m))},Hi.prototype.pa=function(m){Ut(this.g,new vu)},Hi.prototype.oa=function(){Ut(this.g,"b")},As.prototype.createWebChannel=As.prototype.g,rn.prototype.send=rn.prototype.o,rn.prototype.open=rn.prototype.m,rn.prototype.close=rn.prototype.close,ST=function(){return new As},xT=function(){return tr()},TT=_t,sp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},mo.NO_ERROR=0,mo.TIMEOUT=8,mo.HTTP_ERROR=6,Dc=mo,_a.COMPLETE="complete",ET=_a,Ql.EventType=Jn,Jn.OPEN="a",Jn.CLOSE="b",Jn.ERROR="c",Jn.MESSAGE="d",At.prototype.listen=At.prototype.J,xl=Ql,it.prototype.listenOnce=it.prototype.K,it.prototype.getLastError=it.prototype.Ha,it.prototype.getLastErrorCode=it.prototype.ya,it.prototype.getStatus=it.prototype.ca,it.prototype.getResponseJson=it.prototype.La,it.prototype.getResponseText=it.prototype.la,it.prototype.send=it.prototype.ea,it.prototype.setWithCredentials=it.prototype.Fa,_T=it}).apply(typeof xc<"u"?xc:typeof self<"u"?self:typeof window<"u"?window:{});const Sv="@firebase/firestore",Av="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}tn.UNAUTHENTICATED=new tn(null),tn.GOOGLE_CREDENTIALS=new tn("google-credentials-uid"),tn.FIRST_PARTY=new tn("first-party-uid"),tn.MOCK_USER=new tn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jo=new fT("@firebase/firestore");function Fr(){return Jo.logLevel}function ve(n,...e){if(Jo.logLevel<=Ye.DEBUG){const t=e.map(Bp);Jo.debug(`Firestore (${ra}): ${n}`,...t)}}function ls(n,...e){if(Jo.logLevel<=Ye.ERROR){const t=e.map(Bp);Jo.error(`Firestore (${ra}): ${n}`,...t)}}function Zr(n,...e){if(Jo.logLevel<=Ye.WARN){const t=e.map(Bp);Jo.warn(`Firestore (${ra}): ${n}`,...t)}}function Bp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,AT(n,s,t)}function AT(n,e,t){let s=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw ls(s),new Error(s)}function Ze(n,e,t,s){let r="Unexpected state";typeof t=="string"?r=t:s=t,n||AT(e,r,s)}function Ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends oa{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(tn.UNAUTHENTICATED)))}shutdown(){}}class yC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class vC{constructor(e){this.t=e,this.currentUser=tn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ze(this.o===void 0,42304);let s=this.i;const r=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new os;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new os,e.enqueueRetryable((()=>r(this.currentUser)))};const u=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await r(this.currentUser)}))},f=g=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((g=>f(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?f(g):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new os)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ze(typeof s.accessToken=="string",31837,{l:s}),new bT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new tn(e)}}class _C{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=tn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EC{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new _C(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(tn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TC{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Zw(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ze(this.o===void 0,3512);const s=l=>{l.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ve("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const r=l=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ze(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const r=xC(40);for(let l=0;l<r.length;++l)s.length<20&&r[l]<t&&(s+=e.charAt(r[l]%62))}return s}}function Fe(n,e){return n<e?-1:n>e?1:0}function op(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const r=n.charAt(s),l=e.charAt(s);if(r!==l)return Hh(r)===Hh(l)?Fe(r,l):Hh(r)?1:-1}return Fe(n.length,e.length)}const SC=55296,AC=57343;function Hh(n){const e=n.charCodeAt(0);return e>=SC&&e<=AC}function ea(n,e,t){return n.length===e.length&&n.every(((s,r)=>t(s,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="__name__";class Mi{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ie(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ie(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Mi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mi?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let r=0;r<s;r++){const l=Mi.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return Fe(e.length,t.length)}static compareSegments(e,t){const s=Mi.isNumericId(e),r=Mi.isNumericId(t);return s&&!r?-1:!s&&r?1:s&&r?Mi.extractNumericId(e).compare(Mi.extractNumericId(t)):op(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Xs.fromString(e.substring(4,e.length-2))}}class lt extends Mi{construct(e,t,s){return new lt(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ge(ie.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((r=>r.length>0)))}return new lt(t)}static emptyPath(){return new lt([])}}const bC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Mi{construct(e,t,s){return new Xt(e,t,s)}static isValidIdentifier(e){return bC.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===wv}static keyField(){return new Xt([wv])}static fromServerFormat(e){const t=[];let s="",r=0;const l=()=>{if(s.length===0)throw new ge(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let u=!1;for(;r<e.length;){const f=e[r];if(f==="\\"){if(r+1===e.length)throw new ge(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[r+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ge(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,r+=2}else f==="`"?(u=!u,r++):f!=="."||u?(s+=f,r++):(l(),r++)}if(l(),u)throw new ge(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(t)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(lt.fromString(e))}static fromName(e){return new be(lt.fromString(e).popFirst(5))}static empty(){return new be(lt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&lt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return lt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new lt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(n,e,t){if(!t)throw new ge(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function wC(n,e,t,s){if(e===!0&&s===!0)throw new ge(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Cv(n){if(!be.isDocumentKey(n))throw new ge(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Iv(n){if(be.isDocumentKey(n))throw new ge(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function CT(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function cd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie(12329,{type:typeof n})}function zn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=cd(n);throw new ge(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Gl(n,e){if(!CT(n))throw new ge(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const r=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const u=n[s];if(r&&typeof u!==r){t=`JSON field '${s}' must be a ${r}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ge(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv=-62135596800,Rv=1e6;class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*Rv);return new dt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Nv)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Rv}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:dt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Gl(e,dt._jsonSchema))return new dt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Nv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}dt._jsonSchemaVersion="firestore/timestamp/1.0",dt._jsonSchema={type:kt("string",dt._jsonSchemaVersion),seconds:kt("number"),nanoseconds:kt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{static fromTimestamp(e){return new De(e)}static min(){return new De(new dt(0,0))}static max(){return new De(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl=-1;function CC(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,r=De.fromTimestamp(s===1e9?new dt(t+1,0):new dt(t,s));return new Zs(r,be.empty(),e)}function IC(n){return new Zs(n.readTime,n.key,Vl)}class Zs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new Zs(De.min(),be.empty(),Vl)}static max(){return new Zs(De.max(),be.empty(),Vl)}}function NC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=be.comparator(n.documentKey,e.documentKey),t!==0?t:Fe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aa(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==RC)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re(((s,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):re.reject(t)}static resolve(e){return new re(((t,s)=>{t(e)}))}static reject(e){return new re(((t,s)=>{s(e)}))}static waitFor(e){return new re(((t,s)=>{let r=0,l=0,u=!1;e.forEach((f=>{++r,f.next((()=>{++l,u&&l===r&&t()}),(g=>s(g)))})),u=!0,l===r&&t()}))}static or(e){let t=re.resolve(!1);for(const s of e)t=t.next((r=>r?re.resolve(r):s()));return t}static forEach(e,t){const s=[];return e.forEach(((r,l)=>{s.push(t.call(this,r,l))})),this.waitFor(s)}static mapArray(e,t){return new re(((s,r)=>{const l=e.length,u=new Array(l);let f=0;for(let g=0;g<l;g++){const h=g;t(e[h]).next((_=>{u[h]=_,++f,f===l&&s(u)}),(_=>r(_)))}}))}static doWhile(e,t){return new re(((s,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):s()};l()}))}}function DC(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function la(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}dd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=-1;function fd(n){return n==null}function zc(n){return n===0&&1/n==-1/0}function PC(n){return typeof n=="number"&&Number.isInteger(n)&&!zc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="";function VC(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Mv(e)),e=kC(n.get(t),e);return Mv(e)}function kC(n,e){let t=e;const s=n.length;for(let r=0;r<s;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case IT:t+="";break;default:t+=l}}return t}function Mv(n){return n+IT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ro(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function NT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new mt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new mt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const r=this.comparator(e,s.key);if(r===0)return t+s.left.size;r<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}}class Sc{constructor(e,t,s,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,s,r,l){this.key=e,this.value=t,this.color=s??Qt.RED,this.left=r??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,r,l){return new Qt(e??this.key,t??this.value,s??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let r=this;const l=s(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,s),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,s)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Qt.EMPTY;s=r.right.min(),r=r.copy(s.key,s.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ie(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ie(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ie(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie(57766)}get value(){throw Ie(16141)}get color(){throw Ie(16727)}get left(){throw Ie(29726)}get right(){throw Ie(36894)}copy(e,t,s,r,l){return this}insert(e,t,s){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new mt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const r=s.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Pv(this.data.getIterator())}getIteratorFrom(e){return new Pv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ot(this.comparator);return t.data=e,t}}class Pv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new In([])}unionWith(e){let t=new Ot(Xt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new In(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ea(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new RT("Invalid base64 string: "+l):l}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let u=0;u<r.length;++u)l+=String.fromCharCode(r[u]);return l})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let r=0;r<t.length;r++)s[r]=t.charCodeAt(r);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const UC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function eo(n){if(Ze(!!n,39018),typeof n=="string"){let e=0;const t=UC.exec(n);if(Ze(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:St(n.seconds),nanos:St(n.nanos)}}function St(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function to(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MT="server_timestamp",DT="__type__",PT="__previous_value__",VT="__local_write_time__";function Hp(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[DT])==null?void 0:s.stringValue)===MT}function hd(n){const e=n.mapValue.fields[PT];return Hp(e)?hd(e):e}function kl(n){const e=eo(n.mapValue.fields[VT].timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,t,s,r,l,u,f,g,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=r,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=g,this.useFetchStreams=h,this.isUsingEmulator=_}}const jc="(default)";class Ul{constructor(e,t){this.projectId=e,this.database=t||jc}static empty(){return new Ul("","")}get isDefaultDatabase(){return this.database===jc}isEqual(e){return e instanceof Ul&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT="__type__",OC="__max__",Ac={mapValue:{}},UT="__vector__",Yc="value";function no(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hp(n)?4:BC(n)?9007199254740991:qC(n)?10:11:Ie(28295,{value:n})}function Oi(n,e){if(n===e)return!0;const t=no(n);if(t!==no(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return kl(n).isEqual(kl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const u=eo(r.timestampValue),f=eo(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return to(r.bytesValue).isEqual(to(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return St(r.geoPointValue.latitude)===St(l.geoPointValue.latitude)&&St(r.geoPointValue.longitude)===St(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return St(r.integerValue)===St(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const u=St(r.doubleValue),f=St(l.doubleValue);return u===f?zc(u)===zc(f):isNaN(u)&&isNaN(f)}return!1})(n,e);case 9:return ea(n.arrayValue.values||[],e.arrayValue.values||[],Oi);case 10:case 11:return(function(r,l){const u=r.mapValue.fields||{},f=l.mapValue.fields||{};if(Dv(u)!==Dv(f))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(f[g]===void 0||!Oi(u[g],f[g])))return!1;return!0})(n,e);default:return Ie(52216,{left:n})}}function Ll(n,e){return(n.values||[]).find((t=>Oi(t,e)))!==void 0}function ta(n,e){if(n===e)return 0;const t=no(n),s=no(e);if(t!==s)return Fe(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Fe(n.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=St(l.integerValue||l.doubleValue),g=St(u.integerValue||u.doubleValue);return f<g?-1:f>g?1:f===g?0:isNaN(f)?isNaN(g)?0:-1:1})(n,e);case 3:return Vv(n.timestampValue,e.timestampValue);case 4:return Vv(kl(n),kl(e));case 5:return op(n.stringValue,e.stringValue);case 6:return(function(l,u){const f=to(l),g=to(u);return f.compareTo(g)})(n.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),g=u.split("/");for(let h=0;h<f.length&&h<g.length;h++){const _=Fe(f[h],g[h]);if(_!==0)return _}return Fe(f.length,g.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=Fe(St(l.latitude),St(u.latitude));return f!==0?f:Fe(St(l.longitude),St(u.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return kv(n.arrayValue,e.arrayValue);case 10:return(function(l,u){var x,w,k,q;const f=l.fields||{},g=u.fields||{},h=(x=f[Yc])==null?void 0:x.arrayValue,_=(w=g[Yc])==null?void 0:w.arrayValue,T=Fe(((k=h==null?void 0:h.values)==null?void 0:k.length)||0,((q=_==null?void 0:_.values)==null?void 0:q.length)||0);return T!==0?T:kv(h,_)})(n.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Ac.mapValue&&u===Ac.mapValue)return 0;if(l===Ac.mapValue)return 1;if(u===Ac.mapValue)return-1;const f=l.fields||{},g=Object.keys(f),h=u.fields||{},_=Object.keys(h);g.sort(),_.sort();for(let T=0;T<g.length&&T<_.length;++T){const x=op(g[T],_[T]);if(x!==0)return x;const w=ta(f[g[T]],h[_[T]]);if(w!==0)return w}return Fe(g.length,_.length)})(n.mapValue,e.mapValue);default:throw Ie(23264,{he:t})}}function Vv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Fe(n,e);const t=eo(n),s=eo(e),r=Fe(t.seconds,s.seconds);return r!==0?r:Fe(t.nanos,s.nanos)}function kv(n,e){const t=n.values||[],s=e.values||[];for(let r=0;r<t.length&&r<s.length;++r){const l=ta(t[r],s[r]);if(l)return l}return Fe(t.length,s.length)}function na(n){return rp(n)}function rp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=eo(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return to(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return be.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",r=!0;for(const l of t.values||[])r?r=!1:s+=",",s+=rp(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const u of s)l?l=!1:r+=",",r+=`${u}:${rp(t.fields[u])}`;return r+"}"})(n.mapValue):Ie(61005,{value:n})}function Pc(n){switch(no(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hd(n);return e?16+Pc(e):16;case 5:return 2*n.stringValue.length;case 6:return to(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((r,l)=>r+Pc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let r=0;return ro(s.fields,((l,u)=>{r+=l.length+Pc(u)})),r})(n.mapValue);default:throw Ie(13486,{value:n})}}function Uv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function ap(n){return!!n&&"integerValue"in n}function zp(n){return!!n&&"arrayValue"in n}function Lv(n){return!!n&&"nullValue"in n}function Ov(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Vc(n){return!!n&&"mapValue"in n}function qC(n){var t,s;return((s=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[kT])==null?void 0:s.stringValue)===UT}function Il(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ro(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Il(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Il(n.arrayValue.values[t]);return e}return{...n}}function BC(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===OC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.value=e}static empty(){return new vn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Vc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Il(t)}setAll(e){let t=Xt.emptyPath(),s={},r=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const g=this.getFieldsMap(t);this.applyChanges(g,s,r),s={},r=[],t=f.popLast()}u?s[f.lastSegment()]=Il(u):r.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,r)}delete(e){const t=this.field(e.popLast());Vc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Oi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let r=t.mapValue.fields[e.get(s)];Vc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,s){ro(t,((r,l)=>e[r]=l));for(const r of s)delete e[r]}clone(){return new vn(Il(this.value))}}function LT(n){const e=[];return ro(n.fields,((t,s)=>{const r=new Xt([t]);if(Vc(s)){const l=LT(s.mapValue).fields;if(l.length===0)e.push(r);else for(const u of l)e.push(r.child(u))}else e.push(r)})),new In(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e,t,s,r,l,u,f){this.key=e,this.documentType=t,this.version=s,this.readTime=r,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new nn(e,0,De.min(),De.min(),De.min(),vn.empty(),0)}static newFoundDocument(e,t,s,r){return new nn(e,1,t,De.min(),s,r,0)}static newNoDocument(e,t){return new nn(e,2,t,De.min(),De.min(),vn.empty(),0)}static newUnknownDocument(e,t){return new nn(e,3,t,De.min(),De.min(),vn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(De.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=De.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t){this.position=e,this.inclusive=t}}function qv(n,e,t){let s=0;for(let r=0;r<n.position.length;r++){const l=e[r],u=n.position[r];if(l.field.isKeyField()?s=be.comparator(be.fromName(u.referenceValue),t.key):s=ta(u,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Bv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Oi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t="asc"){this.field=e,this.dir=t}}function GC(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{}class Vt extends OT{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new HC(e,t,s):t==="array-contains"?new YC(e,s):t==="in"?new JC(e,s):t==="not-in"?new KC(e,s):t==="array-contains-any"?new $C(e,s):new Vt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new zC(e,s):new jC(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ta(t,this.value)):t!==null&&no(this.value)===no(t)&&this.matchesComparison(ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ai extends OT{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ai(e,t)}matches(e){return qT(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qT(n){return n.op==="and"}function BT(n){return FC(n)&&qT(n)}function FC(n){for(const e of n.filters)if(e instanceof ai)return!1;return!0}function lp(n){if(n instanceof Vt)return n.field.canonicalString()+n.op.toString()+na(n.value);if(BT(n))return n.filters.map((e=>lp(e))).join(",");{const e=n.filters.map((t=>lp(t))).join(",");return`${n.op}(${e})`}}function GT(n,e){return n instanceof Vt?(function(s,r){return r instanceof Vt&&s.op===r.op&&s.field.isEqual(r.field)&&Oi(s.value,r.value)})(n,e):n instanceof ai?(function(s,r){return r instanceof ai&&s.op===r.op&&s.filters.length===r.filters.length?s.filters.reduce(((l,u,f)=>l&&GT(u,r.filters[f])),!0):!1})(n,e):void Ie(19439)}function FT(n){return n instanceof Vt?(function(t){return`${t.field.canonicalString()} ${t.op} ${na(t.value)}`})(n):n instanceof ai?(function(t){return t.op.toString()+" {"+t.getFilters().map(FT).join(" ,")+"}"})(n):"Filter"}class HC extends Vt{constructor(e,t,s){super(e,t,s),this.key=be.fromName(s.referenceValue)}matches(e){const t=be.comparator(e.key,this.key);return this.matchesComparison(t)}}class zC extends Vt{constructor(e,t){super(e,"in",t),this.keys=HT("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jC extends Vt{constructor(e,t){super(e,"not-in",t),this.keys=HT("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function HT(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>be.fromName(s.referenceValue)))}class YC extends Vt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zp(t)&&Ll(t.arrayValue,this.value)}}class JC extends Vt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ll(this.value.arrayValue,t)}}class KC extends Vt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ll(this.value.arrayValue,t)}}class $C extends Vt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Ll(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,t=null,s=[],r=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=r,this.limit=l,this.startAt=u,this.endAt=f,this.Te=null}}function Gv(n,e=null,t=[],s=[],r=null,l=null,u=null){return new QC(n,e,t,s,r,l,u)}function jp(n){const e=Ve(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>lp(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),fd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>na(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>na(s))).join(",")),e.Te=t}return e.Te}function Yp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GC(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!GT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Bv(n.startAt,e.startAt)&&Bv(n.endAt,e.endAt)}function up(n){return be.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,t=null,s=[],r=[],l=null,u="F",f=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=r,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function XC(n,e,t,s,r,l,u,f){return new ua(n,e,t,s,r,l,u,f)}function pd(n){return new ua(n)}function Fv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function zT(n){return n.collectionGroup!==null}function Nl(n){const e=Ve(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Ot(Xt.comparator);return u.filters.forEach((g=>{g.getFlattenedFilters().forEach((h=>{h.isInequality()&&(f=f.add(h.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Ol(l,s))})),t.has(Xt.keyField().canonicalString())||e.Ie.push(new Ol(Xt.keyField(),s))}return e.Ie}function Di(n){const e=Ve(n);return e.Ee||(e.Ee=WC(e,Nl(n))),e.Ee}function WC(n,e){if(n.limitType==="F")return Gv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new Ol(r.field,l)}));const t=n.endAt?new Jc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Jc(n.startAt.position,n.startAt.inclusive):null;return Gv(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function cp(n,e){const t=n.filters.concat([e]);return new ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function dp(n,e,t){return new ua(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function md(n,e){return Yp(Di(n),Di(e))&&n.limitType===e.limitType}function jT(n){return`${jp(Di(n))}|lt:${n.limitType}`}function Hr(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((r=>FT(r))).join(", ")}]`),fd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((r=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(r))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((r=>na(r))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((r=>na(r))).join(",")),`Target(${s})`})(Di(n))}; limitType=${n.limitType})`}function gd(n,e){return e.isFoundDocument()&&(function(s,r){const l=r.key.path;return s.collectionGroup!==null?r.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):be.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,r){for(const l of Nl(s))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,r){for(const l of s.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(s,r){return!(s.startAt&&!(function(u,f,g){const h=qv(u,f,g);return u.inclusive?h<=0:h<0})(s.startAt,Nl(s),r)||s.endAt&&!(function(u,f,g){const h=qv(u,f,g);return u.inclusive?h>=0:h>0})(s.endAt,Nl(s),r))})(n,e)}function ZC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function YT(n){return(e,t)=>{let s=!1;for(const r of Nl(n)){const l=e1(r,e,t);if(l!==0)return l;s=s||r.field.isKeyField()}return 0}}function e1(n,e,t){const s=n.field.isKeyField()?be.comparator(e.key,t.key):(function(l,u,f){const g=u.data.field(l),h=f.data.field(l);return g!==null&&h!==null?ta(g,h):Ie(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ie(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[r,l]of s)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),r=this.inner[s];if(r===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return s.length===1?delete this.inner[t]:s.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ro(this.inner,((t,s)=>{for(const[r,l]of s)e(r,l)}))}isEmpty(){return NT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=new mt(be.comparator);function us(){return t1}const JT=new mt(be.comparator);function Sl(...n){let e=JT;for(const t of n)e=e.insert(t.key,t);return e}function KT(n){let e=JT;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function zo(){return Rl()}function $T(){return Rl()}function Rl(){return new Qo((n=>n.toString()),((n,e)=>n.isEqual(e)))}const n1=new mt(be.comparator),i1=new Ot(be.comparator);function He(...n){let e=i1;for(const t of n)e=e.add(t);return e}const s1=new Ot(Fe);function o1(){return s1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function QT(n){return{integerValue:""+n}}function r1(n,e){return PC(e)?QT(e):Jp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(){this._=void 0}}function a1(n,e,t){return n instanceof Kc?(function(r,l){const u={fields:{[DT]:{stringValue:MT},[VT]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Hp(l)&&(l=hd(l)),l&&(u.fields[PT]=l),{mapValue:u}})(t,e):n instanceof ql?WT(n,e):n instanceof Bl?ZT(n,e):(function(r,l){const u=XT(r,l),f=Hv(u)+Hv(r.Ae);return ap(u)&&ap(r.Ae)?QT(f):Jp(r.serializer,f)})(n,e)}function l1(n,e,t){return n instanceof ql?WT(n,e):n instanceof Bl?ZT(n,e):t}function XT(n,e){return n instanceof $c?(function(s){return ap(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Kc extends yd{}class ql extends yd{constructor(e){super(),this.elements=e}}function WT(n,e){const t=ex(e);for(const s of n.elements)t.some((r=>Oi(r,s)))||t.push(s);return{arrayValue:{values:t}}}class Bl extends yd{constructor(e){super(),this.elements=e}}function ZT(n,e){let t=ex(e);for(const s of n.elements)t=t.filter((r=>!Oi(r,s)));return{arrayValue:{values:t}}}class $c extends yd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Hv(n){return St(n.integerValue||n.doubleValue)}function ex(n){return zp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function u1(n,e){return n.field.isEqual(e.field)&&(function(s,r){return s instanceof ql&&r instanceof ql||s instanceof Bl&&r instanceof Bl?ea(s.elements,r.elements,Oi):s instanceof $c&&r instanceof $c?Oi(s.Ae,r.Ae):s instanceof Kc&&r instanceof Kc})(n.transform,e.transform)}class c1{constructor(e,t){this.version=e,this.transformResults=t}}class Pi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class vd{}function tx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new ix(n.key,Pi.none()):new Fl(n.key,n.data,Pi.none());{const t=n.data,s=vn.empty();let r=new Ot(Xt.comparator);for(let l of e.fields)if(!r.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?s.delete(l):s.set(l,u),r=r.add(l)}return new ao(n.key,s,new In(r.toArray()),Pi.none())}}function d1(n,e,t){n instanceof Fl?(function(r,l,u){const f=r.value.clone(),g=jv(r.fieldTransforms,l,u.transformResults);f.setAll(g),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(n,e,t):n instanceof ao?(function(r,l,u){if(!kc(r.precondition,l))return void l.convertToUnknownDocument(u.version);const f=jv(r.fieldTransforms,l,u.transformResults),g=l.data;g.setAll(nx(r)),g.setAll(f),l.convertToFoundDocument(u.version,g).setHasCommittedMutations()})(n,e,t):(function(r,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Ml(n,e,t,s){return n instanceof Fl?(function(l,u,f,g){if(!kc(l.precondition,u))return f;const h=l.value.clone(),_=Yv(l.fieldTransforms,g,u);return h.setAll(_),u.convertToFoundDocument(u.version,h).setHasLocalMutations(),null})(n,e,t,s):n instanceof ao?(function(l,u,f,g){if(!kc(l.precondition,u))return f;const h=Yv(l.fieldTransforms,g,u),_=u.data;return _.setAll(nx(l)),_.setAll(h),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,s):(function(l,u,f){return kc(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(n,e,t)}function f1(n,e){let t=null;for(const s of n.fieldTransforms){const r=e.data.field(s.field),l=XT(s.transform,r||null);l!=null&&(t===null&&(t=vn.empty()),t.set(s.field,l))}return t||null}function zv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,r){return s===void 0&&r===void 0||!(!s||!r)&&ea(s,r,((l,u)=>u1(l,u)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Fl extends vd{constructor(e,t,s,r=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ao extends vd{constructor(e,t,s,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function nx(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function jv(n,e,t){const s=new Map;Ze(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],u=l.transform,f=e.data.field(l.field);s.set(l.field,l1(u,f,t[r]))}return s}function Yv(n,e,t){const s=new Map;for(const r of n){const l=r.transform,u=t.data.field(r.field);s.set(r.field,a1(l,u,e))}return s}class ix extends vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h1 extends vd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,t,s,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=r}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&d1(l,e,s[r])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Ml(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Ml(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=$T();return this.mutations.forEach((r=>{const l=e.get(r.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(r.key)?null:f;const g=tx(u,f);g!==null&&s.set(r.key,g),u.isValidDocument()||u.convertToNoDocument(De.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),He())}isEqual(e){return this.batchId===e.batchId&&ea(this.mutations,e.mutations,((t,s)=>zv(t,s)))&&ea(this.baseMutations,e.baseMutations,((t,s)=>zv(t,s)))}}class Kp{constructor(e,t,s,r){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=r}static from(e,t,s){Ze(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let r=(function(){return n1})();const l=e.mutations;for(let u=0;u<l.length;u++)r=r.insert(l[u].key,s[u].version);return new Kp(e,t,s,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m1{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g1{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,je;function y1(n){switch(n){case ie.OK:return Ie(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ie(15467,{code:n})}}function sx(n){if(n===void 0)return ls("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Pt.OK:return ie.OK;case Pt.CANCELLED:return ie.CANCELLED;case Pt.UNKNOWN:return ie.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ie.INTERNAL;case Pt.UNAVAILABLE:return ie.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ie.NOT_FOUND;case Pt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Pt.ABORTED:return ie.ABORTED;case Pt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Pt.DATA_LOSS:return ie.DATA_LOSS;default:return Ie(39323,{code:n})}}(je=Pt||(Pt={}))[je.OK=0]="OK",je[je.CANCELLED=1]="CANCELLED",je[je.UNKNOWN=2]="UNKNOWN",je[je.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",je[je.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",je[je.NOT_FOUND=5]="NOT_FOUND",je[je.ALREADY_EXISTS=6]="ALREADY_EXISTS",je[je.PERMISSION_DENIED=7]="PERMISSION_DENIED",je[je.UNAUTHENTICATED=16]="UNAUTHENTICATED",je[je.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",je[je.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",je[je.ABORTED=10]="ABORTED",je[je.OUT_OF_RANGE=11]="OUT_OF_RANGE",je[je.UNIMPLEMENTED=12]="UNIMPLEMENTED",je[je.INTERNAL=13]="INTERNAL",je[je.UNAVAILABLE=14]="UNAVAILABLE",je[je.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1=new Xs([4294967295,4294967295],0);function Jv(n){const e=v1().encode(n),t=new vT;return t.update(e),new Uint8Array(t.digest())}function Kv(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Xs([t,s],0),new Xs([r,l],0)]}class $p{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new Al(`Invalid padding: ${t}`);if(s<0)throw new Al(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Al(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new Al(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Xs.fromNumber(this.ge)}ye(e,t,s){let r=e.add(t.multiply(Xs.fromNumber(s)));return r.compare(_1)===1&&(r=new Xs([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Jv(e),[s,r]=Kv(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,r,l);if(!this.we(u))return!1}return!0}static create(e,t,s){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new $p(l,r,t);return s.forEach((f=>u.insert(f))),u}insert(e){if(this.ge===0)return;const t=Jv(e),[s,r]=Kv(t);for(let l=0;l<this.hashCount;l++){const u=this.ye(s,r,l);this.Se(u)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class Al extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t,s,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const r=new Map;return r.set(e,Hl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new _d(De.min(),r,new mt(Fe),us(),He())}}class Hl{constructor(e,t,s,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Hl(s,t,He(),He(),He())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t,s,r){this.be=e,this.removedTargetIds=t,this.key=s,this.De=r}}class ox{constructor(e,t){this.targetId=e,this.Ce=t}}class rx{constructor(e,t,s=Wt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=r}}class $v{constructor(){this.ve=0,this.Fe=Qv(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=He(),t=He(),s=He();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:s=s.add(r);break;default:Ie(38017,{changeType:l})}})),new Hl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Qv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class E1{constructor(e){this.Ge=e,this.ze=new Map,this.je=us(),this.Je=bc(),this.He=bc(),this.Ye=new mt(Fe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ie(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,s=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(up(l))if(s===0){const u=new be(l.path);this.et(t,u,nn.newNoDocument(u,De.min()))}else Ze(s===1,20013,{expectedCount:s});else{const u=this._t(t);if(u!==s){const f=this.ut(e),g=f?this.ct(f,e,u):1;if(g!==0){this.it(t);const h=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:r=0},hashCount:l=0}=t;let u,f;try{u=to(s).toUint8Array()}catch(g){if(g instanceof RT)return Zr("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{f=new $p(u,r,l)}catch(g){return Zr(g instanceof Al?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return f.ge===0?null:f}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let r=0;return s.forEach((l=>{const u=this.Ge.ht(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,u)=>{const f=this.ot(u);if(f){if(l.current&&up(f.target)){const g=new be(f.target.path);this.It(g).has(u)||this.Et(u,g)||this.et(u,g,nn.newNoDocument(g,e))}l.Be&&(t.set(u,l.ke()),l.qe())}}));let s=He();this.He.forEach(((l,u)=>{let f=!0;u.forEachWhile((g=>{const h=this.ot(g);return!h||h.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(s=s.add(l))})),this.je.forEach(((l,u)=>u.setReadTime(e)));const r=new _d(e,t,this.Ye,this.je,s);return this.je=us(),this.Je=bc(),this.He=bc(),this.Ye=new mt(Fe),r}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new $v,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ot(Fe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ot(Fe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $v),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function bc(){return new mt(be.comparator)}function Qv(){return new mt(be.comparator)}const T1={asc:"ASCENDING",desc:"DESCENDING"},x1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},S1={and:"AND",or:"OR"};class A1{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function fp(n,e){return n.useProto3Json||fd(e)?e:{value:e}}function Qc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ax(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function b1(n,e){return Qc(n,e.toTimestamp())}function Vi(n){return Ze(!!n,49232),De.fromTimestamp((function(t){const s=eo(t);return new dt(s.seconds,s.nanos)})(n))}function Qp(n,e){return hp(n,e).canonicalString()}function hp(n,e){const t=(function(r){return new lt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function lx(n){const e=lt.fromString(n);return Ze(hx(e),10190,{key:e.toString()}),e}function pp(n,e){return Qp(n.databaseId,e.path)}function zh(n,e){const t=lx(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new be(cx(t))}function ux(n,e){return Qp(n.databaseId,e)}function w1(n){const e=lx(n);return e.length===4?lt.emptyPath():cx(e)}function mp(n){return new lt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cx(n){return Ze(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function Xv(n,e,t){return{name:pp(n,e),fields:t.value.mapValue.fields}}function C1(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ie(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(h,_){return h.useProto3Json?(Ze(_===void 0||typeof _=="string",58123),Wt.fromBase64String(_||"")):(Ze(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),Wt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(h){const _=h.code===void 0?ie.UNKNOWN:sx(h.code);return new ge(_,h.message||"")})(u);t=new rx(s,r,l,f||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const r=zh(n,s.document.name),l=Vi(s.document.updateTime),u=s.document.createTime?Vi(s.document.createTime):De.min(),f=new vn({mapValue:{fields:s.document.fields}}),g=nn.newFoundDocument(r,l,u,f),h=s.targetIds||[],_=s.removedTargetIds||[];t=new Uc(h,_,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const r=zh(n,s.document),l=s.readTime?Vi(s.readTime):De.min(),u=nn.newNoDocument(r,l),f=s.removedTargetIds||[];t=new Uc([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const r=zh(n,s.document),l=s.removedTargetIds||[];t=new Uc([],l,r,null)}else{if(!("filter"in e))return Ie(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:r=0,unchangedNames:l}=s,u=new g1(r,l),f=s.targetId;t=new ox(f,u)}}return t}function I1(n,e){let t;if(e instanceof Fl)t={update:Xv(n,e.key,e.value)};else if(e instanceof ix)t={delete:pp(n,e.key)};else if(e instanceof ao)t={update:Xv(n,e.key,e.data),updateMask:L1(e.fieldMask)};else{if(!(e instanceof h1))return Ie(16599,{Vt:e.type});t={verify:pp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,u){const f=u.transform;if(f instanceof Kc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof ql)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof Bl)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof $c)return{fieldPath:u.field.canonicalString(),increment:f.Ae};throw Ie(20930,{transform:u.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:b1(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie(27497)})(n,e.precondition)),t}function N1(n,e){return n&&n.length>0?(Ze(e!==void 0,14353),n.map((t=>(function(r,l){let u=r.updateTime?Vi(r.updateTime):Vi(l);return u.isEqual(De.min())&&(u=Vi(l)),new c1(u,r.transformResults||[])})(t,e)))):[]}function R1(n,e){return{documents:[ux(n,e.path)]}}function M1(n,e){const t={structuredQuery:{}},s=e.path;let r;e.collectionGroup!==null?(r=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=ux(n,r);const l=(function(h){if(h.length!==0)return fx(ai.create(h,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(h){if(h.length!==0)return h.map((_=>(function(x){return{field:zr(x.field),direction:V1(x.dir)}})(_)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=fp(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function D1(n){let e=w1(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let r=null;if(s>0){Ze(s===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const x=dx(T);return x instanceof ai&&BT(x)?x.getFilters():[x]})(t.where));let u=[];t.orderBy&&(u=(function(T){return T.map((x=>(function(k){return new Ol(jr(k.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(x)))})(t.orderBy));let f=null;t.limit&&(f=(function(T){let x;return x=typeof T=="object"?T.value:T,fd(x)?null:x})(t.limit));let g=null;t.startAt&&(g=(function(T){const x=!!T.before,w=T.values||[];return new Jc(w,x)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const x=!T.before,w=T.values||[];return new Jc(w,x)})(t.endAt)),XC(e,r,u,l,f,"F",g,h)}function P1(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function dx(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=jr(t.unaryFilter.field);return Vt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const r=jr(t.unaryFilter.field);return Vt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=jr(t.unaryFilter.field);return Vt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=jr(t.unaryFilter.field);return Vt.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ie(61313);default:return Ie(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Vt.create(jr(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ie(58110);default:return Ie(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ai.create(t.compositeFilter.filters.map((s=>dx(s))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ie(1026)}})(t.compositeFilter.op))})(n):Ie(30097,{filter:n})}function V1(n){return T1[n]}function k1(n){return x1[n]}function U1(n){return S1[n]}function zr(n){return{fieldPath:n.canonicalString()}}function jr(n){return Xt.fromServerFormat(n.fieldPath)}function fx(n){return n instanceof Vt?(function(t){if(t.op==="=="){if(Ov(t.value))return{unaryFilter:{field:zr(t.field),op:"IS_NAN"}};if(Lv(t.value))return{unaryFilter:{field:zr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ov(t.value))return{unaryFilter:{field:zr(t.field),op:"IS_NOT_NAN"}};if(Lv(t.value))return{unaryFilter:{field:zr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zr(t.field),op:k1(t.op),value:t.value}}})(n):n instanceof ai?(function(t){const s=t.getFilters().map((r=>fx(r)));return s.length===1?s[0]:{compositeFilter:{op:U1(t.op),filters:s}}})(n):Ie(54877,{filter:n})}function L1(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function hx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e,t,s,r,l=De.min(),u=De.min(),f=Wt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=g}withSequenceNumber(e){return new Js(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Js(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e){this.yt=e}}function q1(n){const e=D1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?dp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.Cn=new G1}addToCollectionParentIndex(e,t){return this.Cn.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}deleteAllFieldIndexes(e){return re.resolve()}createTargetIndexes(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve(Zs.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve(Zs.min())}updateCollectionGroup(e,t,s){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class G1{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t]||new Ot(lt.comparator),l=!r.has(s);return this.index[t]=r.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),r=this.index[t];return r&&r.has(s)}getEntries(e){return(this.index[e]||new Ot(lt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},px=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(px,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ia(0)}static cr(){return new ia(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="LruGarbageCollector",F1=1048576;function e_([n,e],[t,s]){const r=Fe(n,t);return r===0?Fe(e,s):r}class H1{constructor(e){this.Ir=e,this.buffer=new Ot(e_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();e_(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class z1{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(Zv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){la(t)?ve(Zv,"Ignoring IndexedDB error during garbage collection: ",t):await aa(t)}await this.Vr(3e5)}))}}class j1{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return re.resolve(dd.ce);const s=new H1(t);return this.mr.forEachTarget(e,(r=>s.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>s.Ar(r))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(Wv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,r,l,u,f,g,h;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,u=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(s=T,f=Date.now(),this.removeTargets(e,s,t)))).next((T=>(l=T,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(h=Date.now(),Fr()<=Ye.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${r} in `+(f-u)+`ms
	Removed ${l} targets in `+(g-f)+`ms
	Removed ${T} documents in `+(h-g)+`ms
Total Duration: ${h-_}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function Y1(n,e){return new j1(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(){this.changes=new Qo((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?re.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t,s,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=r}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(s=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(s!==null&&Ml(s.mutation,r,In.empty(),dt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,He()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=He()){const r=zo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,s).next((l=>{let u=Sl();return l.forEach(((f,g)=>{u=u.insert(f,g.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const s=zo();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,He())))}populateOverlays(e,t,s){const r=[];return s.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,s,r){let l=us();const u=Rl(),f=(function(){return Rl()})();return t.forEach(((g,h)=>{const _=s.get(h.key);r.has(h.key)&&(_===void 0||_.mutation instanceof ao)?l=l.insert(h.key,h):_!==void 0?(u.set(h.key,_.mutation.getFieldMask()),Ml(_.mutation,h,_.mutation.getFieldMask(),dt.now())):u.set(h.key,In.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((h,_)=>u.set(h,_))),t.forEach(((h,_)=>f.set(h,new K1(_,u.get(h)??null)))),f)))}recalculateAndSaveOverlays(e,t){const s=Rl();let r=new mt(((u,f)=>u-f)),l=He();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((g=>{const h=t.get(g);if(h===null)return;let _=s.get(g)||In.empty();_=f.applyToLocalView(h,_),s.set(g,_);const T=(r.get(f.batchId)||He()).add(g);r=r.insert(f.batchId,T)}))})).next((()=>{const u=[],f=r.getReverseIterator();for(;f.hasNext();){const g=f.getNext(),h=g.key,_=g.value,T=$T();_.forEach((x=>{if(!l.has(x)){const w=tx(t.get(x),s.get(x));w!==null&&T.set(x,w),l=l.add(x)}})),u.push(this.documentOverlayCache.saveOverlays(e,h,T))}return re.waitFor(u)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,r){return(function(u){return be.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):zT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,r):this.getDocumentsMatchingCollectionQuery(e,t,s,r)}getNextDocuments(e,t,s,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,r).next((l=>{const u=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,r-l.size):re.resolve(zo());let f=Vl,g=l;return u.next((h=>re.forEach(h,((_,T)=>(f<T.largestBatchId&&(f=T.largestBatchId),l.get(_)?re.resolve():this.remoteDocumentCache.getEntry(e,_).next((x=>{g=g.insert(_,x)}))))).next((()=>this.populateOverlays(e,h,l))).next((()=>this.computeViews(e,g,h,He()))).next((_=>({batchId:f,changes:KT(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new be(t)).next((s=>{let r=Sl();return s.isFoundDocument()&&(r=r.insert(s.key,s)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,r){const l=t.collectionGroup;let u=Sl();return this.indexManager.getCollectionParents(e,l).next((f=>re.forEach(f,(g=>{const h=(function(T,x){return new ua(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,h,s,r).next((_=>{_.forEach(((T,x)=>{u=u.insert(T,x)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,s,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,r)))).next((u=>{l.forEach(((g,h)=>{const _=h.getKey();u.get(_)===null&&(u=u.insert(_,nn.newInvalidDocument(_)))}));let f=Sl();return u.forEach(((g,h)=>{const _=l.get(g);_!==void 0&&Ml(_.mutation,h,In.empty(),dt.now()),gd(t,h)&&(f=f.insert(g,h))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return re.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Vi(r.createTime)}})(t)),re.resolve()}getNamedQuery(e,t){return re.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:q1(r.bundledQuery),readTime:Vi(r.readTime)}})(t)),re.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(){this.overlays=new mt(be.comparator),this.qr=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const s=zo();return re.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&s.set(r,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((r,l)=>{this.St(e,t,l)})),re.resolve()}removeOverlaysForBatchId(e,t,s){const r=this.qr.get(s);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),re.resolve()}getOverlaysForCollection(e,t,s){const r=zo(),l=t.length+1,u=new be(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const g=f.getNext().value,h=g.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===l&&g.largestBatchId>s&&r.set(g.getKey(),g)}return re.resolve(r)}getOverlaysForCollectionGroup(e,t,s,r){let l=new mt(((h,_)=>h-_));const u=this.overlays.getIterator();for(;u.hasNext();){const h=u.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>s){let _=l.get(h.largestBatchId);_===null&&(_=zo(),l=l.insert(h.largestBatchId,_)),_.set(h.getKey(),h)}}const f=zo(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((h,_)=>f.set(h,_))),!(f.size()>=r)););return re.resolve(f)}St(e,t,s){const r=this.overlays.get(s.key);if(r!==null){const u=this.qr.get(r.largestBatchId).delete(s.key);this.qr.set(r.largestBatchId,u)}this.overlays=this.overlays.insert(s.key,new m1(t,s));let l=this.qr.get(t);l===void 0&&(l=He(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return re.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,re.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(){this.Qr=new Ot(Ft.$r),this.Ur=new Ot(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Ft(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new be(new lt([])),s=new Ft(t,e),r=new Ft(t,e+1),l=[];return this.Ur.forEachInRange([s,r],(u=>{this.Gr(u),l.push(u.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new be(new lt([])),s=new Ft(t,e),r=new Ft(t,e+1);let l=He();return this.Ur.forEachInRange([s,r],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new Ft(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return be.comparator(e.key,t.key)||Fe(e.Yr,t.Yr)}static Kr(e,t){return Fe(e.Yr,t.Yr)||be.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ot(Ft.$r)}checkEmpty(e){return re.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new p1(l,t,s,r);this.mutationQueue.push(u);for(const f of r)this.Zr=this.Zr.add(new Ft(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return re.resolve(u)}lookupMutationBatch(e,t){return re.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,r=this.ei(s),l=r<0?0:r;return re.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(this.mutationQueue.length===0?Fp:this.tr-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Ft(t,0),r=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,r],(u=>{const f=this.Xr(u.Yr);l.push(f)})),re.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ot(Fe);return t.forEach((r=>{const l=new Ft(r,0),u=new Ft(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,u],(f=>{s=s.add(f.Yr)}))})),re.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,r=s.length+1;let l=s;be.isDocumentKey(l)||(l=l.child(""));const u=new Ft(new be(l),0);let f=new Ot(Fe);return this.Zr.forEachWhile((g=>{const h=g.key.path;return!!s.isPrefixOf(h)&&(h.length===r&&(f=f.add(g.Yr)),!0)}),u),re.resolve(this.ti(f))}ti(e){const t=[];return e.forEach((s=>{const r=this.Xr(s);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Ze(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return re.forEach(t.mutations,(r=>{const l=new Ft(r.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Ft(t,0),r=this.Zr.firstAfterOrEqual(s);return re.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,re.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(e){this.ri=e,this.docs=(function(){return new mt(be.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,r=this.docs.get(s),l=r?r.size:0,u=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return re.resolve(s?s.document.mutableCopy():nn.newInvalidDocument(t))}getEntries(e,t){let s=us();return t.forEach((r=>{const l=this.docs.get(r);s=s.insert(r,l?l.document.mutableCopy():nn.newInvalidDocument(r))})),re.resolve(s)}getDocumentsMatchingQuery(e,t,s,r){let l=us();const u=t.path,f=new be(u.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(f);for(;g.hasNext();){const{key:h,value:{document:_}}=g.getNext();if(!u.isPrefixOf(h.path))break;h.path.length>u.length+1||NC(IC(_),s)<=0||(r.has(_.key)||gd(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return re.resolve(l)}getAllFromCollectionGroup(e,t,s,r){Ie(9500)}ii(e,t){return re.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new tI(this)}getSize(e){return re.resolve(this.size)}}class tI extends J1{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(s)})),re.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e){this.persistence=e,this.si=new Qo((t=>jp(t)),Yp),this.lastRemoteSnapshotVersion=De.min(),this.highestTargetId=0,this.oi=0,this._i=new Xp,this.targetCount=0,this.ai=ia.ur()}forEachTarget(e,t){return this.si.forEach(((s,r)=>t(r))),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),re.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ia(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Pr(t),re.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,s){let r=0;const l=[];return this.si.forEach(((u,f)=>{f.sequenceNumber<=t&&s.get(f.targetId)===null&&(this.si.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),r++)})),re.waitFor(l).next((()=>r))}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return re.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),re.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((u=>{l.push(r.markPotentiallyOrphaned(e,u))})),re.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),re.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return re.resolve(s)}containsKey(e,t){return re.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,t){this.ui={},this.overlays={},this.ci=new dd(0),this.li=!1,this.li=!0,this.hi=new W1,this.referenceDelegate=e(this),this.Pi=new nI(this),this.indexManager=new B1,this.remoteDocumentCache=(function(r){return new eI(r)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new O1(t),this.Ii=new Q1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new X1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new Z1(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ve("MemoryPersistence","Starting transaction:",e);const r=new iI(this.ci.next());return this.referenceDelegate.Ei(),s(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return re.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class iI extends MC{constructor(e){super(),this.currentSequenceNumber=e}}class Wp{constructor(e){this.persistence=e,this.Ri=new Xp,this.Vi=null}static mi(e){return new Wp(e)}get fi(){if(this.Vi)return this.Vi;throw Ie(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),re.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),re.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.fi,(s=>{const r=be.fromPath(s);return this.gi(e,r).next((l=>{l||t.removeEntry(r,De.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return re.or([()=>re.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Xc{constructor(e,t){this.persistence=e,this.pi=new Qo((s=>VC(s.path)),((s,r)=>s.isEqual(r))),this.garbageCollector=Y1(this,t)}static mi(e,t){return new Xc(e,t)}Ei(){}di(e){return re.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((r=>s+r))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return re.forEach(this.pi,((s,r)=>this.br(e,s,r).next((l=>l?re.resolve():t(r)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(u=>this.br(e,u,t).next((f=>{f||(s++,l.removeEntry(u,De.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),re.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),re.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Pc(e.data.value)),t}br(e,t,s){return re.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return re.resolve(r!==void 0&&r>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t,s,r){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=r}static As(e,t){let s=He(),r=He();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new Zp(e,t.fromCache,s,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Qb()?8:DC(Kb())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,r){const l={result:null};return this.ys(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ws(e,t,r,s).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new sI;return this.Ss(e,t,u).next((f=>{if(l.result=f,this.Vs)return this.bs(e,t,u,f.size)}))})).next((()=>l.result))}bs(e,t,s,r){return s.documentReadCount<this.fs?(Fr()<=Ye.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",Hr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),re.resolve()):(Fr()<=Ye.DEBUG&&ve("QueryEngine","Query:",Hr(t),"scans",s.documentReadCount,"local documents and returns",r,"documents as results."),s.documentReadCount>this.gs*r?(Fr()<=Ye.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",Hr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Di(t))):re.resolve())}ys(e,t){if(Fv(t))return re.resolve(null);let s=Di(t);return this.indexManager.getIndexType(e,s).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=dp(t,null,"F"),s=Di(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const u=He(...l);return this.ps.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,s).next((g=>{const h=this.Ds(t,f);return this.Cs(t,h,u,g.readTime)?this.ys(e,dp(t,null,"F")):this.vs(e,h,t,g)}))))})))))}ws(e,t,s,r){return Fv(t)||r.isEqual(De.min())?re.resolve(null):this.ps.getDocuments(e,s).next((l=>{const u=this.Ds(t,l);return this.Cs(t,u,s,r)?re.resolve(null):(Fr()<=Ye.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Hr(t)),this.vs(e,u,t,CC(r,Vl)).next((f=>f)))}))}Ds(e,t){let s=new Ot(YT(e));return t.forEach(((r,l)=>{gd(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,r){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,s){return Fr()<=Ye.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",Hr(t)),this.ps.getDocumentsMatchingQuery(e,t,Zs.min(),s)}vs(e,t,s,r){return this.ps.getDocumentsMatchingQuery(e,s,r).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="LocalStore",rI=3e8;class aI{constructor(e,t,s,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new mt(Fe),this.xs=new Qo((l=>jp(l)),Yp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new $1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function lI(n,e,t,s){return new aI(n,e,t,s)}async function gx(n,e){const t=Ve(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let r;return t.mutationQueue.getAllMutationBatches(s).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const u=[],f=[];let g=He();for(const h of r){u.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}for(const h of l){f.push(h.batchId);for(const _ of h.mutations)g=g.add(_.key)}return t.localDocuments.getDocuments(s,g).next((h=>({Ls:h,removedBatchIds:u,addedBatchIds:f})))}))}))}function uI(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(f,g,h,_){const T=h.batch,x=T.keys();let w=re.resolve();return x.forEach((k=>{w=w.next((()=>_.getEntry(g,k))).next((q=>{const P=h.docVersions.get(k);Ze(P!==null,48541),q.version.compareTo(P)<0&&(T.applyToRemoteDocument(q,h),q.isValidDocument()&&(q.setReadTime(h.commitVersion),_.addEntry(q)))}))})),w.next((()=>f.mutationQueue.removeMutationBatch(g,T)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(f){let g=He();for(let h=0;h<f.mutationResults.length;++h)f.mutationResults[h].transformResults.length>0&&(g=g.add(f.batch.mutations[h].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,r)))}))}function yx(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function cI(n,e){const t=Ve(n),s=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const f=[];e.targetChanges.forEach(((_,T)=>{const x=r.get(T);if(!x)return;f.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let w=x.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?w=w.withResumeToken(Wt.EMPTY_BYTE_STRING,De.min()).withLastLimboFreeSnapshotVersion(De.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,s)),r=r.insert(T,w),(function(q,P,H){return q.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=rI?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(x,w,_)&&f.push(t.Pi.updateTargetData(l,w))}));let g=us(),h=He();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),f.push(dI(l,u,e.documentUpdates).next((_=>{g=_.ks,h=_.qs}))),!s.isEqual(De.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));f.push(_)}return re.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,h))).next((()=>g))})).then((l=>(t.Ms=r,l)))}function dI(n,e,t){let s=He(),r=He();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let u=us();return t.forEach(((f,g)=>{const h=l.get(f);g.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(f)),g.isNoDocument()&&g.version.isEqual(De.min())?(e.removeEntry(f,g.readTime),u=u.insert(f,g)):!h.isValidDocument()||g.version.compareTo(h.version)>0||g.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(g),u=u.insert(f,g)):ve(em,"Ignoring outdated watch update for ",f,". Current version:",h.version," Watch version:",g.version)})),{ks:u,qs:r}}))}function fI(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Fp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function hI(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let r;return t.Pi.getTargetData(s,e).next((l=>l?(r=l,re.resolve(r)):t.Pi.allocateTargetId(s).next((u=>(r=new Js(e,u,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,r).next((()=>r)))))))})).then((s=>{const r=t.Ms.get(s.targetId);return(r===null||s.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function gp(n,e,t){const s=Ve(n),r=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(u=>s.persistence.referenceDelegate.removeTarget(u,r)))}catch(u){if(!la(u))throw u;ve(em,`Failed to update sequence numbers for target ${e}: ${u}`)}s.Ms=s.Ms.remove(e),s.xs.delete(r.target)}function t_(n,e,t){const s=Ve(n);let r=De.min(),l=He();return s.persistence.runTransaction("Execute query","readwrite",(u=>(function(g,h,_){const T=Ve(g),x=T.xs.get(_);return x!==void 0?re.resolve(T.Ms.get(x)):T.Pi.getTargetData(h,_)})(s,u,Di(e)).next((f=>{if(f)return r=f.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(u,f.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(u,e,t?r:De.min(),t?l:He()))).next((f=>(pI(s,ZC(e),f),{documents:f,Qs:l})))))}function pI(n,e,t){let s=n.Os.get(e)||De.min();t.forEach(((r,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class n_{constructor(){this.activeTargetIds=o1()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mI{constructor(){this.Mo=new n_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new n_,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="ConnectivityMonitor";class s_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(i_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(i_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc=null;function yp(){return wc===null?wc=(function(){return 268435456+Math.round(2147483648*Math.random())})():wc++,"0x"+wc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="RestConnection",yI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vI{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${r}`,this.Wo=this.databaseId.database===jc?`project_id=${s}`:`project_id=${s}&database_id=${r}`}Go(e,t,s,r,l){const u=yp(),f=this.zo(e,t.toUriEncodedString());ve(jh,`Sending RPC '${e}' ${u}:`,f,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,r,l);const{host:h}=new URL(f),_=Op(h);return this.Jo(e,f,g,s,_).then((T=>(ve(jh,`Received RPC '${e}' ${u}: `,T),T)),(T=>{throw Zr(jh,`RPC '${e}' ${u} failed with error: `,T,"url: ",f,"request:",s),T}))}Ho(e,t,s,r,l,u){return this.Go(e,t,s,r,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ra})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),s&&s.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const s=yI[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="WebChannelConnection";class EI extends vI{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,r,l){const u=yp();return new Promise(((f,g)=>{const h=new _T;h.setWithCredentials(!0),h.listenOnce(ET.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Dc.NO_ERROR:const T=h.getResponseJson();ve(en,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(T)),f(T);break;case Dc.TIMEOUT:ve(en,`RPC '${e}' ${u} timed out`),g(new ge(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Dc.HTTP_ERROR:const x=h.getStatus();if(ve(en,`RPC '${e}' ${u} failed with status:`,x,"response text:",h.getResponseText()),x>0){let w=h.getResponseJson();Array.isArray(w)&&(w=w[0]);const k=w==null?void 0:w.error;if(k&&k.status&&k.message){const q=(function(H){const te=H.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(te)>=0?te:ie.UNKNOWN})(k.status);g(new ge(q,k.message))}else g(new ge(ie.UNKNOWN,"Server responded with status "+h.getStatus()))}else g(new ge(ie.UNAVAILABLE,"Connection failed."));break;default:Ie(9055,{l_:e,streamId:u,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ve(en,`RPC '${e}' ${u} completed.`)}}));const _=JSON.stringify(r);ve(en,`RPC '${e}' ${u} sending request:`,r),h.send(t,"POST",_,s,15)}))}T_(e,t,s){const r=yp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ST(),f=xT(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(g.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const _=l.join("");ve(en,`Creating RPC '${e}' stream ${r}: ${_}`,g);const T=u.createWebChannel(_,g);this.I_(T);let x=!1,w=!1;const k=new _I({Yo:P=>{w?ve(en,`Not sending because RPC '${e}' stream ${r} is closed:`,P):(x||(ve(en,`Opening RPC '${e}' stream ${r} transport.`),T.open(),x=!0),ve(en,`RPC '${e}' stream ${r} sending:`,P),T.send(P))},Zo:()=>T.close()}),q=(P,H,te)=>{P.listen(H,(j=>{try{te(j)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return q(T,xl.EventType.OPEN,(()=>{w||(ve(en,`RPC '${e}' stream ${r} transport opened.`),k.o_())})),q(T,xl.EventType.CLOSE,(()=>{w||(w=!0,ve(en,`RPC '${e}' stream ${r} transport closed`),k.a_(),this.E_(T))})),q(T,xl.EventType.ERROR,(P=>{w||(w=!0,Zr(en,`RPC '${e}' stream ${r} transport errored. Name:`,P.name,"Message:",P.message),k.a_(new ge(ie.UNAVAILABLE,"The operation could not be completed")))})),q(T,xl.EventType.MESSAGE,(P=>{var H;if(!w){const te=P.data[0];Ze(!!te,16349);const j=te,oe=(j==null?void 0:j.error)||((H=j[0])==null?void 0:H.error);if(oe){ve(en,`RPC '${e}' stream ${r} received error:`,oe);const de=oe.status;let ce=(function(R){const O=Pt[R];if(O!==void 0)return sx(O)})(de),D=oe.message;ce===void 0&&(ce=ie.INTERNAL,D="Unknown error status: "+de+" with message "+oe.message),w=!0,k.a_(new ge(ce,D)),T.close()}else ve(en,`RPC '${e}' stream ${r} received:`,te),k.u_(te)}})),q(f,TT.STAT_EVENT,(P=>{P.stat===sp.PROXY?ve(en,`RPC '${e}' stream ${r} detected buffering proxy`):P.stat===sp.NOPROXY&&ve(en,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Yh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n){return new A1(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{constructor(e,t,s=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-s);r>0&&ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="PersistentStream";class _x{constructor(e,t,s,r,l,u,f,g){this.Mi=e,this.S_=s,this.b_=r,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new vx(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(ls(t.toString()),ls("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,r])=>{this.D_===t&&this.G_(s,r)}),(s=>{e((()=>{const r=new ge(ie.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(r)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{s((()=>this.z_(r)))})),this.stream.onMessage((r=>{s((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(o_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ve(o_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class TI extends _x{constructor(e,t,s,r,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,r,u),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=C1(this.serializer,e),s=(function(l){if(!("targetChange"in l))return De.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?De.min():u.readTime?Vi(u.readTime):De.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=mp(this.serializer),t.addTarget=(function(l,u){let f;const g=u.target;if(f=up(g)?{documents:R1(l,g)}:{query:M1(l,g).ft},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=ax(l,u.resumeToken);const h=fp(l,u.expectedCount);h!==null&&(f.expectedCount=h)}else if(u.snapshotVersion.compareTo(De.min())>0){f.readTime=Qc(l,u.snapshotVersion.toTimestamp());const h=fp(l,u.expectedCount);h!==null&&(f.expectedCount=h)}return f})(this.serializer,e);const s=P1(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=mp(this.serializer),t.removeTarget=e,this.q_(t)}}class xI extends _x{constructor(e,t,s,r,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,r,u),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=N1(e.writeResults,e.commitTime),s=Vi(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=mp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>I1(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{}class AI extends SI{constructor(e,t,s,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Go(e,hp(t,s),r,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ie.UNKNOWN,l.toString())}))}Ho(e,t,s,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Ho(e,hp(t,s),r,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ge(ie.UNKNOWN,u.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ls(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="RemoteStore";class wI{constructor(e,t,s,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((u=>{s.enqueueAndForget((async()=>{Xo(this)&&(ve(Ko,"Restarting streams for network reachability change."),await(async function(g){const h=Ve(g);h.Ea.add(4),await zl(h),h.Ra.set("Unknown"),h.Ea.delete(4),await Td(h)})(this))}))})),this.Ra=new bI(s,r)}}async function Td(n){if(Xo(n))for(const e of n.da)await e(!0)}async function zl(n){for(const e of n.da)await e(!1)}function Ex(n,e){const t=Ve(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),sm(t)?im(t):ca(t).O_()&&nm(t,e))}function tm(n,e){const t=Ve(n),s=ca(t);t.Ia.delete(e),s.O_()&&Tx(t,e),t.Ia.size===0&&(s.O_()?s.L_():Xo(t)&&t.Ra.set("Unknown"))}function nm(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(De.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ca(n).Y_(e)}function Tx(n,e){n.Va.Ue(e),ca(n).Z_(e)}function im(n){n.Va=new E1({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),ca(n).start(),n.Ra.ua()}function sm(n){return Xo(n)&&!ca(n).x_()&&n.Ia.size>0}function Xo(n){return Ve(n).Ea.size===0}function xx(n){n.Va=void 0}async function CI(n){n.Ra.set("Online")}async function II(n){n.Ia.forEach(((e,t)=>{nm(n,e)}))}async function NI(n,e){xx(n),sm(n)?(n.Ra.ha(e),im(n)):n.Ra.set("Unknown")}async function RI(n,e,t){if(n.Ra.set("Online"),e instanceof rx&&e.state===2&&e.cause)try{await(async function(r,l){const u=l.cause;for(const f of l.targetIds)r.Ia.has(f)&&(await r.remoteSyncer.rejectListen(f,u),r.Ia.delete(f),r.Va.removeTarget(f))})(n,e)}catch(s){ve(Ko,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Wc(n,s)}else if(e instanceof Uc?n.Va.Ze(e):e instanceof ox?n.Va.st(e):n.Va.tt(e),!t.isEqual(De.min()))try{const s=await yx(n.localStore);t.compareTo(s)>=0&&await(function(l,u){const f=l.Va.Tt(u);return f.targetChanges.forEach(((g,h)=>{if(g.resumeToken.approximateByteSize()>0){const _=l.Ia.get(h);_&&l.Ia.set(h,_.withResumeToken(g.resumeToken,u))}})),f.targetMismatches.forEach(((g,h)=>{const _=l.Ia.get(g);if(!_)return;l.Ia.set(g,_.withResumeToken(Wt.EMPTY_BYTE_STRING,_.snapshotVersion)),Tx(l,g);const T=new Js(_.target,g,h,_.sequenceNumber);nm(l,T)})),l.remoteSyncer.applyRemoteEvent(f)})(n,t)}catch(s){ve(Ko,"Failed to raise snapshot:",s),await Wc(n,s)}}async function Wc(n,e,t){if(!la(e))throw e;n.Ea.add(1),await zl(n),n.Ra.set("Offline"),t||(t=()=>yx(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve(Ko,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Td(n)}))}function Sx(n,e){return e().catch((t=>Wc(n,t,e)))}async function xd(n){const e=Ve(n),t=io(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Fp;for(;MI(e);)try{const r=await fI(e.localStore,s);if(r===null){e.Ta.length===0&&t.L_();break}s=r.batchId,DI(e,r)}catch(r){await Wc(e,r)}Ax(e)&&bx(e)}function MI(n){return Xo(n)&&n.Ta.length<10}function DI(n,e){n.Ta.push(e);const t=io(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Ax(n){return Xo(n)&&!io(n).x_()&&n.Ta.length>0}function bx(n){io(n).start()}async function PI(n){io(n).ra()}async function VI(n){const e=io(n);for(const t of n.Ta)e.ea(t.mutations)}async function kI(n,e,t){const s=n.Ta.shift(),r=Kp.from(s,e,t);await Sx(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await xd(n)}async function UI(n,e){e&&io(n).X_&&await(async function(s,r){if((function(u){return y1(u)&&u!==ie.ABORTED})(r.code)){const l=s.Ta.shift();io(s).B_(),await Sx(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,r))),await xd(s)}})(n,e),Ax(n)&&bx(n)}async function r_(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),ve(Ko,"RemoteStore received new credentials");const s=Xo(t);t.Ea.add(3),await zl(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Td(t)}async function LI(n,e){const t=Ve(n);e?(t.Ea.delete(2),await Td(t)):e||(t.Ea.add(2),await zl(t),t.Ra.set("Unknown"))}function ca(n){return n.ma||(n.ma=(function(t,s,r){const l=Ve(t);return l.sa(),new TI(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:CI.bind(null,n),t_:II.bind(null,n),r_:NI.bind(null,n),H_:RI.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),sm(n)?im(n):n.Ra.set("Unknown")):(await n.ma.stop(),xx(n))}))),n.ma}function io(n){return n.fa||(n.fa=(function(t,s,r){const l=Ve(t);return l.sa(),new xI(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:PI.bind(null,n),r_:UI.bind(null,n),ta:VI.bind(null,n),na:kI.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await xd(n)):(await n.fa.stop(),n.Ta.length>0&&(ve(Ko,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(e,t,s,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=r,this.removalCallback=l,this.deferred=new os,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,r,l){const u=Date.now()+s,f=new om(e,t,u,r,l);return f.start(s),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rm(n,e){if(ls("AsyncQueue",`${e}: ${n}`),la(n))return new ge(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{static emptySet(e){return new Qr(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||be.comparator(t.key,s.key):(t,s)=>be.comparator(t.key,s.key),this.keyedMap=Sl(),this.sortedSet=new mt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=s.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new Qr;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this.ga=new mt(be.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ie(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class sa{constructor(e,t,s,r,l,u,f,g,h){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=r,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=g,this.hasCachedResults=h}static fromInitialDocuments(e,t,s,r,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new sa(e,t,Qr.emptySet(t),u,s,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==s[r].type||!t[r].doc.isEqual(s[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class qI{constructor(){this.queries=l_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const r=Ve(t),l=r.queries;r.queries=l_(),l.forEach(((u,f)=>{for(const g of f.Sa)g.onError(s)}))})(this,new ge(ie.ABORTED,"Firestore shutting down"))}}function l_(){return new Qo((n=>jT(n)),md)}async function am(n,e){const t=Ve(n);let s=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(s=2):(l=new OI,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(u){const f=rm(u,`Initialization of query '${Hr(e.query)}' failed`);return void e.onError(f)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&um(t)}async function lm(n,e){const t=Ve(n),s=e.query;let r=3;const l=t.queries.get(s);if(l){const u=l.Sa.indexOf(e);u>=0&&(l.Sa.splice(u,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function BI(n,e){const t=Ve(n);let s=!1;for(const r of e){const l=r.query,u=t.queries.get(l);if(u){for(const f of u.Sa)f.Fa(r)&&(s=!0);u.wa=r}}s&&um(t)}function GI(n,e,t){const s=Ve(n),r=s.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);s.queries.delete(e)}function um(n){n.Ca.forEach((e=>{e.next()}))}var vp,u_;(u_=vp||(vp={})).Ma="default",u_.Cache="cache";class cm{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const r of e.docChanges)r.type!==3&&s.push(r);e=new sa(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=sa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wx{constructor(e){this.key=e}}class Cx{constructor(e){this.key=e}}class FI{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=He(),this.mutatedKeys=He(),this.eu=YT(e),this.tu=new Qr(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new a_,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,u=r,f=!1;const g=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const x=r.get(_),w=gd(this.query,T)?T:null,k=!!x&&this.mutatedKeys.has(x.key),q=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let P=!1;x&&w?x.data.isEqual(w.data)?k!==q&&(s.track({type:3,doc:w}),P=!0):this.su(x,w)||(s.track({type:2,doc:w}),P=!0,(g&&this.eu(w,g)>0||h&&this.eu(w,h)<0)&&(f=!0)):!x&&w?(s.track({type:0,doc:w}),P=!0):x&&!w&&(s.track({type:1,doc:x}),P=!0,(g||h)&&(f=!0)),P&&(w?(u=u.add(w),l=q?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),s.track({type:1,doc:_})}return{tu:u,iu:s,Cs:f,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const u=e.iu.ya();u.sort(((_,T)=>(function(w,k){const q=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie(20277,{Rt:P})}};return q(w)-q(k)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(s),r=r??!1;const f=t&&!r?this._u():[],g=this.Xa.size===0&&this.current&&!r?1:0,h=g!==this.Za;return this.Za=g,u.length!==0||h?{snapshot:new sa(this.query,e.tu,l,u,e.mutatedKeys,g===0,h,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:f}:{au:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new a_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=He(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new Cx(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new wx(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=He();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return sa.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const dm="SyncEngine";class HI{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class zI{constructor(e){this.key=e,this.hu=!1}}class jI{constructor(e,t,s,r,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.Pu={},this.Tu=new Qo((f=>jT(f)),md),this.Iu=new Map,this.Eu=new Set,this.du=new mt(be.comparator),this.Au=new Map,this.Ru=new Xp,this.Vu={},this.mu=new Map,this.fu=ia.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YI(n,e,t=!0){const s=Px(n);let r;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await Ix(s,e,t,!0),r}async function JI(n,e){const t=Px(n);await Ix(t,e,!0,!1)}async function Ix(n,e,t,s){const r=await hI(n.localStore,Di(e)),l=r.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return s&&(f=await KI(n,e,l,u==="current",r.resumeToken)),n.isPrimaryClient&&t&&Ex(n.remoteStore,r),f}async function KI(n,e,t,s,r){n.pu=(T,x,w)=>(async function(q,P,H,te){let j=P.view.ru(H);j.Cs&&(j=await t_(q.localStore,P.query,!1).then((({documents:D})=>P.view.ru(D,j))));const oe=te&&te.targetChanges.get(P.targetId),de=te&&te.targetMismatches.get(P.targetId)!=null,ce=P.view.applyChanges(j,q.isPrimaryClient,oe,de);return d_(q,P.targetId,ce.au),ce.snapshot})(n,T,x,w);const l=await t_(n.localStore,e,!0),u=new FI(e,l.Qs),f=u.ru(l.documents),g=Hl.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",r),h=u.applyChanges(f,n.isPrimaryClient,g);d_(n,t,h.au);const _=new HI(e,t,u);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function $I(n,e,t){const s=Ve(n),r=s.Tu.get(e),l=s.Iu.get(r.targetId);if(l.length>1)return s.Iu.set(r.targetId,l.filter((u=>!md(u,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(r.targetId),s.sharedClientState.isActiveQueryTarget(r.targetId)||await gp(s.localStore,r.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(r.targetId),t&&tm(s.remoteStore,r.targetId),_p(s,r.targetId)})).catch(aa)):(_p(s,r.targetId),await gp(s.localStore,r.targetId,!0))}async function QI(n,e){const t=Ve(n),s=t.Tu.get(e),r=t.Iu.get(s.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),tm(t.remoteStore,s.targetId))}async function XI(n,e,t){const s=sN(n);try{const r=await(function(u,f){const g=Ve(u),h=dt.now(),_=f.reduce(((w,k)=>w.add(k.key)),He());let T,x;return g.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let k=us(),q=He();return g.Ns.getEntries(w,_).next((P=>{k=P,k.forEach(((H,te)=>{te.isValidDocument()||(q=q.add(H))}))})).next((()=>g.localDocuments.getOverlayedDocuments(w,k))).next((P=>{T=P;const H=[];for(const te of f){const j=f1(te,T.get(te.key).overlayedDocument);j!=null&&H.push(new ao(te.key,j,LT(j.value.mapValue),Pi.exists(!0)))}return g.mutationQueue.addMutationBatch(w,h,H,f)})).next((P=>{x=P;const H=P.applyToLocalDocumentSet(T,q);return g.documentOverlayCache.saveOverlays(w,P.batchId,H)}))})).then((()=>({batchId:x.batchId,changes:KT(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(r.batchId),(function(u,f,g){let h=u.Vu[u.currentUser.toKey()];h||(h=new mt(Fe)),h=h.insert(f,g),u.Vu[u.currentUser.toKey()]=h})(s,r.batchId,t),await jl(s,r.changes),await xd(s.remoteStore)}catch(r){const l=rm(r,"Failed to persist write");t.reject(l)}}async function Nx(n,e){const t=Ve(n);try{const s=await cI(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const u=t.Au.get(l);u&&(Ze(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?u.hu=!0:r.modifiedDocuments.size>0?Ze(u.hu,14607):r.removedDocuments.size>0&&(Ze(u.hu,42227),u.hu=!1))})),await jl(t,s,e)}catch(s){await aa(s)}}function c_(n,e,t){const s=Ve(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const r=[];s.Tu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&r.push(f.snapshot)})),(function(u,f){const g=Ve(u);g.onlineState=f;let h=!1;g.queries.forEach(((_,T)=>{for(const x of T.Sa)x.va(f)&&(h=!0)})),h&&um(g)})(s.eventManager,e),r.length&&s.Pu.H_(r),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function WI(n,e,t){const s=Ve(n);s.sharedClientState.updateQueryState(e,"rejected",t);const r=s.Au.get(e),l=r&&r.key;if(l){let u=new mt(be.comparator);u=u.insert(l,nn.newNoDocument(l,De.min()));const f=He().add(l),g=new _d(De.min(),new Map,new mt(Fe),u,f);await Nx(s,g),s.du=s.du.remove(l),s.Au.delete(e),fm(s)}else await gp(s.localStore,e,!1).then((()=>_p(s,e,t))).catch(aa)}async function ZI(n,e){const t=Ve(n),s=e.batch.batchId;try{const r=await uI(t.localStore,e);Mx(t,s,null),Rx(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await jl(t,r)}catch(r){await aa(r)}}async function eN(n,e,t){const s=Ve(n);try{const r=await(function(u,f){const g=Ve(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let _;return g.mutationQueue.lookupMutationBatch(h,f).next((T=>(Ze(T!==null,37113),_=T.keys(),g.mutationQueue.removeMutationBatch(h,T)))).next((()=>g.mutationQueue.performConsistencyCheck(h))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(h,_,f))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_))).next((()=>g.localDocuments.getDocuments(h,_)))}))})(s.localStore,e);Mx(s,e,t),Rx(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await jl(s,r)}catch(r){await aa(r)}}function Rx(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Mx(n,e,t){const s=Ve(n);let r=s.Vu[s.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),s.Vu[s.currentUser.toKey()]=r}}function _p(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||Dx(n,s)}))}function Dx(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(tm(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),fm(n))}function d_(n,e,t){for(const s of t)s instanceof wx?(n.Ru.addReference(s.key,e),tN(n,s)):s instanceof Cx?(ve(dm,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||Dx(n,s.key)):Ie(19791,{wu:s})}function tN(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ve(dm,"New document in limbo: "+t),n.Eu.add(s),fm(n))}function fm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new be(lt.fromString(e)),s=n.fu.next();n.Au.set(s,new zI(t)),n.du=n.du.insert(t,s),Ex(n.remoteStore,new Js(Di(pd(t.path)),s,"TargetPurposeLimboResolution",dd.ce))}}async function jl(n,e,t){const s=Ve(n),r=[],l=[],u=[];s.Tu.isEmpty()||(s.Tu.forEach(((f,g)=>{u.push(s.pu(g,e,t).then((h=>{var _;if((h||t)&&s.isPrimaryClient){const T=h?!h.fromCache:(_=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:_.current;s.sharedClientState.updateQueryState(g.targetId,T?"current":"not-current")}if(h){r.push(h);const T=Zp.As(g.targetId,h);l.push(T)}})))})),await Promise.all(u),s.Pu.H_(r),await(async function(g,h){const _=Ve(g);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>re.forEach(h,(x=>re.forEach(x.Es,(w=>_.persistence.referenceDelegate.addReference(T,x.targetId,w))).next((()=>re.forEach(x.ds,(w=>_.persistence.referenceDelegate.removeReference(T,x.targetId,w)))))))))}catch(T){if(!la(T))throw T;ve(em,"Failed to update sequence numbers: "+T)}for(const T of h){const x=T.targetId;if(!T.fromCache){const w=_.Ms.get(x),k=w.snapshotVersion,q=w.withLastLimboFreeSnapshotVersion(k);_.Ms=_.Ms.insert(x,q)}}})(s.localStore,l))}async function nN(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){ve(dm,"User change. New user:",e.toKey());const s=await gx(t.localStore,e);t.currentUser=e,(function(l,u){l.mu.forEach((f=>{f.forEach((g=>{g.reject(new ge(ie.CANCELLED,u))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await jl(t,s.Ls)}}function iN(n,e){const t=Ve(n),s=t.Au.get(e);if(s&&s.hu)return He().add(s.key);{let r=He();const l=t.Iu.get(e);if(!l)return r;for(const u of l){const f=t.Tu.get(u);r=r.unionWith(f.view.nu)}return r}}function Px(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WI.bind(null,e),e.Pu.H_=BI.bind(null,e.eventManager),e.Pu.yu=GI.bind(null,e.eventManager),e}function sN(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=eN.bind(null,e),e}class Zc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ed(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return lI(this.persistence,new oI,e.initialUser,this.serializer)}Cu(e){return new mx(Wp.mi,this.serializer)}Du(e){return new mI}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Zc.provider={build:()=>new Zc};class oN extends Zc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ze(this.persistence.referenceDelegate instanceof Xc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new z1(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new mx((s=>Xc.mi(s,t)),this.serializer)}}class Ep{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>c_(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=nN.bind(null,this.syncEngine),await LI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new qI})()}createDatastore(e){const t=Ed(e.databaseInfo.databaseId),s=(function(l){return new EI(l)})(e.databaseInfo);return(function(l,u,f,g){return new AI(l,u,f,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,r,l,u,f){return new wI(s,r,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>c_(this.syncEngine,t,0)),(function(){return s_.v()?new s_:new gI})())}createSyncEngine(e,t){return(function(r,l,u,f,g,h,_){const T=new jI(r,l,u,f,g,h);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Ve(r);ve(Ko,"RemoteStore shutting down."),l.Ea.add(5),await zl(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Ep.provider={build:()=>new Ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ls("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="FirestoreClient";class rN{constructor(e,t,s,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=r,this.user=tn.UNAUTHENTICATED,this.clientId=Gp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async u=>{ve(so,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(s,(u=>(ve(so,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new os;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=rm(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Jh(n,e){n.asyncQueue.verifyOperationInProgress(),ve(so,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async r=>{s.isEqual(r)||(await gx(e.localStore,r),s=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function f_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await aN(n);ve(so,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>r_(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,r)=>r_(e.remoteStore,r))),n._onlineComponents=e}async function aN(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(so,"Using user provided OfflineComponentProvider");try{await Jh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ie.FAILED_PRECONDITION||r.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Zr("Error using user provided cache. Falling back to memory cache: "+t),await Jh(n,new Zc)}}else ve(so,"Using default OfflineComponentProvider"),await Jh(n,new oN(void 0));return n._offlineComponents}async function Vx(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(so,"Using user provided OnlineComponentProvider"),await f_(n,n._uninitializedComponentsProvider._online)):(ve(so,"Using default OnlineComponentProvider"),await f_(n,new Ep))),n._onlineComponents}function lN(n){return Vx(n).then((e=>e.syncEngine))}async function ed(n){const e=await Vx(n),t=e.eventManager;return t.onListen=YI.bind(null,e.syncEngine),t.onUnlisten=$I.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JI.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=QI.bind(null,e.syncEngine),t}function uN(n,e,t={}){const s=new os;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,g,h){const _=new hm({next:x=>{_.Nu(),u.enqueueAndForget((()=>lm(l,T)));const w=x.docs.has(f);!w&&x.fromCache?h.reject(new ge(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&x.fromCache&&g&&g.source==="server"?h.reject(new ge(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(x)},error:x=>h.reject(x)}),T=new cm(pd(f.path),_,{includeMetadataChanges:!0,qa:!0});return am(l,T)})(await ed(n),n.asyncQueue,e,t,s))),s.promise}function cN(n,e,t={}){const s=new os;return n.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,g,h){const _=new hm({next:x=>{_.Nu(),u.enqueueAndForget((()=>lm(l,T))),x.fromCache&&g.source==="server"?h.reject(new ge(ie.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):h.resolve(x)},error:x=>h.reject(x)}),T=new cm(f,_,{includeMetadataChanges:!0,qa:!0});return am(l,T)})(await ed(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="firestore.googleapis.com",p_=!0;class m_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ux,this.ssl=p_}else this.host=e.host,this.ssl=e.ssl??p_;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=px;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<F1)throw new ge(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}wC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=kx(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ge(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,r){return s.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sd{constructor(e,t,s,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new m_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new m_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new gC;switch(s.type){case"firstParty":return new EC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ge(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=h_.get(t);s&&(ve("ComponentProvider","Removing Datastore"),h_.delete(t),s.terminate())})(this),Promise.resolve()}}function dN(n,e,t,s={}){var h;n=zn(n,Sd);const r=Op(e),l=n._getSettings(),u={...l,emulatorOptions:n._getEmulatorOptions()},f=`${e}:${t}`;r&&(Hb(`https://${f}`),Jb("Firestore",!0)),l.host!==Ux&&l.host!==f&&Zr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:f,ssl:r,emulatorOptions:s};if(!Gc(g,u)&&(n._setSettings(g),s.mockUserToken)){let _,T;if(typeof s.mockUserToken=="string")_=s.mockUserToken,T=tn.MOCK_USER;else{_=zb(s.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const x=s.mockUserToken.sub||s.mockUserToken.user_id;if(!x)throw new ge(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new tn(x)}n._authCredentials=new yC(new bT(_,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new lo(this.firestore,e,this._query)}}class vt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vt(this.firestore,e,this._key)}toJSON(){return{type:vt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Gl(t,vt._jsonSchema))return new vt(e,s||null,new be(lt.fromString(t.referencePath)))}}vt._jsonSchemaVersion="firestore/documentReference/1.0",vt._jsonSchema={type:kt("string",vt._jsonSchemaVersion),referencePath:kt("string")};class Ws extends lo{constructor(e,t,s){super(e,t,pd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vt(this.firestore,null,new be(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function Kh(n,e,...t){if(n=Li(n),wT("collection","path",e),n instanceof Sd){const s=lt.fromString(e,...t);return Iv(s),new Ws(n,null,s)}{if(!(n instanceof vt||n instanceof Ws))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(lt.fromString(e,...t));return Iv(s),new Ws(n.firestore,null,s)}}function Go(n,e,...t){if(n=Li(n),arguments.length===1&&(e=Gp.newId()),wT("doc","path",e),n instanceof Sd){const s=lt.fromString(e,...t);return Cv(s),new vt(n,null,new be(s))}{if(!(n instanceof vt||n instanceof Ws))throw new ge(ie.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(lt.fromString(e,...t));return Cv(s),new vt(n.firestore,n instanceof Ws?n.converter:null,new be(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g_="AsyncQueue";class y_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new vx(this,"async_queue_retry"),this._c=()=>{const s=Yh();s&&ve(g_,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Yh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Yh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new os;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!la(e))throw e;ve(g_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,ls("INTERNAL UNHANDLED ERROR: ",v_(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=om.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Ie(47125,{Pc:v_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function v_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const r=t;for(const l of s)if(l in r&&typeof r[l]=="function")return!0;return!1})(n,["next","error","complete"])}class $o extends Sd{constructor(e,t,s,r){super(e,t,s,r),this.type="firestore",this._queue=new y_,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new y_(e),this._firestoreClient=void 0,await e}}}function fN(n,e){const t=typeof n=="object"?n:iC(),s=typeof n=="string"?n:jc,r=Ww(t,"firestore").getImmediate({identifier:s});if(!r._initialized){const l=Gb("firestore");l&&dN(r,...l)}return r}function Ad(n){if(n._terminated)throw new ge(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||hN(n),n._firestoreClient}function hN(n){var s,r,l;const e=n._freezeSettings(),t=(function(f,g,h,_){return new LC(f,g,h,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,kx(_.experimentalLongPollingOptions),_.useFetchStreams,_.isUsingEmulator)})(n._databaseId,((s=n._app)==null?void 0:s.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new rN(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(f){const g=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(g),_online:g}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hn(Wt.fromBase64String(e))}catch(t){throw new ge(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Gl(e,Hn._jsonSchema))return Hn.fromBase64String(e.bytes)}}Hn._jsonSchemaVersion="firestore/bytes/1.0",Hn._jsonSchema={type:kt("string",Hn._jsonSchemaVersion),bytes:kt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ki._jsonSchemaVersion}}static fromJSON(e){if(Gl(e,ki._jsonSchema))return new ki(e.latitude,e.longitude)}}ki._jsonSchemaVersion="firestore/geoPoint/1.0",ki._jsonSchema={type:kt("string",ki._jsonSchemaVersion),latitude:kt("number"),longitude:kt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,r){if(s.length!==r.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ui._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Gl(e,Ui._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ui(e.vectorValues);throw new ge(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ui._jsonSchemaVersion="firestore/vectorValue/1.0",Ui._jsonSchema={type:kt("string",Ui._jsonSchemaVersion),vectorValues:kt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=/^__.*__$/;class mN{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new Fl(e,this.data,t,this.fieldTransforms)}}class Lx{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ao(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Ox(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie(40011,{Ac:n})}}class mm{constructor(e,t,s,r,l,u){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new mm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return td(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Ox(this.Ac)&&pN.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class gN{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Ed(e)}Cc(e,t,s,r=!1){return new mm({Ac:e,methodName:t,Dc:s,path:Xt.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function gm(n){const e=n._freezeSettings(),t=Ed(n._databaseId);return new gN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yN(n,e,t,s,r,l={}){const u=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);ym("Data must be an object, but it was:",u,s);const f=qx(s,u);let g,h;if(l.merge)g=new In(u.fieldMask),h=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const x=Tp(e,T,t);if(!u.contains(x))throw new ge(ie.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Gx(_,x)||_.push(x)}g=new In(_),h=u.fieldTransforms.filter((T=>g.covers(T.field)))}else g=null,h=u.fieldTransforms;return new mN(new vn(f),g,h)}class wd extends pm{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof wd}}function vN(n,e,t,s){const r=n.Cc(1,e,t);ym("Data must be an object, but it was:",r,s);const l=[],u=vn.empty();ro(s,((g,h)=>{const _=vm(e,g,t);h=Li(h);const T=r.yc(_);if(h instanceof wd)l.push(_);else{const x=Yl(h,T);x!=null&&(l.push(_),u.set(_,x))}}));const f=new In(l);return new Lx(u,f,r.fieldTransforms)}function _N(n,e,t,s,r,l){const u=n.Cc(1,e,t),f=[Tp(e,s,t)],g=[r];if(l.length%2!=0)throw new ge(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<l.length;x+=2)f.push(Tp(e,l[x])),g.push(l[x+1]);const h=[],_=vn.empty();for(let x=f.length-1;x>=0;--x)if(!Gx(h,f[x])){const w=f[x];let k=g[x];k=Li(k);const q=u.yc(w);if(k instanceof wd)h.push(w);else{const P=Yl(k,q);P!=null&&(h.push(w),_.set(w,P))}}const T=new In(h);return new Lx(_,T,u.fieldTransforms)}function EN(n,e,t,s=!1){return Yl(t,n.Cc(s?4:3,e))}function Yl(n,e){if(Bx(n=Li(n)))return ym("Unsupported field value:",e,n),qx(n,e);if(n instanceof pm)return(function(s,r){if(!Ox(r.Ac))throw r.Sc(`${s._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,r){const l=[];let u=0;for(const f of s){let g=Yl(f,r.wc(u));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),u++}return{arrayValue:{values:l}}})(n,e)}return(function(s,r){if((s=Li(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return r1(r.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=dt.fromDate(s);return{timestampValue:Qc(r.serializer,l)}}if(s instanceof dt){const l=new dt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Qc(r.serializer,l)}}if(s instanceof ki)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Hn)return{bytesValue:ax(r.serializer,s._byteString)};if(s instanceof vt){const l=r.databaseId,u=s.firestore._databaseId;if(!u.isEqual(l))throw r.Sc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Qp(s.firestore._databaseId||r.databaseId,s._key.path)}}if(s instanceof Ui)return(function(u,f){return{mapValue:{fields:{[kT]:{stringValue:UT},[Yc]:{arrayValue:{values:u.toArray().map((h=>{if(typeof h!="number")throw f.Sc("VectorValues must only contain numeric values.");return Jp(f.serializer,h)}))}}}}}})(s,r);throw r.Sc(`Unsupported field value: ${cd(s)}`)})(n,e)}function qx(n,e){const t={};return NT(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ro(n,((s,r)=>{const l=Yl(r,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function Bx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof dt||n instanceof ki||n instanceof Hn||n instanceof vt||n instanceof pm||n instanceof Ui)}function ym(n,e,t){if(!Bx(t)||!CT(t)){const s=cd(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function Tp(n,e,t){if((e=Li(e))instanceof bd)return e._internalPath;if(typeof e=="string")return vm(n,e);throw td("Field path arguments must be of type string or ",n,!1,void 0,t)}const TN=new RegExp("[~\\*/\\[\\]]");function vm(n,e,t){if(e.search(TN)>=0)throw td(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new bd(...e.split("."))._internalPath}catch{throw td(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function td(n,e,t,s,r){const l=s&&!s.isEmpty(),u=r!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let g="";return(l||u)&&(g+=" (found",l&&(g+=` in field ${s}`),u&&(g+=` in document ${r}`),g+=")"),new ge(ie.INVALID_ARGUMENT,f+n+g)}function Gx(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,t,s,r,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(_m("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class xN extends Fx{data(){return super.data()}}function _m(n,e){return typeof e=="string"?vm(n,e):e instanceof bd?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Em{}class zx extends Em{}function E_(n,e,...t){let s=[];e instanceof Em&&s.push(e),s=s.concat(t),(function(l){const u=l.filter((g=>g instanceof xm)).length,f=l.filter((g=>g instanceof Tm)).length;if(u>1||u>0&&f>0)throw new ge(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const r of s)n=r._apply(n);return n}class Tm extends zx{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new Tm(e,t,s)}_apply(e){const t=this._parse(e);return jx(e._query,t),new lo(e.firestore,e.converter,cp(e._query,t))}_parse(e){const t=gm(e.firestore);return(function(l,u,f,g,h,_,T){let x;if(h.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ge(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){S_(T,_);const k=[];for(const q of T)k.push(x_(g,l,q));x={arrayValue:{values:k}}}else x=x_(g,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||S_(T,_),x=EN(f,u,T,_==="in"||_==="not-in");return Vt.create(h,_,x)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class xm extends Em{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new xm(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:ai.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let u=r;const f=l.getFlattenedFilters();for(const g of f)jx(u,g),u=cp(u,g)})(e._query,t),new lo(e.firestore,e.converter,cp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Sm extends zx{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Sm(e,t)}_apply(e){const t=(function(r,l,u){if(r.startAt!==null)throw new ge(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ge(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ol(l,u)})(e._query,this._field,this._direction);return new lo(e.firestore,e.converter,(function(r,l){const u=r.explicitOrderBy.concat([l]);return new ua(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function T_(n,e="asc"){const t=e,s=_m("orderBy",n);return Sm._create(s,t)}function x_(n,e,t){if(typeof(t=Li(t))=="string"){if(t==="")throw new ge(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!zT(e)&&t.indexOf("/")!==-1)throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(lt.fromString(t));if(!be.isDocumentKey(s))throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Uv(n,new be(s))}if(t instanceof vt)return Uv(n,t._key);throw new ge(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${cd(t)}.`)}function S_(n,e){if(!Array.isArray(n)||n.length===0)throw new ge(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function jx(n,e){const t=(function(r,l){for(const u of r)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ge(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ge(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class SN{convertValue(e,t="none"){switch(no(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(to(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ro(e,((r,l)=>{s[r]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,r,l;const t=(l=(r=(s=e.fields)==null?void 0:s[Yc].arrayValue)==null?void 0:r.values)==null?void 0:l.map((u=>St(u.doubleValue)));return new Ui(t)}convertGeoPoint(e){return new ki(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=hd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(kl(e));default:return null}}convertTimestamp(e){const t=eo(e);return new dt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=lt.fromString(e);Ze(hx(s),9688,{name:e});const r=new Ul(s.get(1),s.get(3)),l=new be(s.popFirst(5));return r.isEqual(t)||ls(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class bl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jo extends Fx{constructor(e,t,s,r,l,u){super(e,t,s,r,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Lc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(_m("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=jo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}jo._jsonSchemaVersion="firestore/documentSnapshot/1.0",jo._jsonSchema={type:kt("string",jo._jsonSchemaVersion),bundleSource:kt("string","DocumentSnapshot"),bundleName:kt("string"),bundle:kt("string")};class Lc extends jo{data(e={}){return super.data(e)}}class Yo{constructor(e,t,s,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new bl(r.hasPendingWrites,r.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Lc(this._firestore,this._userDataWriter,s.key,s,new bl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map((f=>{const g=new Lc(r._firestore,r._userDataWriter,f.doc.key,f.doc,new bl(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);return f.doc,{type:"added",doc:g,oldIndex:-1,newIndex:u++}}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const g=new Lc(r._firestore,r._userDataWriter,f.doc.key,f.doc,new bl(r._snapshot.mutatedKeys.has(f.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,_=-1;return f.type!==0&&(h=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:bN(f.type),doc:g,oldIndex:h,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(n){n=zn(n,vt);const e=zn(n.firestore,$o);return uN(Ad(e),n._key).then((t=>Jx(e,n,t)))}Yo._jsonSchemaVersion="firestore/querySnapshot/1.0",Yo._jsonSchema={type:kt("string",Yo._jsonSchemaVersion),bundleSource:kt("string","QuerySnapshot"),bundleName:kt("string"),bundle:kt("string")};class Am extends SN{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vt(this.firestore,null,t)}}function A_(n){n=zn(n,lo);const e=zn(n.firestore,$o),t=Ad(e),s=new Am(e);return Hx(n._query),cN(t,n._query).then((r=>new Yo(e,s,n,r)))}function Qh(n,e,t){n=zn(n,vt);const s=zn(n.firestore,$o),r=AN(n.converter,e);return Yx(s,[yN(gm(s),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Pi.none())])}function wN(n,e,t,...s){n=zn(n,vt);const r=zn(n.firestore,$o),l=gm(r);let u;return u=typeof(e=Li(e))=="string"||e instanceof bd?_N(l,"updateDoc",n._key,e,t,s):vN(l,"updateDoc",n._key,e),Yx(r,[u.toMutation(n._key,Pi.exists(!0))])}function CN(n,...e){var g,h,_;n=Li(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||__(e[s])||(t=e[s++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(__(e[s])){const T=e[s];e[s]=(g=T.next)==null?void 0:g.bind(T),e[s+1]=(h=T.error)==null?void 0:h.bind(T),e[s+2]=(_=T.complete)==null?void 0:_.bind(T)}let l,u,f;if(n instanceof vt)u=zn(n.firestore,$o),f=pd(n._key.path),l={next:T=>{e[s]&&e[s](Jx(u,n,T))},error:e[s+1],complete:e[s+2]};else{const T=zn(n,lo);u=zn(T.firestore,$o),f=T._query;const x=new Am(u);l={next:w=>{e[s]&&e[s](new Yo(u,x,T,w))},error:e[s+1],complete:e[s+2]},Hx(n._query)}return(function(x,w,k,q){const P=new hm(q),H=new cm(w,P,k);return x.asyncQueue.enqueueAndForget((async()=>am(await ed(x),H))),()=>{P.Nu(),x.asyncQueue.enqueueAndForget((async()=>lm(await ed(x),H)))}})(Ad(u),f,r,l)}function Yx(n,e){return(function(s,r){const l=new os;return s.asyncQueue.enqueueAndForget((async()=>XI(await lN(s),r,l))),l.promise})(Ad(n),e)}function Jx(n,e,t){const s=t.docs.get(e._key),r=new Am(n);return new jo(n,r,e._key,s,new bl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(r){ra=r})(nC),Hc(new Dl("firestore",((s,{instanceIdentifier:r,options:l})=>{const u=s.getProvider("app").getImmediate(),f=new $o(new vC(s.getProvider("auth-internal")),new TC(u,s.getProvider("app-check-internal")),(function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ge(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ul(h.options.projectId,_)})(u,r),u);return l={useFetchStreams:t,...l},f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),$r(Sv,Av,e),$r(Sv,Av,"esm2020")})();const b_={apiKey:"AIzaSyB-Ppg56VuQ0Ns7NAk-QxM6LTPzYCpJXsc",authDomain:"spades-5434b.firebaseapp.com",projectId:"spades-5434b",storageBucket:"spades-5434b.firebasestorage.app",messagingSenderId:"864634424626",appId:"1:864634424626:web:81682c5a9510f0001d1b2b"};let Fn=null;try{if(b_.apiKey!=="YOUR_API_KEY"){const n=mT(b_);Fn=fN(n)}}catch(n){console.error("Firebase initialization failed",n)}class IN{isFirebaseEnabled(){return Fn!==null}getLocal(e){const t=localStorage.getItem(e);return t?JSON.parse(t):null}setLocal(e,t){localStorage.setItem(e,JSON.stringify(t)),window.dispatchEvent(new Event("storage_update"))}async getUser(e){if(this.isFirebaseEnabled()){const s=Go(Fn,"users",e),r=await $h(s);if(r.exists())return r.data()}return(this.getLocal("users")||{})[e]||null}async userExists(e){if(this.isFirebaseEnabled()){const s=Go(Fn,"users",e);return(await $h(s)).exists()}return!!(this.getLocal("users")||{})[e]}async saveUser(e){this.isFirebaseEnabled()&&await Qh(Go(Fn,"users",e.studentId),e);const t=this.getLocal("users")||{};t[e.studentId]=e,this.setLocal("users",t)}async updatePassword(e,t){this.isFirebaseEnabled()&&await wN(Go(Fn,"users",e),{passwordHash:t,requiresPasswordChange:!1});const s=this.getLocal("users")||{};s[e]&&(s[e].passwordHash=t,s[e].requiresPasswordChange=!1,this.setLocal("users",s))}async getPosts(){if(this.isFirebaseEnabled()){const e=E_(Kh(Fn,"posts"),T_("timestamp","desc"));return(await A_(e)).docs.map(s=>s.data())}return this.getLocal("posts")||[]}async savePost(e){this.isFirebaseEnabled()&&await Qh(Go(Fn,"posts",e.id),e);const t=this.getLocal("posts")||[],s=t.findIndex(r=>r.id===e.id);s>=0?t[s]=e:t.unshift(e),this.setLocal("posts",t)}subscribeToPosts(e){if(this.isFirebaseEnabled()){const s=E_(Kh(Fn,"posts"),T_("timestamp","desc"));return CN(s,r=>{const l=r.docs.map(u=>u.data());e(l)})}const t=()=>{e(this.getLocal("posts")||[])};return window.addEventListener("storage_update",t),()=>window.removeEventListener("storage_update",t)}async getArtPieces(){return this.isFirebaseEnabled()?(await A_(Kh(Fn,"art_pieces"))).docs.map(t=>t.data()):this.getLocal("art_pieces")||[]}async uploadArt(e){this.isFirebaseEnabled()&&await Qh(Go(Fn,"art_pieces",e.id),e);const t=this.getLocal("art_pieces")||[];t.unshift(e),this.setLocal("art_pieces",t)}async getSettings(){if(this.isFirebaseEnabled()){const e=await $h(Go(Fn,"settings","global"));if(e.exists())return e.data()}return this.getLocal("system_settings")||{minRankToPost:"2",allowPublicSignups:!0,allowGuestAccess:!0,emergencyLockdown:!1}}async init(){const e="S253456";if(!await this.userExists(e)){const s={studentId:e,username:"Ace",passwordHash:"ayanokoji",currentRank:"Ace of Spades",currentCard:"A",totalPoints:1e6,joinDate:new Date().toISOString(),lastActive:new Date().toISOString(),yearGroup:13,house:"Phoenix",stats:{postsCreated:0,commentsCreated:0,votesGiven:0,resourcesShared:0,moderationsPerformed:0,minutesStudied:0},isAdmin:!0,requiresPasswordChange:!0,inventory:[]};await this.saveUser(s)}}}const Ne=new IN,oo={"2":{id:"2",name:"2 of Spades",minPoints:0,maxPoints:199,tier:"Prospect",permissions:["view","vote"],voteWeight:1},"3":{id:"3",name:"3 of Spades",minPoints:200,maxPoints:499,tier:"Student",permissions:["view","vote","post","comment"],voteWeight:1},"4":{id:"4",name:"4 of Spades",minPoints:500,maxPoints:999,tier:"Student",permissions:["view","vote","post","comment"],voteWeight:1},"5":{id:"5",name:"5 of Spades",minPoints:1e3,maxPoints:2499,tier:"Student",permissions:["view","vote","post","comment"],voteWeight:1},"6":{id:"6",name:"6 of Spades",minPoints:2500,maxPoints:4999,tier:"Contributor",permissions:["view","vote","post","comment","createPoll","award"],voteWeight:2},"7":{id:"7",name:"7 of Spades",minPoints:5e3,maxPoints:7999,tier:"Contributor",permissions:["view","vote","post","comment","createPoll","award"],voteWeight:2},"8":{id:"8",name:"8 of Spades",minPoints:8e3,maxPoints:11999,tier:"Contributor",permissions:["view","vote","post","comment","createPoll","award"],voteWeight:2},"9":{id:"9",name:"9 of Spades",minPoints:12e3,maxPoints:17999,tier:"Scholar",permissions:["view","vote","post","comment","createPoll","award","submitPolicy","studyGroups"],voteWeight:5},"10":{id:"10",name:"10 of Spades",minPoints:18e3,maxPoints:24999,tier:"Scholar",permissions:["view","vote","post","comment","createPoll","award","submitPolicy","studyGroups"],voteWeight:5},"J":{id:"J",name:"Jack of Spades",minPoints:25e3,maxPoints:34999,tier:"Voice",permissions:["view","vote","post","comment","createPoll","award","submitPolicy","studyGroups","instantPost","nominate"],voteWeight:10},"Q":{id:"Q",name:"Queen of Spades",minPoints:35e3,maxPoints:49999,tier:"Advisor",permissions:["view","vote","post","comment","createPoll","award","submitPolicy","studyGroups","instantPost","nominate","moderate","messageCouncil"],voteWeight:25},"K":{id:"K",name:"King of Spades",minPoints:5e4,maxPoints:74999,tier:"Council",permissions:["view","vote","post","comment","createPoll","award","submitPolicy","studyGroups","instantPost","nominate","moderate","messageCouncil","messageAce","createChallenge","finalModeration"],voteWeight:50},"A":{id:"A",name:"Ace of Spades",minPoints:75e3,maxPoints:9999999,tier:"President",permissions:["all"],voteWeight:100}},nd={POST:0,VOTE_ACTION:10,STUDY_MINUTE:2},rs=({rankId:n,size:e="md",className:t=""})=>{const s={sm:"w-10 h-14 text-[10px] rounded",md:"w-28 h-40 text-xl rounded-xl",lg:"w-56 h-80 text-5xl rounded-2xl"},r="",l=n.replace("",""),u=["J","Q","K","A"].includes(l),f=l==="A";return E.jsxs("div",{className:`
      relative bg-[#080808] shadow-2xl 
      flex flex-col items-center justify-center font-display font-bold select-none
      border border-white/10 overflow-hidden text-neutral-200
      transition-all duration-500 group-hover:border-white/20
      ${s[e]} ${t}
      ${u?"shadow-[0_0_30px_rgba(226,177,91,0.1)] border-brand-gold/20":""}
      ${f?"shadow-[0_0_50px_rgba(217,35,35,0.25)] border-brand-red/40":""}
    `,children:[E.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/brushed-alum.png')] mix-blend-overlay"}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-transparent via-white/5 to-transparent translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000 ease-in-out pointer-events-none z-20"}),E.jsx("div",{className:"absolute inset-0.5 border border-white/5 rounded-[inherit] pointer-events-none"}),E.jsxs("div",{className:"absolute top-1 left-1.5 leading-none flex flex-col items-center",children:[E.jsx("span",{className:`${f?"text-brand-red":u?"text-brand-gold":"text-neutral-300"} font-display tracking-tight`,children:l}),E.jsx("span",{className:"text-[0.5em] text-neutral-600",children:r})]}),E.jsx("div",{className:`relative z-10 transform group-hover:scale-110 transition-transform duration-500 flex items-center justify-center h-full
            ${f?"text-brand-red drop-shadow-[0_0_15px_rgba(217,35,35,0.6)] text-2xl md:text-6xl":u?"text-brand-gold drop-shadow-[0_0_10px_rgba(226,177,91,0.4)]":"text-neutral-800"}
        `,children:E.jsx("span",{className:e==="sm"&&f?"text-xl":"",children:r})}),e==="lg"&&E.jsx("div",{className:`absolute inset-0 flex items-center justify-center opacity-5 font-black text-9xl pointer-events-none 
                ${f?"text-brand-red":"text-white"}`,children:l}),E.jsxs("div",{className:"absolute bottom-1 right-1.5 leading-none flex flex-col items-center rotate-180",children:[E.jsx("span",{className:`${f?"text-brand-red":u?"text-brand-gold":"text-neutral-300"} font-display tracking-tight`,children:l}),E.jsx("span",{className:"text-[0.5em] text-neutral-600",children:r})]}),f&&E.jsxs(E.Fragment,{children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-brand-red/10 to-transparent opacity-50"}),E.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-2/3 bg-gradient-to-t from-brand-red/20 to-transparent blur-xl opacity-30 animate-pulse-slow"})]}),!f&&u&&E.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-brand-gold/5 via-transparent to-brand-gold/5 pointer-events-none"})]})},NN=({user:n,activeTab:e,onTabChange:t,onLogout:s})=>{const r=[{id:"dashboard",label:"Dashboard",icon:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"},{id:"guide",label:"#SYSTEM GUIDE",icon:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},{id:"focus",label:"Focus Realm",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"feed",label:"Global Network",icon:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"},{id:"gallery",label:"The Vault",icon:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"},{id:"council",label:"Council Chamber",icon:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},{id:"leaderboard",label:"Elite Rankings",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"},{id:"settings",label:"Settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}];return n.isAdmin&&r.push({id:"admin",label:"Ace Controls",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"}),E.jsxs(E.Fragment,{children:[E.jsxs("aside",{className:"hidden md:flex flex-col w-72 h-screen fixed left-0 top-0 glass-panel border-r border-white/5 z-50",children:[E.jsxs("div",{className:"p-8 border-b border-white/5 relative overflow-hidden group",children:[E.jsx("div",{className:"absolute top-0 left-0 w-1 h-full bg-brand-red shadow-[0_0_10px_#dc2626]"}),E.jsx("div",{className:"absolute inset-0 bg-brand-red/5 opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),E.jsx("h1",{className:"text-3xl font-display font-black text-white tracking-widest leading-none",children:"SPADES"}),E.jsx("p",{className:"text-[10px] text-brand-red mt-2 uppercase tracking-[0.3em] font-bold",children:"Presidential System"})]}),E.jsx("div",{className:"flex-1 overflow-y-auto py-8 space-y-2 px-4",children:r.map(l=>E.jsxs("button",{onClick:()=>t(l.id),className:`group w-full flex items-center gap-4 px-4 py-4 rounded-xl transition-all duration-300 relative overflow-hidden ${e===l.id?"bg-gradient-to-r from-brand-red/20 to-transparent text-white border border-brand-red/10 shadow-[0_0_15px_rgba(220,38,38,0.1)]":"text-neutral-500 hover:bg-white/5 hover:text-white border border-transparent"}`,children:[E.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-0.5 transition-all duration-300 ${e===l.id?"bg-brand-red opacity-100":"bg-brand-red opacity-0 group-hover:opacity-50"}`}),E.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${e===l.id?"scale-110 text-brand-red":"group-hover:scale-110"} ${l.id==="guide"?"text-brand-gold":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",strokeWidth:1.5,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:l.icon})}),E.jsx("span",{className:`font-display font-medium tracking-wide text-sm ${l.id==="guide"?"text-brand-gold font-bold":""}`,children:l.label})]},l.id))}),E.jsxs("div",{className:"p-4 mx-4 mb-4 rounded-xl bg-black/40 border border-white/10 relative overflow-hidden group hover:border-brand-gold/30 transition-colors duration-500",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-brand-gold/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),E.jsxs("div",{className:"flex gap-4 items-center mb-3",children:[E.jsx("div",{className:"shrink-0 transform group-hover:scale-105 transition-transform duration-500",children:E.jsx(rs,{rankId:n.currentCard,size:"sm"})}),E.jsxs("div",{className:"min-w-0 flex-1",children:[E.jsx("p",{className:"text-sm font-bold text-white truncate font-display tracking-wide",children:n.username}),E.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[E.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-brand-red animate-pulse"}),E.jsxs("p",{className:"text-[10px] text-neutral-400 font-mono truncate",children:[n.totalPoints.toLocaleString()," PTS"]})]})]})]}),E.jsx("button",{type:"button",onClick:l=>{l.preventDefault(),l.stopPropagation(),s()},className:"w-full py-2.5 rounded-lg bg-neutral-900 border border-white/5 hover:bg-red-950/20 hover:text-red-400 hover:border-red-900/30 text-[10px] text-neutral-500 font-bold uppercase tracking-widest transition-all relative z-10",children:"Terminate Session"})]})]}),E.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-black/95 backdrop-blur-xl border-t border-white/10 z-50 pb-safe",children:E.jsx("div",{className:"flex justify-around items-center h-20 px-2 overflow-x-auto",children:r.map(l=>E.jsxs("button",{onClick:()=>t(l.id),className:`flex flex-col items-center justify-center min-w-[60px] h-full space-y-1.5 transition-all duration-300 ${e===l.id?"text-brand-red":"text-neutral-600"}`,children:[E.jsx("div",{className:`p-1.5 rounded-full ${e===l.id?"bg-brand-red/10":""}`,children:E.jsx("svg",{className:`w-5 h-5 ${l.id==="guide"?"text-brand-gold":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:l.icon})})}),E.jsx("span",{className:"text-[9px] uppercase font-bold tracking-wider",children:l.id==="guide"?"GUIDE":l.label.split(" ")[0]})]},l.id))})})]})};var RN={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let MN,DN;function PN(){return{geminiUrl:MN,vertexUrl:DN}}function VN(n,e,t,s){var r,l;if(!(n!=null&&n.baseUrl)){const u=PN();return e?(r=u.vertexUrl)!==null&&r!==void 0?r:t:(l=u.geminiUrl)!==null&&l!==void 0?l:s}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ds{}function me(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(s,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function p(n,e,t){for(let l=0;l<e.length-1;l++){const u=e[l];if(u.endsWith("[]")){const f=u.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${u}`);if(Array.isArray(n[f])){const g=n[f];if(Array.isArray(t))for(let h=0;h<g.length;h++){const _=g[h];p(_,e.slice(l+1),t[h])}else for(const h of g)p(h,e.slice(l+1),t)}return}else if(u.endsWith("[0]")){const f=u.slice(0,-3);f in n||(n[f]=[{}]);const g=n[f];p(g[0],e.slice(l+1),t);return}(!n[u]||typeof n[u]!="object")&&(n[u]={}),n=n[u]}const s=e[e.length-1],r=n[s];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${s}`)}else s==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[s]=t}function d(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let s=0;s<e.length;s++){if(typeof n!="object"||n===null)return t;const r=e[s];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const u=n[l];return Array.isArray(u)?u.map(f=>d(f,e.slice(s+1),t)):t}else return t}else n=n[r]}return n}catch(s){if(s instanceof TypeError)return t;throw s}}function kN(n,e){for(const[t,s]of Object.entries(e)){const r=t.split("."),l=s.split("."),u=new Set;let f=-1;for(let g=0;g<r.length;g++)if(r[g]==="*"){f=g;break}if(f!==-1&&l.length>f)for(let g=f;g<l.length;g++){const h=l[g];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&u.add(h)}xp(n,r,l,0,u)}}function xp(n,e,t,s,r){if(s>=e.length||typeof n!="object"||n===null)return;const l=e[s];if(l.endsWith("[]")){const u=l.slice(0,-2),f=n;if(u in f&&Array.isArray(f[u]))for(const g of f[u])xp(g,e,t,s+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const u=n,f=Object.keys(u).filter(h=>!h.startsWith("_")&&!r.has(h)),g={};for(const h of f)g[h]=u[h];for(const[h,_]of Object.entries(g)){const T=[];for(const x of t.slice(s))x==="*"?T.push(h):T.push(x);p(u,T,_)}for(const h of f)delete u[h]}}else{const u=n;l in u&&xp(u[l],e,t,s+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bm(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UN(n){const e={},t=d(n,["operationName"]);t!=null&&p(e,["operationName"],t);const s=d(n,["resourceName"]);return s!=null&&p(e,["_url","resourceName"],s),e}function LN(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],qN(u)),e}function ON(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],BN(u)),e}function qN(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>GN(u))),p(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function BN(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>FN(u))),p(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function GN(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],KN(t)),e}function FN(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],$N(t)),e}function HN(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function zN(n){const e={},t=d(n,["operationName"]);return t!=null&&p(e,["_url","operationName"],t),e}function jN(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],YN(u)),e}function YN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["parent"]);s!=null&&p(e,["parent"],s);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function Kx(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],JN(u)),e}function JN(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["parent"]);s!=null&&p(e,["parent"],s);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function KN(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&p(e,["videoBytes"],bm(s));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function $N(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],bm(s));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var w_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(w_||(w_={}));var C_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(C_||(C_={}));var I_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(I_||(I_={}));var Ks;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Ks||(Ks={}));var N_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(N_||(N_={}));var R_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(R_||(R_={}));var M_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(M_||(M_={}));var D_;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(D_||(D_={}));var P_;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(P_||(P_={}));var V_;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(V_||(V_={}));var k_;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(k_||(k_={}));var U_;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(U_||(U_={}));var L_;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(L_||(L_={}));var O_;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(O_||(O_={}));var q_;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(q_||(q_={}));var B_;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(B_||(B_={}));var G_;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(G_||(G_={}));var F_;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(F_||(F_={}));var H_;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(H_||(H_={}));var id;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(id||(id={}));var z_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(z_||(z_={}));var j_;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(j_||(j_={}));var Y_;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Y_||(Y_={}));var Sp;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Sp||(Sp={}));var J_;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(J_||(J_={}));var K_;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(K_||(K_={}));var $_;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})($_||($_={}));var Q_;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Q_||(Q_={}));var X_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(X_||(X_={}));var W_;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(W_||(W_={}));var Z_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Z_||(Z_={}));var eE;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(eE||(eE={}));var tE;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(tE||(tE={}));var nE;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(nE||(nE={}));var iE;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(iE||(iE={}));var sE;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(sE||(sE={}));var oE;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(oE||(oE={}));var rE;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(rE||(rE={}));var aE;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(aE||(aE={}));var lE;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(lE||(lE={}));var uE;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(uE||(uE={}));var cE;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(cE||(cE={}));var dE;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(dE||(dE={}));var fE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(fE||(fE={}));var hE;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(hE||(hE={}));var pE;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(pE||(pE={}));var mE;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(mE||(mE={}));var gE;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(gE||(gE={}));var yE;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(yE||(yE={}));var vE;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(vE||(vE={}));var _E;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(_E||(_E={}));var EE;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(EE||(EE={}));var TE;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(TE||(TE={}));var xE;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(xE||(xE={}));var SE;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(SE||(SE={}));var Jr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Jr||(Jr={}));class Ap{constructor(e){const t={};for(const s of e.headers.entries())t[s[0]]=s[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class El{get text(){var e,t,s,r,l,u,f,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",_=!1;const T=[];for(const x of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[w,k]of Object.entries(x))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(k!==null||k!==void 0)&&T.push(w);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;_=!0,h+=x.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?h:void 0}get data(){var e,t,s,r,l,u,f,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const _=[];for(const T of(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)!==null&&g!==void 0?g:[]){for(const[x,w]of Object.entries(T))x!=="inlineData"&&(w!==null||w!==void 0)&&_.push(x);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,s,r,l,u,f,g;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,s,r,l,u,f,g,h;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,s,r,l,u,f,g,h;if(((r=(s=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||s===void 0?void 0:s.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(g=(f=(u=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content)===null||f===void 0?void 0:f.parts)===null||g===void 0?void 0:g.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(h=_==null?void 0:_[0])===null||h===void 0?void 0:h.output}}class AE{}class bE{}class QN{}class XN{}class WN{}class ZN{}class wE{}class CE{}class IE{}class eR{}class sd{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new sd;let r;const l=e;return t?r=ON(l):r=LN(l),Object.assign(s,r),s}}class NE{}class RE{}class ME{}class DE{}class tR{}class nR{}class iR{}class wm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new wm,l=jN(e);return Object.assign(s,l),s}}class sR{}class oR{}class rR{}class PE{}class aR{get text(){var e,t,s;let r="",l=!1;const u=[];for(const f of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[g,h]of Object.entries(f))g!=="text"&&g!=="thought"&&h!==null&&u.push(g);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return u.length>0&&console.warn(`there are non-text parts ${u} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,s;let r="";const l=[];for(const u of(s=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&s!==void 0?s:[]){for(const[f,g]of Object.entries(u))f!=="inlineData"&&g!==null&&l.push(f);u.inlineData&&typeof u.inlineData.data=="string"&&(r+=atob(u.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class lR{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Cm{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const s=new Cm,l=Kx(e);return Object.assign(s,l),s}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $e(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function $x(n,e){const t=$e(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Qx(n){return Array.isArray(n)?n.map(e=>od(e)):[od(n)]}function od(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Xx(n){const e=od(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Wx(n){const e=od(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function VE(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function Zx(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>VE(e)):[VE(n)]}function bp(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function kE(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function UE(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function sn(n){if(n==null)throw new Error("ContentUnion is required");return bp(n)?n:{role:"user",parts:Zx(n)}}function Im(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const s=sn(t);return s.parts&&s.parts.length>0&&s.parts[0].text!==void 0?[s.parts[0].text]:[]});if(n.isVertexAI()){const t=sn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>sn(t)):[sn(e)]}function jn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(kE(n)||UE(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[sn(n)]}const e=[],t=[],s=bp(n[0]);for(const r of n){const l=bp(r);if(l!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(kE(r)||UE(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return s||e.push({role:"user",parts:Zx(t)}),e}function uR(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(s=>s!=="null");if(t.length===1)e.type=Object.values(Ks).includes(t[0].toUpperCase())?t[0].toUpperCase():Ks.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const s of t)e.anyOf.push({type:Object.values(Ks).includes(s.toUpperCase())?s.toUpperCase():Ks.TYPE_UNSPECIFIED})}}function Xr(n){const e={},t=["items"],s=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&uR(n.type,e);for(const[u,f]of Object.entries(n))if(f!=null)if(u=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(Ks).includes(f.toUpperCase())?f.toUpperCase():Ks.TYPE_UNSPECIFIED}else if(t.includes(u))e[u]=Xr(f);else if(s.includes(u)){const g=[];for(const h of f){if(h.type=="null"){e.nullable=!0;continue}g.push(Xr(h))}e[u]=g}else if(r.includes(u)){const g={};for(const[h,_]of Object.entries(f))g[h]=Xr(_);e[u]=g}else{if(u==="additionalProperties")continue;e[u]=f}return e}function Nm(n){return Xr(n)}function Rm(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Mm(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function da(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Xr(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Xr(e.response));return n}function fa(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function cR(n,e,t,s=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===s;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function fs(n,e){if(typeof e!="string")throw new Error("name must be a string");return cR(n,e,"cachedContents")}function eS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function uo(n){return bm(n)}function dR(n){return n!=null&&typeof n=="object"&&"name"in n}function fR(n){return n!=null&&typeof n=="object"&&"video"in n}function hR(n){return n!=null&&typeof n=="object"&&"uri"in n}function tS(n){var e;let t;if(dR(n)&&(t=n.name),!(hR(n)&&(t=n.uri,t===void 0))&&!(fR(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function nS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function iS(n){for(const e of["models","tunedModels","publisherModels"])if(pR(n,e))return n[e];return[]}function pR(n,e){return n!==null&&typeof n=="object"&&e in n}function mR(n,e={}){const t=n,s={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(s.responseJsonSchema=t.outputSchema),e.behavior&&(s.behavior=e.behavior),{functionDeclarations:[s]}}function gR(n,e={}){const t=[],s=new Set;for(const r of n){const l=r.name;if(s.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);s.add(l);const u=mR(r,e);u.functionDeclarations&&t.push(...u.functionDeclarations)}return{functionDeclarations:t}}function sS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const s=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||s!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(s>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function yR(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function oS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const u of r){if(typeof u!="object"||u===null)continue;const g=u.response;if(typeof g!="object"||g===null)continue;if(g.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function ha(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function rS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vR(n){const e={},t=d(n,["responsesFile"]);t!=null&&p(e,["fileName"],t);const s=d(n,["inlinedResponses","inlinedResponses"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>WR(u))),p(e,["inlinedResponses"],l)}const r=d(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["inlinedEmbedContentResponses"],l)}return e}function _R(n){const e={},t=d(n,["predictionsFormat"]);t!=null&&p(e,["format"],t);const s=d(n,["gcsDestination","outputUriPrefix"]);s!=null&&p(e,["gcsUri"],s);const r=d(n,["bigqueryDestination","outputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function ER(n){const e={},t=d(n,["format"]);t!=null&&p(e,["predictionsFormat"],t);const s=d(n,["gcsUri"]);s!=null&&p(e,["gcsDestination","outputUriPrefix"],s);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigqueryDestination","outputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(d(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Oc(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const s=d(n,["metadata","displayName"]);s!=null&&p(e,["displayName"],s);const r=d(n,["metadata","state"]);r!=null&&p(e,["state"],rS(r));const l=d(n,["metadata","createTime"]);l!=null&&p(e,["createTime"],l);const u=d(n,["metadata","endTime"]);u!=null&&p(e,["endTime"],u);const f=d(n,["metadata","updateTime"]);f!=null&&p(e,["updateTime"],f);const g=d(n,["metadata","model"]);g!=null&&p(e,["model"],g);const h=d(n,["metadata","output"]);return h!=null&&p(e,["dest"],vR(oS(h))),e}function wp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const s=d(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=d(n,["state"]);r!=null&&p(e,["state"],rS(r));const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["createTime"]);u!=null&&p(e,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(e,["startTime"],f);const g=d(n,["endTime"]);g!=null&&p(e,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(e,["updateTime"],h);const _=d(n,["model"]);_!=null&&p(e,["model"],_);const T=d(n,["inputConfig"]);T!=null&&p(e,["src"],TR(T));const x=d(n,["outputConfig"]);x!=null&&p(e,["dest"],_R(oS(x)));const w=d(n,["completionStats"]);return w!=null&&p(e,["completionStats"],w),e}function TR(n){const e={},t=d(n,["instancesFormat"]);t!=null&&p(e,["format"],t);const s=d(n,["gcsSource","uris"]);s!=null&&p(e,["gcsUri"],s);const r=d(n,["bigquerySource","inputUri"]);return r!=null&&p(e,["bigqueryUri"],r),e}function xR(n,e){const t={};if(d(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(d(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const s=d(e,["fileName"]);s!=null&&p(t,["fileName"],s);const r=d(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>XR(n,u))),p(t,["requests","requests"],l)}return t}function SR(n){const e={},t=d(n,["format"]);t!=null&&p(e,["instancesFormat"],t);const s=d(n,["gcsUri"]);s!=null&&p(e,["gcsSource","uris"],s);const r=d(n,["bigqueryUri"]);if(r!=null&&p(e,["bigquerySource","inputUri"],r),d(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(d(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function AR(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function bR(n,e){const t={},s=d(e,["name"]);return s!=null&&p(t,["_url","name"],ha(n,s)),t}function wR(n,e){const t={},s=d(e,["name"]);return s!=null&&p(t,["_url","name"],ha(n,s)),t}function CR(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],IR(s));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=d(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const g=d(n,["index"]);g!=null&&p(e,["index"],g);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(w=>w)),p(e,["safetyRatings"],x)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function IR(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["citations"],s)}return e}function aS(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>o2(l))),p(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&p(e,["role"],s),e}function NR(n,e){const t={},s=d(n,["displayName"]);if(e!==void 0&&s!=null&&p(e,["batch","displayName"],s),d(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function RR(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=d(n,["dest"]);return e!==void 0&&r!=null&&p(e,["outputConfig"],ER(yR(r))),t}function LE(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["src"]);r!=null&&p(t,["batch","inputConfig"],xR(n,sS(n,r)));const l=d(e,["config"]);return l!=null&&NR(l,t),t}function MR(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["model"],$e(n,s));const r=d(e,["src"]);r!=null&&p(t,["inputConfig"],SR(sS(n,r)));const l=d(e,["config"]);return l!=null&&RR(l,t),t}function DR(n,e){const t={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&p(e,["batch","displayName"],s),t}function PR(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["src"]);r!=null&&p(t,["batch","inputConfig"],BR(n,r));const l=d(e,["config"]);return l!=null&&DR(l,t),t}function VR(n,e){const t={},s=d(e,["name"]);return s!=null&&p(t,["_url","name"],ha(n,s)),t}function kR(n,e){const t={},s=d(e,["name"]);return s!=null&&p(t,["_url","name"],ha(n,s)),t}function UR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&p(e,["name"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);return l!=null&&p(e,["error"],l),e}function LR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["name"]);s!=null&&p(e,["name"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);return l!=null&&p(e,["error"],l),e}function OR(n,e){const t={},s=d(e,["contents"]);if(s!=null){let l=Im(n,s);Array.isArray(l)&&(l=l.map(u=>u)),p(t,["requests[]","request","content"],l)}const r=d(e,["config"]);return r!=null&&(p(t,["_self"],qR(r,t)),kN(t,{"requests[].*":"requests[].request.*"})),t}function qR(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function BR(n,e){const t={},s=d(e,["fileName"]);s!=null&&p(t,["file_name"],s);const r=d(e,["inlinedRequests"]);return r!=null&&p(t,["requests"],OR(n,r)),t}function GR(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function FR(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const s=d(n,["args"]);s!=null&&p(e,["args"],s);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function HR(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const s=d(n,["allowedFunctionNames"]);if(s!=null&&p(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zR(n,e,t){const s={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],aS(sn(r)));const l=d(e,["temperature"]);l!=null&&p(s,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(s,["topP"],u);const f=d(e,["topK"]);f!=null&&p(s,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(s,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(s,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(s,["responseLogprobs"],T);const x=d(e,["logprobs"]);x!=null&&p(s,["logprobs"],x);const w=d(e,["presencePenalty"]);w!=null&&p(s,["presencePenalty"],w);const k=d(e,["frequencyPenalty"]);k!=null&&p(s,["frequencyPenalty"],k);const q=d(e,["seed"]);q!=null&&p(s,["seed"],q);const P=d(e,["responseMimeType"]);P!=null&&p(s,["responseMimeType"],P);const H=d(e,["responseSchema"]);H!=null&&p(s,["responseSchema"],Nm(H));const te=d(e,["responseJsonSchema"]);if(te!=null&&p(s,["responseJsonSchema"],te),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=d(e,["safetySettings"]);if(t!==void 0&&j!=null){let N=j;Array.isArray(N)&&(N=N.map(ye=>r2(ye))),p(t,["safetySettings"],N)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let N=fa(oe);Array.isArray(N)&&(N=N.map(ye=>l2(da(ye)))),p(t,["tools"],N)}const de=d(e,["toolConfig"]);if(t!==void 0&&de!=null&&p(t,["toolConfig"],a2(de)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=d(e,["cachedContent"]);t!==void 0&&ce!=null&&p(t,["cachedContent"],fs(n,ce));const D=d(e,["responseModalities"]);D!=null&&p(s,["responseModalities"],D);const M=d(e,["mediaResolution"]);M!=null&&p(s,["mediaResolution"],M);const R=d(e,["speechConfig"]);if(R!=null&&p(s,["speechConfig"],Rm(R)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=d(e,["thinkingConfig"]);O!=null&&p(s,["thinkingConfig"],O);const U=d(e,["imageConfig"]);U!=null&&p(s,["imageConfig"],QR(U));const V=d(e,["enableEnhancedCivicAnswers"]);return V!=null&&p(s,["enableEnhancedCivicAnswers"],V),s}function jR(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(h=>CR(h))),p(e,["candidates"],g)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=d(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function YR(n,e){const t={},s=d(e,["name"]);return s!=null&&p(t,["_url","name"],ha(n,s)),t}function JR(n,e){const t={},s=d(e,["name"]);return s!=null&&p(t,["_url","name"],ha(n,s)),t}function KR(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function $R(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function QR(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const s=d(n,["imageSize"]);if(s!=null&&p(e,["imageSize"],s),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function XR(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["request","model"],$e(n,s));const r=d(e,["contents"]);if(r!=null){let f=jn(r);Array.isArray(f)&&(f=f.map(g=>aS(g))),p(t,["request","contents"],f)}const l=d(e,["metadata"]);l!=null&&p(t,["metadata"],l);const u=d(e,["config"]);return u!=null&&p(t,["request","generationConfig"],zR(n,u,d(t,["request"],{}))),t}function WR(n){const e={},t=d(n,["response"]);t!=null&&p(e,["response"],jR(t));const s=d(n,["error"]);return s!=null&&p(e,["error"],s),e}function ZR(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);if(e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),d(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function e2(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);e!==void 0&&r!=null&&p(e,["_query","pageToken"],r);const l=d(n,["filter"]);return e!==void 0&&l!=null&&p(e,["_query","filter"],l),t}function t2(n){const e={},t=d(n,["config"]);return t!=null&&ZR(t,e),e}function n2(n){const e={},t=d(n,["config"]);return t!=null&&e2(t,e),e}function i2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>Oc(u))),p(e,["batchJobs"],l)}return e}function s2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>wp(u))),p(e,["batchJobs"],l)}return e}function o2(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],GR(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],FR(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],AR(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const x=d(n,["videoMetadata"]);return x!=null&&p(e,["videoMetadata"],x),e}function r2(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function a2(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],HR(t));const s=d(n,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],s),e}function l2(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],KR(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],$R(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cs;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(cs||(cs={}));class Wo{constructor(e,t,s,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,s,r)}init(e,t,s){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let u={config:{}};!s||Object.keys(s).length===0?u={config:{}}:typeof s=="object"?u=Object.assign({},s):u=s,u.config&&(u.config.pageToken=t.nextPageToken),this.paramsInternal=u,this.pageInternalSize=(l=(r=u.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class u2 extends ds{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Wo(cs.PAGED_ITEM_BATCH_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=LE(this.apiClient,e),s=t._url,r=me("{model}:batchGenerateContent",s),f=t.batch.inputConfig.requests,g=f.requests,h=[];for(const _ of g){const T=Object.assign({},_);if(T.systemInstruction){const x=T.systemInstruction;delete T.systemInstruction;const w=T.request;w.systemInstruction=x,T.request=w}h.push(T)}return f.requests=h,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const s=t?Object.assign({},t):{},r=Date.now().toString();if(s.displayName||(s.displayName=`genaiBatchJob_${r}`),s.dest===void 0){const l=this.getGcsUri(e),u=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?s.dest=`${l.slice(0,-6)}/dest`:s.dest=`${l}_dest_${r}`;else if(u)s.dest=`${u}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return s}async createInternal(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=MR(this.apiClient,e);return f=me("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>wp(_))}else{const h=LE(this.apiClient,e);return f=me("{model}:batchGenerateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Oc(_))}}async createEmbeddingsInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=PR(this.apiClient,e);return l=me("{model}:asyncBatchEmbedContent",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>Oc(g))}}async get(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=JR(this.apiClient,e);return f=me("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>wp(_))}else{const h=YR(this.apiClient,e);return f=me("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Oc(_))}}async cancel(e){var t,s,r,l;let u="",f={};if(this.apiClient.isVertexAI()){const g=wR(this.apiClient,e);u=me("batchPredictionJobs/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}else{const g=bR(this.apiClient,e);u=me("batches/{name}:cancel",g._url),f=g._query,delete g._url,delete g._query,await this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=n2(e);return f=me("batchPredictionJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=s2(_),x=new PE;return Object.assign(x,T),x})}else{const h=t2(e);return f=me("batches",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=i2(_),x=new PE;return Object.assign(x,T),x})}}async delete(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=kR(this.apiClient,e);return f=me("batchPredictionJobs/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>LR(_))}else{const h=VR(this.apiClient,e);return f=me("batches/{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>UR(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c2(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function OE(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>P2(l))),p(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&p(e,["role"],s),e}function d2(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=d(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let _=jn(u);Array.isArray(_)&&(_=_.map(T=>OE(T))),p(e,["contents"],_)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],OE(sn(f)));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let _=g;Array.isArray(_)&&(_=_.map(T=>k2(T))),p(e,["tools"],_)}const h=d(n,["toolConfig"]);if(e!==void 0&&h!=null&&p(e,["toolConfig"],V2(h)),d(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function f2(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=d(n,["expireTime"]);e!==void 0&&r!=null&&p(e,["expireTime"],r);const l=d(n,["displayName"]);e!==void 0&&l!=null&&p(e,["displayName"],l);const u=d(n,["contents"]);if(e!==void 0&&u!=null){let T=jn(u);Array.isArray(T)&&(T=T.map(x=>x)),p(e,["contents"],T)}const f=d(n,["systemInstruction"]);e!==void 0&&f!=null&&p(e,["systemInstruction"],sn(f));const g=d(n,["tools"]);if(e!==void 0&&g!=null){let T=g;Array.isArray(T)&&(T=T.map(x=>U2(x))),p(e,["tools"],T)}const h=d(n,["toolConfig"]);e!==void 0&&h!=null&&p(e,["toolConfig"],h);const _=d(n,["kmsKeyName"]);return e!==void 0&&_!=null&&p(e,["encryption_spec","kmsKeyName"],_),t}function h2(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["model"],$x(n,s));const r=d(e,["config"]);return r!=null&&d2(r,t),t}function p2(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["model"],$x(n,s));const r=d(e,["config"]);return r!=null&&f2(r,t),t}function m2(n,e){const t={},s=d(e,["name"]);return s!=null&&p(t,["_url","name"],fs(n,s)),t}function g2(n,e){const t={},s=d(e,["name"]);return s!=null&&p(t,["_url","name"],fs(n,s)),t}function y2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function v2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function _2(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function E2(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const s=d(n,["args"]);s!=null&&p(e,["args"],s);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function T2(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const s=d(n,["allowedFunctionNames"]);if(s!=null&&p(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function x2(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const s=d(n,["name"]);s!=null&&p(e,["name"],s);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function S2(n,e){const t={},s=d(e,["name"]);return s!=null&&p(t,["_url","name"],fs(n,s)),t}function A2(n,e){const t={},s=d(e,["name"]);return s!=null&&p(t,["_url","name"],fs(n,s)),t}function b2(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function w2(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function C2(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function I2(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function N2(n){const e={},t=d(n,["config"]);return t!=null&&C2(t,e),e}function R2(n){const e={},t=d(n,["config"]);return t!=null&&I2(t,e),e}function M2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function D2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["cachedContents"],l)}return e}function P2(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],_2(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],E2(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],c2(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const x=d(n,["videoMetadata"]);return x!=null&&p(e,["videoMetadata"],x),e}function V2(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],T2(t));const s=d(n,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],s),e}function k2(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],b2(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],w2(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function U2(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(x=>x2(x))),p(e,["functionDeclarations"],T)}const s=d(n,["retrieval"]);s!=null&&p(e,["retrieval"],s);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function L2(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function O2(n,e){const t={},s=d(n,["ttl"]);e!==void 0&&s!=null&&p(e,["ttl"],s);const r=d(n,["expireTime"]);return e!==void 0&&r!=null&&p(e,["expireTime"],r),t}function q2(n,e){const t={},s=d(e,["name"]);s!=null&&p(t,["_url","name"],fs(n,s));const r=d(e,["config"]);return r!=null&&L2(r,t),t}function B2(n,e){const t={},s=d(e,["name"]);s!=null&&p(t,["_url","name"],fs(n,s));const r=d(e,["config"]);return r!=null&&O2(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class G2 extends ds{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Wo(cs.PAGED_ITEM_CACHED_CONTENTS,s=>this.listInternal(s),await this.listInternal(t),t)}async create(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=p2(this.apiClient,e);return f=me("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=h2(this.apiClient,e);return f=me("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async get(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=A2(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=S2(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async delete(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=g2(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=v2(_),x=new ME;return Object.assign(x,T),x})}else{const h=m2(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=y2(_),x=new ME;return Object.assign(x,T),x})}}async update(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=B2(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>_)}else{const h=q2(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>_)}}async listInternal(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=R2(e);return f=me("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=D2(_),x=new DE;return Object.assign(x,T),x})}else{const h=N2(e);return f=me("cachedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=M2(_),x=new DE;return Object.assign(x,T),x})}}}function rd(n,e){var t={};for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&e.indexOf(s)<0&&(t[s]=n[s]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(n);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(n,s[r])&&(t[s[r]]=n[s[r]]);return t}function qE(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Me(n){return this instanceof Me?(this.v=n,this):new Me(n)}function oi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",u),r[Symbol.asyncIterator]=function(){return this},r;function u(w){return function(k){return Promise.resolve(k).then(w,T)}}function f(w,k){s[w]&&(r[w]=function(q){return new Promise(function(P,H){l.push([w,q,P,H])>1||g(w,q)})},k&&(r[w]=k(r[w])))}function g(w,k){try{h(s[w](k))}catch(q){x(l[0][3],q)}}function h(w){w.value instanceof Me?Promise.resolve(w.value.v).then(_,T):x(l[0][2],w)}function _(w){g("next",w)}function T(w){g("throw",w)}function x(w,k){w(k),l.shift(),l.length&&g(l[0][0],l[0][1])}}function ri(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof qE=="function"?qE(n):n[Symbol.iterator](),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(l){t[l]=n[l]&&function(u){return new Promise(function(f,g){u=n[l](u),r(f,g,u.done,u.value)})}}function r(l,u,f,g){Promise.resolve(g).then(function(h){l({value:h,done:f})},u)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F2(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:lS(t)}function lS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function H2(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function BE(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let s=0;for(;s<t;)if(n[s].role==="user")e.push(n[s]),s++;else{const r=[];let l=!0;for(;s<t&&n[s].role==="model";)r.push(n[s]),l&&!lS(n[s])&&(l=!1),s++;l?e.push(...r):e.pop()}return e}class z2{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new j2(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class j2{constructor(e,t,s,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=s,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),H2(l)}async sendMessage(e){var t;await this.sendPromise;const s=sn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,u,f;const g=await r,h=(u=(l=g.candidates)===null||l===void 0?void 0:l[0])===null||u===void 0?void 0:u.content,_=g.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let x=[];_!=null&&(x=(f=_.slice(T))!==null&&f!==void 0?f:[]);const w=h?[h]:[];this.recordHistory(s,w,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const s=sn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(s),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,s)}getHistory(e=!1){const t=e?BE(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return oi(this,arguments,function*(){var r,l,u,f,g,h;const _=[];try{for(var T=!0,x=ri(e),w;w=yield Me(x.next()),r=w.done,!r;T=!0){f=w.value,T=!1;const k=f;if(F2(k)){const q=(h=(g=k.candidates)===null||g===void 0?void 0:g[0])===null||h===void 0?void 0:h.content;q!==void 0&&_.push(q)}yield yield Me(k)}}catch(k){l={error:k}}finally{try{!T&&!r&&(u=x.return)&&(yield Me(u.call(x)))}finally{if(l)throw l.error}}this.recordHistory(t,_)})}recordHistory(e,t,s){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),s&&s.length>0?this.history.push(...BE(s)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cd extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Cd.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Y2(n){const e={},t=d(n,["file"]);return t!=null&&p(e,["file"],t),e}function J2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function K2(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],tS(t)),e}function $2(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function Q2(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","file"],tS(t)),e}function X2(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function W2(n){const e={},t=d(n,["config"]);return t!=null&&X2(t,e),e}function Z2(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class eM extends ds{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Wo(cs.PAGED_ITEM_FILES,s=>this.listInternal(s),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=W2(e);return l=me("files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=Z2(g),_=new sR;return Object.assign(_,h),_})}}async createInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Y2(e);return l=me("upload/v1beta/files",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const h=J2(g),_=new oR;return Object.assign(_,h),_})}}async get(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=Q2(e);return l=me("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=K2(e);return l=me("files/{file}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=$2(g),_=new rR;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function qc(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function tM(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>yM(l))),p(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&p(e,["role"],s),e}function nM(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function iM(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const s=d(n,["args"]);s!=null&&p(e,["args"],s);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function sM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const s=d(n,["name"]);s!=null&&p(e,["name"],s);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function oM(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const s=d(n,["responseJsonSchema"]);s!=null&&p(e,["responseJsonSchema"],s);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=d(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const g=d(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const x=d(n,["responseLogprobs"]);x!=null&&p(e,["responseLogprobs"],x);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const k=d(n,["responseModalities"]);k!=null&&p(e,["responseModalities"],k);const q=d(n,["responseSchema"]);q!=null&&p(e,["responseSchema"],q);const P=d(n,["routingConfig"]);P!=null&&p(e,["routingConfig"],P);const H=d(n,["seed"]);H!=null&&p(e,["seed"],H);const te=d(n,["speechConfig"]);te!=null&&p(e,["speechConfig"],te);const j=d(n,["stopSequences"]);j!=null&&p(e,["stopSequences"],j);const oe=d(n,["temperature"]);oe!=null&&p(e,["temperature"],oe);const de=d(n,["thinkingConfig"]);de!=null&&p(e,["thinkingConfig"],de);const ce=d(n,["topK"]);ce!=null&&p(e,["topK"],ce);const D=d(n,["topP"]);if(D!=null&&p(e,["topP"],D),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function rM(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function aM(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function lM(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Mm(T));const x=d(n,["thinkingConfig"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","thinkingConfig"],x);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const k=d(n,["systemInstruction"]);e!==void 0&&k!=null&&p(e,["setup","systemInstruction"],tM(sn(k)));const q=d(n,["tools"]);if(e!==void 0&&q!=null){let ce=fa(q);Array.isArray(ce)&&(ce=ce.map(D=>_M(da(D)))),p(e,["setup","tools"],ce)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],vM(P));const H=d(n,["inputAudioTranscription"]);e!==void 0&&H!=null&&p(e,["setup","inputAudioTranscription"],H);const te=d(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&p(e,["setup","outputAudioTranscription"],te);const j=d(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&p(e,["setup","realtimeInputConfig"],j);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&p(e,["setup","contextWindowCompression"],oe);const de=d(n,["proactivity"]);if(e!==void 0&&de!=null&&p(e,["setup","proactivity"],de),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function uM(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],oM(s));const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Mm(T));const x=d(n,["thinkingConfig"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","thinkingConfig"],x);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const k=d(n,["systemInstruction"]);e!==void 0&&k!=null&&p(e,["setup","systemInstruction"],sn(k));const q=d(n,["tools"]);if(e!==void 0&&q!=null){let D=fa(q);Array.isArray(D)&&(D=D.map(M=>EM(da(M)))),p(e,["setup","tools"],D)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],P);const H=d(n,["inputAudioTranscription"]);e!==void 0&&H!=null&&p(e,["setup","inputAudioTranscription"],H);const te=d(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&p(e,["setup","outputAudioTranscription"],te);const j=d(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&p(e,["setup","realtimeInputConfig"],j);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&p(e,["setup","contextWindowCompression"],oe);const de=d(n,["proactivity"]);e!==void 0&&de!=null&&p(e,["setup","proactivity"],de);const ce=d(n,["explicitVadSignal"]);return e!==void 0&&ce!=null&&p(e,["setup","explicitVadSignal"],ce),t}function cM(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["setup","model"],$e(n,s));const r=d(e,["config"]);return r!=null&&p(t,["config"],lM(r,t)),t}function dM(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["setup","model"],$e(n,s));const r=d(e,["config"]);return r!=null&&p(t,["config"],uM(r,t)),t}function fM(n){const e={},t=d(n,["musicGenerationConfig"]);return t!=null&&p(e,["musicGenerationConfig"],t),e}function hM(n){const e={},t=d(n,["weightedPrompts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["weightedPrompts"],s)}return e}function pM(n){const e={},t=d(n,["media"]);if(t!=null){let h=Qx(t);Array.isArray(h)&&(h=h.map(_=>qc(_))),p(e,["mediaChunks"],h)}const s=d(n,["audio"]);s!=null&&p(e,["audio"],qc(Wx(s)));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=d(n,["video"]);l!=null&&p(e,["video"],qc(Xx(l)));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const g=d(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function mM(n){const e={},t=d(n,["media"]);if(t!=null){let h=Qx(t);Array.isArray(h)&&(h=h.map(_=>_)),p(e,["mediaChunks"],h)}const s=d(n,["audio"]);s!=null&&p(e,["audio"],Wx(s));const r=d(n,["audioStreamEnd"]);r!=null&&p(e,["audioStreamEnd"],r);const l=d(n,["video"]);l!=null&&p(e,["video"],Xx(l));const u=d(n,["text"]);u!=null&&p(e,["text"],u);const f=d(n,["activityStart"]);f!=null&&p(e,["activityStart"],f);const g=d(n,["activityEnd"]);return g!=null&&p(e,["activityEnd"],g),e}function gM(n){const e={},t=d(n,["setupComplete"]);t!=null&&p(e,["setupComplete"],t);const s=d(n,["serverContent"]);s!=null&&p(e,["serverContent"],s);const r=d(n,["toolCall"]);r!=null&&p(e,["toolCall"],r);const l=d(n,["toolCallCancellation"]);l!=null&&p(e,["toolCallCancellation"],l);const u=d(n,["usageMetadata"]);u!=null&&p(e,["usageMetadata"],TM(u));const f=d(n,["goAway"]);f!=null&&p(e,["goAway"],f);const g=d(n,["sessionResumptionUpdate"]);g!=null&&p(e,["sessionResumptionUpdate"],g);const h=d(n,["voiceActivityDetectionSignal"]);return h!=null&&p(e,["voiceActivityDetectionSignal"],h),e}function yM(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],nM(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],iM(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],qc(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const x=d(n,["videoMetadata"]);return x!=null&&p(e,["videoMetadata"],x),e}function vM(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _M(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],rM(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],aM(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function EM(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(x=>sM(x))),p(e,["functionDeclarations"],T)}const s=d(n,["retrieval"]);s!=null&&p(e,["retrieval"],s);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function TM(n){const e={},t=d(n,["promptTokenCount"]);t!=null&&p(e,["promptTokenCount"],t);const s=d(n,["cachedContentTokenCount"]);s!=null&&p(e,["cachedContentTokenCount"],s);const r=d(n,["candidatesTokenCount"]);r!=null&&p(e,["responseTokenCount"],r);const l=d(n,["toolUsePromptTokenCount"]);l!=null&&p(e,["toolUsePromptTokenCount"],l);const u=d(n,["thoughtsTokenCount"]);u!=null&&p(e,["thoughtsTokenCount"],u);const f=d(n,["totalTokenCount"]);f!=null&&p(e,["totalTokenCount"],f);const g=d(n,["promptTokensDetails"]);if(g!=null){let w=g;Array.isArray(w)&&(w=w.map(k=>k)),p(e,["promptTokensDetails"],w)}const h=d(n,["cacheTokensDetails"]);if(h!=null){let w=h;Array.isArray(w)&&(w=w.map(k=>k)),p(e,["cacheTokensDetails"],w)}const _=d(n,["candidatesTokensDetails"]);if(_!=null){let w=_;Array.isArray(w)&&(w=w.map(k=>k)),p(e,["responseTokensDetails"],w)}const T=d(n,["toolUsePromptTokensDetails"]);if(T!=null){let w=T;Array.isArray(w)&&(w=w.map(k=>k)),p(e,["toolUsePromptTokensDetails"],w)}const x=d(n,["trafficType"]);return x!=null&&p(e,["trafficType"],x),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xM(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function SM(n){const e={},t=d(n,["content"]);t!=null&&p(e,["content"],t);const s=d(n,["citationMetadata"]);s!=null&&p(e,["citationMetadata"],AM(s));const r=d(n,["tokenCount"]);r!=null&&p(e,["tokenCount"],r);const l=d(n,["finishReason"]);l!=null&&p(e,["finishReason"],l);const u=d(n,["avgLogprobs"]);u!=null&&p(e,["avgLogprobs"],u);const f=d(n,["groundingMetadata"]);f!=null&&p(e,["groundingMetadata"],f);const g=d(n,["index"]);g!=null&&p(e,["index"],g);const h=d(n,["logprobsResult"]);h!=null&&p(e,["logprobsResult"],h);const _=d(n,["safetyRatings"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(w=>w)),p(e,["safetyRatings"],x)}const T=d(n,["urlContextMetadata"]);return T!=null&&p(e,["urlContextMetadata"],T),e}function AM(n){const e={},t=d(n,["citationSources"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>r)),p(e,["citations"],s)}return e}function bM(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["contents"]);if(r!=null){let l=jn(r);Array.isArray(l)&&(l=l.map(u=>u)),p(t,["contents"],l)}return t}function wM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["tokensInfo"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["tokensInfo"],r)}return e}function CM(n){const e={},t=d(n,["values"]);t!=null&&p(e,["values"],t);const s=d(n,["statistics"]);return s!=null&&p(e,["statistics"],IM(s)),e}function IM(n){const e={},t=d(n,["truncated"]);t!=null&&p(e,["truncated"],t);const s=d(n,["token_count"]);return s!=null&&p(e,["tokenCount"],s),e}function Id(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>LD(l))),p(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&p(e,["role"],s),e}function NM(n){const e={},t=d(n,["controlType"]);t!=null&&p(e,["controlType"],t);const s=d(n,["enableControlImageComputation"]);return s!=null&&p(e,["computeControl"],s),e}function RM(n){const e={};if(d(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(d(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(d(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function MM(n,e){const t={},s=d(n,["systemInstruction"]);e!==void 0&&s!=null&&p(e,["systemInstruction"],sn(s));const r=d(n,["tools"]);if(e!==void 0&&r!=null){let u=r;Array.isArray(u)&&(u=u.map(f=>fS(f))),p(e,["tools"],u)}const l=d(n,["generationConfig"]);return e!==void 0&&l!=null&&p(e,["generationConfig"],xD(l)),t}function DM(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["contents"]);if(r!=null){let u=jn(r);Array.isArray(u)&&(u=u.map(f=>Id(f))),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&RM(l),t}function PM(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["contents"]);if(r!=null){let u=jn(r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&MM(l,t),t}function VM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);s!=null&&p(e,["totalTokens"],s);const r=d(n,["cachedContentTokenCount"]);return r!=null&&p(e,["cachedContentTokenCount"],r),e}function kM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["totalTokens"]);return s!=null&&p(e,["totalTokens"],s),e}function UM(n,e){const t={},s=d(e,["model"]);return s!=null&&p(t,["_url","name"],$e(n,s)),t}function LM(n,e){const t={},s=d(e,["model"]);return s!=null&&p(t,["_url","name"],$e(n,s)),t}function OM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function qM(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}function BM(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const x=d(n,["includeRaiReason"]);e!==void 0&&x!=null&&p(e,["parameters","includeRaiReason"],x);const w=d(n,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const k=d(n,["outputMimeType"]);e!==void 0&&k!=null&&p(e,["parameters","outputOptions","mimeType"],k);const q=d(n,["outputCompressionQuality"]);e!==void 0&&q!=null&&p(e,["parameters","outputOptions","compressionQuality"],q);const P=d(n,["addWatermark"]);e!==void 0&&P!=null&&p(e,["parameters","addWatermark"],P);const H=d(n,["labels"]);e!==void 0&&H!=null&&p(e,["labels"],H);const te=d(n,["editMode"]);e!==void 0&&te!=null&&p(e,["parameters","editMode"],te);const j=d(n,["baseSteps"]);return e!==void 0&&j!=null&&p(e,["parameters","editConfig","baseSteps"],j),t}function GM(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>HD(g))),p(t,["instances[0]","referenceImages"],f)}const u=d(e,["config"]);return u!=null&&BM(u,t),t}function FM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Nd(l))),p(e,["generatedImages"],r)}return e}function HM(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&p(e,["requests[]","taskType"],s);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["requests[]","title"],r);const l=d(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&p(e,["requests[]","outputDimensionality"],l),d(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(d(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function zM(n,e){const t={},s=d(n,["taskType"]);e!==void 0&&s!=null&&p(e,["instances[]","task_type"],s);const r=d(n,["title"]);e!==void 0&&r!=null&&p(e,["instances[]","title"],r);const l=d(n,["outputDimensionality"]);e!==void 0&&l!=null&&p(e,["parameters","outputDimensionality"],l);const u=d(n,["mimeType"]);e!==void 0&&u!=null&&p(e,["instances[]","mimeType"],u);const f=d(n,["autoTruncate"]);return e!==void 0&&f!=null&&p(e,["parameters","autoTruncate"],f),t}function jM(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["contents"]);if(r!=null){let f=Im(n,r);Array.isArray(f)&&(f=f.map(g=>g)),p(t,["requests[]","content"],f)}const l=d(e,["config"]);l!=null&&HM(l,t);const u=d(e,["model"]);return u!==void 0&&p(t,["requests[]","model"],$e(n,u)),t}function YM(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["contents"]);if(r!=null){let u=Im(n,r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["instances[]","content"],u)}const l=d(e,["config"]);return l!=null&&zM(l,t),t}function JM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["embeddings"],l)}const r=d(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function KM(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["predictions[]","embeddings"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>CM(u))),p(e,["embeddings"],l)}const r=d(n,["metadata"]);return r!=null&&p(e,["metadata"],r),e}function $M(n){const e={},t=d(n,["endpoint"]);t!=null&&p(e,["name"],t);const s=d(n,["deployedModelId"]);return s!=null&&p(e,["deployedModelId"],s),e}function QM(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function XM(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const s=d(n,["args"]);s!=null&&p(e,["args"],s);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function WM(n){const e={},t=d(n,["mode"]);t!=null&&p(e,["mode"],t);const s=d(n,["allowedFunctionNames"]);if(s!=null&&p(e,["allowedFunctionNames"],s),d(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function ZM(n){const e={};if(d(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=d(n,["description"]);t!=null&&p(e,["description"],t);const s=d(n,["name"]);s!=null&&p(e,["name"],s);const r=d(n,["parameters"]);r!=null&&p(e,["parameters"],r);const l=d(n,["parametersJsonSchema"]);l!=null&&p(e,["parametersJsonSchema"],l);const u=d(n,["response"]);u!=null&&p(e,["response"],u);const f=d(n,["responseJsonSchema"]);return f!=null&&p(e,["responseJsonSchema"],f),e}function eD(n,e,t){const s={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],Id(sn(r)));const l=d(e,["temperature"]);l!=null&&p(s,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(s,["topP"],u);const f=d(e,["topK"]);f!=null&&p(s,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(s,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(s,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(s,["responseLogprobs"],T);const x=d(e,["logprobs"]);x!=null&&p(s,["logprobs"],x);const w=d(e,["presencePenalty"]);w!=null&&p(s,["presencePenalty"],w);const k=d(e,["frequencyPenalty"]);k!=null&&p(s,["frequencyPenalty"],k);const q=d(e,["seed"]);q!=null&&p(s,["seed"],q);const P=d(e,["responseMimeType"]);P!=null&&p(s,["responseMimeType"],P);const H=d(e,["responseSchema"]);H!=null&&p(s,["responseSchema"],Nm(H));const te=d(e,["responseJsonSchema"]);if(te!=null&&p(s,["responseJsonSchema"],te),d(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(d(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=d(e,["safetySettings"]);if(t!==void 0&&j!=null){let N=j;Array.isArray(N)&&(N=N.map(ye=>zD(ye))),p(t,["safetySettings"],N)}const oe=d(e,["tools"]);if(t!==void 0&&oe!=null){let N=fa(oe);Array.isArray(N)&&(N=N.map(ye=>XD(da(ye)))),p(t,["tools"],N)}const de=d(e,["toolConfig"]);if(t!==void 0&&de!=null&&p(t,["toolConfig"],QD(de)),d(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=d(e,["cachedContent"]);t!==void 0&&ce!=null&&p(t,["cachedContent"],fs(n,ce));const D=d(e,["responseModalities"]);D!=null&&p(s,["responseModalities"],D);const M=d(e,["mediaResolution"]);M!=null&&p(s,["mediaResolution"],M);const R=d(e,["speechConfig"]);if(R!=null&&p(s,["speechConfig"],Rm(R)),d(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=d(e,["thinkingConfig"]);O!=null&&p(s,["thinkingConfig"],O);const U=d(e,["imageConfig"]);U!=null&&p(s,["imageConfig"],CD(U));const V=d(e,["enableEnhancedCivicAnswers"]);return V!=null&&p(s,["enableEnhancedCivicAnswers"],V),s}function tD(n,e,t){const s={},r=d(e,["systemInstruction"]);t!==void 0&&r!=null&&p(t,["systemInstruction"],sn(r));const l=d(e,["temperature"]);l!=null&&p(s,["temperature"],l);const u=d(e,["topP"]);u!=null&&p(s,["topP"],u);const f=d(e,["topK"]);f!=null&&p(s,["topK"],f);const g=d(e,["candidateCount"]);g!=null&&p(s,["candidateCount"],g);const h=d(e,["maxOutputTokens"]);h!=null&&p(s,["maxOutputTokens"],h);const _=d(e,["stopSequences"]);_!=null&&p(s,["stopSequences"],_);const T=d(e,["responseLogprobs"]);T!=null&&p(s,["responseLogprobs"],T);const x=d(e,["logprobs"]);x!=null&&p(s,["logprobs"],x);const w=d(e,["presencePenalty"]);w!=null&&p(s,["presencePenalty"],w);const k=d(e,["frequencyPenalty"]);k!=null&&p(s,["frequencyPenalty"],k);const q=d(e,["seed"]);q!=null&&p(s,["seed"],q);const P=d(e,["responseMimeType"]);P!=null&&p(s,["responseMimeType"],P);const H=d(e,["responseSchema"]);H!=null&&p(s,["responseSchema"],Nm(H));const te=d(e,["responseJsonSchema"]);te!=null&&p(s,["responseJsonSchema"],te);const j=d(e,["routingConfig"]);j!=null&&p(s,["routingConfig"],j);const oe=d(e,["modelSelectionConfig"]);oe!=null&&p(s,["modelConfig"],oe);const de=d(e,["safetySettings"]);if(t!==void 0&&de!=null){let F=de;Array.isArray(F)&&(F=F.map(ae=>ae)),p(t,["safetySettings"],F)}const ce=d(e,["tools"]);if(t!==void 0&&ce!=null){let F=fa(ce);Array.isArray(F)&&(F=F.map(ae=>fS(da(ae)))),p(t,["tools"],F)}const D=d(e,["toolConfig"]);t!==void 0&&D!=null&&p(t,["toolConfig"],D);const M=d(e,["labels"]);t!==void 0&&M!=null&&p(t,["labels"],M);const R=d(e,["cachedContent"]);t!==void 0&&R!=null&&p(t,["cachedContent"],fs(n,R));const O=d(e,["responseModalities"]);O!=null&&p(s,["responseModalities"],O);const U=d(e,["mediaResolution"]);U!=null&&p(s,["mediaResolution"],U);const V=d(e,["speechConfig"]);V!=null&&p(s,["speechConfig"],Rm(V));const N=d(e,["audioTimestamp"]);N!=null&&p(s,["audioTimestamp"],N);const ye=d(e,["thinkingConfig"]);ye!=null&&p(s,["thinkingConfig"],ye);const ee=d(e,["imageConfig"]);if(ee!=null&&p(s,["imageConfig"],ID(ee)),d(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return s}function GE(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["contents"]);if(r!=null){let u=jn(r);Array.isArray(u)&&(u=u.map(f=>Id(f))),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&p(t,["generationConfig"],eD(n,l,t)),t}function FE(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["contents"]);if(r!=null){let u=jn(r);Array.isArray(u)&&(u=u.map(f=>f)),p(t,["contents"],u)}const l=d(e,["config"]);return l!=null&&p(t,["generationConfig"],tD(n,l,t)),t}function HE(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let g=s;Array.isArray(g)&&(g=g.map(h=>SM(h))),p(e,["candidates"],g)}const r=d(n,["modelVersion"]);r!=null&&p(e,["modelVersion"],r);const l=d(n,["promptFeedback"]);l!=null&&p(e,["promptFeedback"],l);const u=d(n,["responseId"]);u!=null&&p(e,["responseId"],u);const f=d(n,["usageMetadata"]);return f!=null&&p(e,["usageMetadata"],f),e}function zE(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["candidates"]);if(s!=null){let h=s;Array.isArray(h)&&(h=h.map(_=>_)),p(e,["candidates"],h)}const r=d(n,["createTime"]);r!=null&&p(e,["createTime"],r);const l=d(n,["modelVersion"]);l!=null&&p(e,["modelVersion"],l);const u=d(n,["promptFeedback"]);u!=null&&p(e,["promptFeedback"],u);const f=d(n,["responseId"]);f!=null&&p(e,["responseId"],f);const g=d(n,["usageMetadata"]);return g!=null&&p(e,["usageMetadata"],g),e}function nD(n,e){const t={};if(d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=d(n,["aspectRatio"]);e!==void 0&&r!=null&&p(e,["parameters","aspectRatio"],r);const l=d(n,["guidanceScale"]);if(e!==void 0&&l!=null&&p(e,["parameters","guidanceScale"],l),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const u=d(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&p(e,["parameters","safetySetting"],u);const f=d(n,["personGeneration"]);e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f);const g=d(n,["includeSafetyAttributes"]);e!==void 0&&g!=null&&p(e,["parameters","includeSafetyAttributes"],g);const h=d(n,["includeRaiReason"]);e!==void 0&&h!=null&&p(e,["parameters","includeRaiReason"],h);const _=d(n,["language"]);e!==void 0&&_!=null&&p(e,["parameters","language"],_);const T=d(n,["outputMimeType"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","mimeType"],T);const x=d(n,["outputCompressionQuality"]);if(e!==void 0&&x!=null&&p(e,["parameters","outputOptions","compressionQuality"],x),d(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=d(n,["imageSize"]);if(e!==void 0&&w!=null&&p(e,["parameters","sampleImageSize"],w),d(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function iD(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const r=d(n,["negativePrompt"]);e!==void 0&&r!=null&&p(e,["parameters","negativePrompt"],r);const l=d(n,["numberOfImages"]);e!==void 0&&l!=null&&p(e,["parameters","sampleCount"],l);const u=d(n,["aspectRatio"]);e!==void 0&&u!=null&&p(e,["parameters","aspectRatio"],u);const f=d(n,["guidanceScale"]);e!==void 0&&f!=null&&p(e,["parameters","guidanceScale"],f);const g=d(n,["seed"]);e!==void 0&&g!=null&&p(e,["parameters","seed"],g);const h=d(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&p(e,["parameters","safetySetting"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&p(e,["parameters","includeSafetyAttributes"],T);const x=d(n,["includeRaiReason"]);e!==void 0&&x!=null&&p(e,["parameters","includeRaiReason"],x);const w=d(n,["language"]);e!==void 0&&w!=null&&p(e,["parameters","language"],w);const k=d(n,["outputMimeType"]);e!==void 0&&k!=null&&p(e,["parameters","outputOptions","mimeType"],k);const q=d(n,["outputCompressionQuality"]);e!==void 0&&q!=null&&p(e,["parameters","outputOptions","compressionQuality"],q);const P=d(n,["addWatermark"]);e!==void 0&&P!=null&&p(e,["parameters","addWatermark"],P);const H=d(n,["labels"]);e!==void 0&&H!=null&&p(e,["labels"],H);const te=d(n,["imageSize"]);e!==void 0&&te!=null&&p(e,["parameters","sampleImageSize"],te);const j=d(n,["enhancePrompt"]);return e!==void 0&&j!=null&&p(e,["parameters","enhancePrompt"],j),t}function sD(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&nD(l,t),t}function oD(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["config"]);return l!=null&&iD(l,t),t}function rD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>vD(u))),p(e,["generatedImages"],l)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],cS(r)),e}function aD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>Nd(u))),p(e,["generatedImages"],l)}const r=d(n,["positivePromptSafetyAttributes"]);return r!=null&&p(e,["positivePromptSafetyAttributes"],dS(r)),e}function lD(n,e){const t={},s=d(n,["numberOfVideos"]);if(e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s),d(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(d(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=d(n,["durationSeconds"]);if(e!==void 0&&r!=null&&p(e,["parameters","durationSeconds"],r),d(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=d(n,["aspectRatio"]);e!==void 0&&l!=null&&p(e,["parameters","aspectRatio"],l);const u=d(n,["resolution"]);e!==void 0&&u!=null&&p(e,["parameters","resolution"],u);const f=d(n,["personGeneration"]);if(e!==void 0&&f!=null&&p(e,["parameters","personGeneration"],f),d(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const g=d(n,["negativePrompt"]);e!==void 0&&g!=null&&p(e,["parameters","negativePrompt"],g);const h=d(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&p(e,["parameters","enhancePrompt"],h),d(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const _=d(n,["lastFrame"]);e!==void 0&&_!=null&&p(e,["instances[0]","lastFrame"],Rd(_));const T=d(n,["referenceImages"]);if(e!==void 0&&T!=null){let x=T;Array.isArray(x)&&(x=x.map(w=>cP(w))),p(e,["instances[0]","referenceImages"],x)}if(d(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(d(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function uD(n,e){const t={},s=d(n,["numberOfVideos"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=d(n,["outputGcsUri"]);e!==void 0&&r!=null&&p(e,["parameters","storageUri"],r);const l=d(n,["fps"]);e!==void 0&&l!=null&&p(e,["parameters","fps"],l);const u=d(n,["durationSeconds"]);e!==void 0&&u!=null&&p(e,["parameters","durationSeconds"],u);const f=d(n,["seed"]);e!==void 0&&f!=null&&p(e,["parameters","seed"],f);const g=d(n,["aspectRatio"]);e!==void 0&&g!=null&&p(e,["parameters","aspectRatio"],g);const h=d(n,["resolution"]);e!==void 0&&h!=null&&p(e,["parameters","resolution"],h);const _=d(n,["personGeneration"]);e!==void 0&&_!=null&&p(e,["parameters","personGeneration"],_);const T=d(n,["pubsubTopic"]);e!==void 0&&T!=null&&p(e,["parameters","pubsubTopic"],T);const x=d(n,["negativePrompt"]);e!==void 0&&x!=null&&p(e,["parameters","negativePrompt"],x);const w=d(n,["enhancePrompt"]);e!==void 0&&w!=null&&p(e,["parameters","enhancePrompt"],w);const k=d(n,["generateAudio"]);e!==void 0&&k!=null&&p(e,["parameters","generateAudio"],k);const q=d(n,["lastFrame"]);e!==void 0&&q!=null&&p(e,["instances[0]","lastFrame"],li(q));const P=d(n,["referenceImages"]);if(e!==void 0&&P!=null){let j=P;Array.isArray(j)&&(j=j.map(oe=>dP(oe))),p(e,["instances[0]","referenceImages"],j)}const H=d(n,["mask"]);e!==void 0&&H!=null&&p(e,["instances[0]","mask"],uP(H));const te=d(n,["compressionQuality"]);return e!==void 0&&te!=null&&p(e,["parameters","compressionQuality"],te),t}function cD(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response","generateVideoResponse"]);return u!=null&&p(e,["response"],pD(u)),e}function dD(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],mD(u)),e}function fD(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&p(t,["instances[0]","image"],Rd(l));const u=d(e,["video"]);u!=null&&p(t,["instances[0]","video"],hS(u));const f=d(e,["source"]);f!=null&&gD(f,t);const g=d(e,["config"]);return g!=null&&lD(g,t),t}function hD(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["prompt"]);r!=null&&p(t,["instances[0]","prompt"],r);const l=d(e,["image"]);l!=null&&p(t,["instances[0]","image"],li(l));const u=d(e,["video"]);u!=null&&p(t,["instances[0]","video"],pS(u));const f=d(e,["source"]);f!=null&&yD(f,t);const g=d(e,["config"]);return g!=null&&uD(g,t),t}function pD(n){const e={},t=d(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>ED(u))),p(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function mD(n){const e={},t=d(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(u=>TD(u))),p(e,["generatedVideos"],l)}const s=d(n,["raiMediaFilteredCount"]);s!=null&&p(e,["raiMediaFilteredCount"],s);const r=d(n,["raiMediaFilteredReasons"]);return r!=null&&p(e,["raiMediaFilteredReasons"],r),e}function gD(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],Rd(r));const l=d(n,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],hS(l)),t}function yD(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],li(r));const l=d(n,["video"]);return e!==void 0&&l!=null&&p(e,["instances[0]","video"],pS(l)),t}function vD(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],ND(t));const s=d(n,["raiFilteredReason"]);s!=null&&p(e,["raiFilteredReason"],s);const r=d(n,["_self"]);return r!=null&&p(e,["safetyAttributes"],cS(r)),e}function Nd(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["image"],uS(t));const s=d(n,["raiFilteredReason"]);s!=null&&p(e,["raiFilteredReason"],s);const r=d(n,["_self"]);r!=null&&p(e,["safetyAttributes"],dS(r));const l=d(n,["prompt"]);return l!=null&&p(e,["enhancedPrompt"],l),e}function _D(n){const e={},t=d(n,["_self"]);t!=null&&p(e,["mask"],uS(t));const s=d(n,["labels"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),p(e,["labels"],r)}return e}function ED(n){const e={},t=d(n,["video"]);return t!=null&&p(e,["video"],aP(t)),e}function TD(n){const e={},t=d(n,["_self"]);return t!=null&&p(e,["video"],lP(t)),e}function xD(n){const e={},t=d(n,["modelSelectionConfig"]);t!=null&&p(e,["modelConfig"],t);const s=d(n,["responseJsonSchema"]);s!=null&&p(e,["responseJsonSchema"],s);const r=d(n,["audioTimestamp"]);r!=null&&p(e,["audioTimestamp"],r);const l=d(n,["candidateCount"]);l!=null&&p(e,["candidateCount"],l);const u=d(n,["enableAffectiveDialog"]);u!=null&&p(e,["enableAffectiveDialog"],u);const f=d(n,["frequencyPenalty"]);f!=null&&p(e,["frequencyPenalty"],f);const g=d(n,["logprobs"]);g!=null&&p(e,["logprobs"],g);const h=d(n,["maxOutputTokens"]);h!=null&&p(e,["maxOutputTokens"],h);const _=d(n,["mediaResolution"]);_!=null&&p(e,["mediaResolution"],_);const T=d(n,["presencePenalty"]);T!=null&&p(e,["presencePenalty"],T);const x=d(n,["responseLogprobs"]);x!=null&&p(e,["responseLogprobs"],x);const w=d(n,["responseMimeType"]);w!=null&&p(e,["responseMimeType"],w);const k=d(n,["responseModalities"]);k!=null&&p(e,["responseModalities"],k);const q=d(n,["responseSchema"]);q!=null&&p(e,["responseSchema"],q);const P=d(n,["routingConfig"]);P!=null&&p(e,["routingConfig"],P);const H=d(n,["seed"]);H!=null&&p(e,["seed"],H);const te=d(n,["speechConfig"]);te!=null&&p(e,["speechConfig"],te);const j=d(n,["stopSequences"]);j!=null&&p(e,["stopSequences"],j);const oe=d(n,["temperature"]);oe!=null&&p(e,["temperature"],oe);const de=d(n,["thinkingConfig"]);de!=null&&p(e,["thinkingConfig"],de);const ce=d(n,["topK"]);ce!=null&&p(e,["topK"],ce);const D=d(n,["topP"]);if(D!=null&&p(e,["topP"],D),d(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function SD(n,e){const t={},s=d(e,["model"]);return s!=null&&p(t,["_url","name"],$e(n,s)),t}function AD(n,e){const t={},s=d(e,["model"]);return s!=null&&p(t,["_url","name"],$e(n,s)),t}function bD(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function wD(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function CD(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const s=d(n,["imageSize"]);if(s!=null&&p(e,["imageSize"],s),d(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(d(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function ID(n){const e={},t=d(n,["aspectRatio"]);t!=null&&p(e,["aspectRatio"],t);const s=d(n,["imageSize"]);s!=null&&p(e,["imageSize"],s);const r=d(n,["outputMimeType"]);r!=null&&p(e,["imageOutputOptions","mimeType"],r);const l=d(n,["outputCompressionQuality"]);return l!=null&&p(e,["imageOutputOptions","compressionQuality"],l),e}function ND(n){const e={},t=d(n,["bytesBase64Encoded"]);t!=null&&p(e,["imageBytes"],uo(t));const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function uS(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&p(e,["imageBytes"],uo(s));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function Rd(n){const e={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=d(n,["imageBytes"]);t!=null&&p(e,["bytesBase64Encoded"],uo(t));const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function li(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["gcsUri"],t);const s=d(n,["imageBytes"]);s!=null&&p(e,["bytesBase64Encoded"],uo(s));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function RD(n,e,t){const s={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],nS(n,f)),s}function MD(n,e,t){const s={},r=d(e,["pageSize"]);t!==void 0&&r!=null&&p(t,["_query","pageSize"],r);const l=d(e,["pageToken"]);t!==void 0&&l!=null&&p(t,["_query","pageToken"],l);const u=d(e,["filter"]);t!==void 0&&u!=null&&p(t,["_query","filter"],u);const f=d(e,["queryBase"]);return t!==void 0&&f!=null&&p(t,["_url","models_url"],nS(n,f)),s}function DD(n,e){const t={},s=d(e,["config"]);return s!=null&&RD(n,s,t),t}function PD(n,e){const t={},s=d(e,["config"]);return s!=null&&MD(n,s,t),t}function VD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["_self"]);if(r!=null){let l=iS(r);Array.isArray(l)&&(l=l.map(u=>Cp(u))),p(e,["models"],l)}return e}function kD(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["_self"]);if(r!=null){let l=iS(r);Array.isArray(l)&&(l=l.map(u=>Ip(u))),p(e,["models"],l)}return e}function UD(n){const e={},t=d(n,["maskMode"]);t!=null&&p(e,["maskMode"],t);const s=d(n,["segmentationClasses"]);s!=null&&p(e,["maskClasses"],s);const r=d(n,["maskDilation"]);return r!=null&&p(e,["dilation"],r),e}function Cp(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const s=d(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=d(n,["description"]);r!=null&&p(e,["description"],r);const l=d(n,["version"]);l!=null&&p(e,["version"],l);const u=d(n,["_self"]);u!=null&&p(e,["tunedModelInfo"],WD(u));const f=d(n,["inputTokenLimit"]);f!=null&&p(e,["inputTokenLimit"],f);const g=d(n,["outputTokenLimit"]);g!=null&&p(e,["outputTokenLimit"],g);const h=d(n,["supportedGenerationMethods"]);h!=null&&p(e,["supportedActions"],h);const _=d(n,["temperature"]);_!=null&&p(e,["temperature"],_);const T=d(n,["maxTemperature"]);T!=null&&p(e,["maxTemperature"],T);const x=d(n,["topP"]);x!=null&&p(e,["topP"],x);const w=d(n,["topK"]);w!=null&&p(e,["topK"],w);const k=d(n,["thinking"]);return k!=null&&p(e,["thinking"],k),e}function Ip(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const s=d(n,["displayName"]);s!=null&&p(e,["displayName"],s);const r=d(n,["description"]);r!=null&&p(e,["description"],r);const l=d(n,["versionId"]);l!=null&&p(e,["version"],l);const u=d(n,["deployedModels"]);if(u!=null){let T=u;Array.isArray(T)&&(T=T.map(x=>$M(x))),p(e,["endpoints"],T)}const f=d(n,["labels"]);f!=null&&p(e,["labels"],f);const g=d(n,["_self"]);g!=null&&p(e,["tunedModelInfo"],ZD(g));const h=d(n,["defaultCheckpointId"]);h!=null&&p(e,["defaultCheckpointId"],h);const _=d(n,["checkpoints"]);if(_!=null){let T=_;Array.isArray(T)&&(T=T.map(x=>x)),p(e,["checkpoints"],T)}return e}function LD(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],QM(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],XM(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],xM(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const x=d(n,["videoMetadata"]);return x!=null&&p(e,["videoMetadata"],x),e}function OD(n){const e={},t=d(n,["productImage"]);return t!=null&&p(e,["image"],li(t)),e}function qD(n,e){const t={},s=d(n,["numberOfImages"]);e!==void 0&&s!=null&&p(e,["parameters","sampleCount"],s);const r=d(n,["baseSteps"]);e!==void 0&&r!=null&&p(e,["parameters","baseSteps"],r);const l=d(n,["outputGcsUri"]);e!==void 0&&l!=null&&p(e,["parameters","storageUri"],l);const u=d(n,["seed"]);e!==void 0&&u!=null&&p(e,["parameters","seed"],u);const f=d(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&p(e,["parameters","safetySetting"],f);const g=d(n,["personGeneration"]);e!==void 0&&g!=null&&p(e,["parameters","personGeneration"],g);const h=d(n,["addWatermark"]);e!==void 0&&h!=null&&p(e,["parameters","addWatermark"],h);const _=d(n,["outputMimeType"]);e!==void 0&&_!=null&&p(e,["parameters","outputOptions","mimeType"],_);const T=d(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&p(e,["parameters","outputOptions","compressionQuality"],T);const x=d(n,["enhancePrompt"]);e!==void 0&&x!=null&&p(e,["parameters","enhancePrompt"],x);const w=d(n,["labels"]);return e!==void 0&&w!=null&&p(e,["labels"],w),t}function BD(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["source"]);r!=null&&FD(r,t);const l=d(e,["config"]);return l!=null&&qD(l,t),t}function GD(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>Nd(r))),p(e,["generatedImages"],s)}return e}function FD(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const r=d(n,["personImage"]);e!==void 0&&r!=null&&p(e,["instances[0]","personImage","image"],li(r));const l=d(n,["productImages"]);if(e!==void 0&&l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>OD(f))),p(e,["instances[0]","productImages"],u)}return t}function HD(n){const e={},t=d(n,["referenceImage"]);t!=null&&p(e,["referenceImage"],li(t));const s=d(n,["referenceId"]);s!=null&&p(e,["referenceId"],s);const r=d(n,["referenceType"]);r!=null&&p(e,["referenceType"],r);const l=d(n,["maskImageConfig"]);l!=null&&p(e,["maskImageConfig"],UD(l));const u=d(n,["controlImageConfig"]);u!=null&&p(e,["controlImageConfig"],NM(u));const f=d(n,["styleImageConfig"]);f!=null&&p(e,["styleImageConfig"],f);const g=d(n,["subjectImageConfig"]);return g!=null&&p(e,["subjectImageConfig"],g),e}function cS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&p(e,["scores"],s);const r=d(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function dS(n){const e={},t=d(n,["safetyAttributes","categories"]);t!=null&&p(e,["categories"],t);const s=d(n,["safetyAttributes","scores"]);s!=null&&p(e,["scores"],s);const r=d(n,["contentType"]);return r!=null&&p(e,["contentType"],r),e}function zD(n){const e={},t=d(n,["category"]);if(t!=null&&p(e,["category"],t),d(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const s=d(n,["threshold"]);return s!=null&&p(e,["threshold"],s),e}function jD(n){const e={},t=d(n,["image"]);return t!=null&&p(e,["image"],li(t)),e}function YD(n,e){const t={},s=d(n,["mode"]);e!==void 0&&s!=null&&p(e,["parameters","mode"],s);const r=d(n,["maxPredictions"]);e!==void 0&&r!=null&&p(e,["parameters","maxPredictions"],r);const l=d(n,["confidenceThreshold"]);e!==void 0&&l!=null&&p(e,["parameters","confidenceThreshold"],l);const u=d(n,["maskDilation"]);e!==void 0&&u!=null&&p(e,["parameters","maskDilation"],u);const f=d(n,["binaryColorThreshold"]);e!==void 0&&f!=null&&p(e,["parameters","binaryColorThreshold"],f);const g=d(n,["labels"]);return e!==void 0&&g!=null&&p(e,["labels"],g),t}function JD(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["source"]);r!=null&&$D(r,t);const l=d(e,["config"]);return l!=null&&YD(l,t),t}function KD(n){const e={},t=d(n,["predictions"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(r=>_D(r))),p(e,["generatedMasks"],s)}return e}function $D(n,e){const t={},s=d(n,["prompt"]);e!==void 0&&s!=null&&p(e,["instances[0]","prompt"],s);const r=d(n,["image"]);e!==void 0&&r!=null&&p(e,["instances[0]","image"],li(r));const l=d(n,["scribbleImage"]);return e!==void 0&&l!=null&&p(e,["instances[0]","scribble"],jD(l)),t}function QD(n){const e={},t=d(n,["functionCallingConfig"]);t!=null&&p(e,["functionCallingConfig"],WM(t));const s=d(n,["retrievalConfig"]);return s!=null&&p(e,["retrievalConfig"],s),e}function XD(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],bD(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],wD(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}function fS(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(x=>ZM(x))),p(e,["functionDeclarations"],T)}const s=d(n,["retrieval"]);s!=null&&p(e,["retrieval"],s);const r=d(n,["googleSearchRetrieval"]);r!=null&&p(e,["googleSearchRetrieval"],r);const l=d(n,["computerUse"]);if(l!=null&&p(e,["computerUse"],l),d(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const u=d(n,["codeExecution"]);u!=null&&p(e,["codeExecution"],u);const f=d(n,["enterpriseWebSearch"]);f!=null&&p(e,["enterpriseWebSearch"],f);const g=d(n,["googleMaps"]);g!=null&&p(e,["googleMaps"],g);const h=d(n,["googleSearch"]);h!=null&&p(e,["googleSearch"],h);const _=d(n,["urlContext"]);return _!=null&&p(e,["urlContext"],_),e}function WD(n){const e={},t=d(n,["baseModel"]);t!=null&&p(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&p(e,["createTime"],s);const r=d(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function ZD(n){const e={},t=d(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&p(e,["baseModel"],t);const s=d(n,["createTime"]);s!=null&&p(e,["createTime"],s);const r=d(n,["updateTime"]);return r!=null&&p(e,["updateTime"],r),e}function eP(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=d(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function tP(n,e){const t={},s=d(n,["displayName"]);e!==void 0&&s!=null&&p(e,["displayName"],s);const r=d(n,["description"]);e!==void 0&&r!=null&&p(e,["description"],r);const l=d(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&p(e,["defaultCheckpointId"],l),t}function nP(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","name"],$e(n,s));const r=d(e,["config"]);return r!=null&&eP(r,t),t}function iP(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["config"]);return r!=null&&tP(r,t),t}function sP(n,e){const t={},s=d(n,["outputGcsUri"]);e!==void 0&&s!=null&&p(e,["parameters","storageUri"],s);const r=d(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&p(e,["parameters","safetySetting"],r);const l=d(n,["personGeneration"]);e!==void 0&&l!=null&&p(e,["parameters","personGeneration"],l);const u=d(n,["includeRaiReason"]);e!==void 0&&u!=null&&p(e,["parameters","includeRaiReason"],u);const f=d(n,["outputMimeType"]);e!==void 0&&f!=null&&p(e,["parameters","outputOptions","mimeType"],f);const g=d(n,["outputCompressionQuality"]);e!==void 0&&g!=null&&p(e,["parameters","outputOptions","compressionQuality"],g);const h=d(n,["enhanceInputImage"]);e!==void 0&&h!=null&&p(e,["parameters","upscaleConfig","enhanceInputImage"],h);const _=d(n,["imagePreservationFactor"]);e!==void 0&&_!=null&&p(e,["parameters","upscaleConfig","imagePreservationFactor"],_);const T=d(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const x=d(n,["numberOfImages"]);e!==void 0&&x!=null&&p(e,["parameters","sampleCount"],x);const w=d(n,["mode"]);return e!==void 0&&w!=null&&p(e,["parameters","mode"],w),t}function oP(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["_url","model"],$e(n,s));const r=d(e,["image"]);r!=null&&p(t,["instances[0]","image"],li(r));const l=d(e,["upscaleFactor"]);l!=null&&p(t,["parameters","upscaleConfig","upscaleFactor"],l);const u=d(e,["config"]);return u!=null&&sP(u,t),t}function rP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["predictions"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>Nd(l))),p(e,["generatedImages"],r)}return e}function aP(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const s=d(n,["encodedVideo"]);s!=null&&p(e,["videoBytes"],uo(s));const r=d(n,["encoding"]);return r!=null&&p(e,["mimeType"],r),e}function lP(n){const e={},t=d(n,["gcsUri"]);t!=null&&p(e,["uri"],t);const s=d(n,["bytesBase64Encoded"]);s!=null&&p(e,["videoBytes"],uo(s));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}function uP(n){const e={},t=d(n,["image"]);t!=null&&p(e,["_self"],li(t));const s=d(n,["maskMode"]);return s!=null&&p(e,["maskMode"],s),e}function cP(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],Rd(t));const s=d(n,["referenceType"]);return s!=null&&p(e,["referenceType"],s),e}function dP(n){const e={},t=d(n,["image"]);t!=null&&p(e,["image"],li(t));const s=d(n,["referenceType"]);return s!=null&&p(e,["referenceType"],s),e}function hS(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["uri"],t);const s=d(n,["videoBytes"]);s!=null&&p(e,["encodedVideo"],uo(s));const r=d(n,["mimeType"]);return r!=null&&p(e,["encoding"],r),e}function pS(n){const e={},t=d(n,["uri"]);t!=null&&p(e,["gcsUri"],t);const s=d(n,["videoBytes"]);s!=null&&p(e,["bytesBase64Encoded"],uo(s));const r=d(n,["mimeType"]);return r!=null&&p(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fP(n,e){const t={},s=d(n,["displayName"]);return e!==void 0&&s!=null&&p(e,["displayName"],s),t}function hP(n){const e={},t=d(n,["config"]);return t!=null&&fP(t,e),e}function pP(n,e){const t={},s=d(n,["force"]);return e!==void 0&&s!=null&&p(e,["_query","force"],s),t}function mP(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const s=d(n,["config"]);return s!=null&&pP(s,e),e}function gP(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function yP(n,e){const t={},s=d(n,["customMetadata"]);if(e!==void 0&&s!=null){let l=s;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["customMetadata"],l)}const r=d(n,["chunkingConfig"]);return e!==void 0&&r!=null&&p(e,["chunkingConfig"],r),t}function vP(n){const e={},t=d(n,["name"]);t!=null&&p(e,["name"],t);const s=d(n,["metadata"]);s!=null&&p(e,["metadata"],s);const r=d(n,["done"]);r!=null&&p(e,["done"],r);const l=d(n,["error"]);l!=null&&p(e,["error"],l);const u=d(n,["response"]);return u!=null&&p(e,["response"],EP(u)),e}function _P(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const s=d(n,["fileName"]);s!=null&&p(e,["fileName"],s);const r=d(n,["config"]);return r!=null&&yP(r,e),e}function EP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["parent"]);s!=null&&p(e,["parent"],s);const r=d(n,["documentName"]);return r!=null&&p(e,["documentName"],r),e}function TP(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function xP(n){const e={},t=d(n,["config"]);return t!=null&&TP(t,e),e}function SP(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["fileSearchStores"],l)}return e}function mS(n,e){const t={},s=d(n,["mimeType"]);e!==void 0&&s!=null&&p(e,["mimeType"],s);const r=d(n,["displayName"]);e!==void 0&&r!=null&&p(e,["displayName"],r);const l=d(n,["customMetadata"]);if(e!==void 0&&l!=null){let f=l;Array.isArray(f)&&(f=f.map(g=>g)),p(e,["customMetadata"],f)}const u=d(n,["chunkingConfig"]);return e!==void 0&&u!=null&&p(e,["chunkingConfig"],u),t}function AP(n){const e={},t=d(n,["fileSearchStoreName"]);t!=null&&p(e,["_url","file_search_store_name"],t);const s=d(n,["config"]);return s!=null&&mS(s,e),e}function bP(n){const e={},t=d(n,["sdkHttpResponse"]);return t!=null&&p(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wP="Content-Type",CP="X-Server-Timeout",IP="User-Agent",Np="x-goog-api-client",NP="1.34.0",RP=`google-genai-sdk/${NP}`,MP="v1beta1",DP="v1beta";class PP{constructor(e){var t,s;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:MP,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(s=this.clientOptions.apiVersion)!==null&&s!==void 0?s:DP,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const s=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&s.push(e.apiVersion),s.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,s){const r=[this.getRequestUrlInternal(t)];return s&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);if(e.queryParams)for(const[u,f]of Object.entries(e.queryParams))r.searchParams.append(u,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const s=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?s[r]=Object.assign(Object.assign({},s[r]),l):l!==void 0&&(s[r]=l);return s}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const s=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,s);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,s,r){if(t&&t.timeout||r){const l=new AbortController,u=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const f=setTimeout(()=>l.abort(),t.timeout);f&&typeof f.unref=="function"&&f.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=u}return t&&t.extraBody!==null&&VP(e,t.extraBody),e.headers=await this.getHeadersInternal(t,s),e}async unaryApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await jE(r),new Ap(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,s){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:s})).then(async r=>(await jE(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return oi(this,arguments,function*(){var s;const r=(s=e==null?void 0:e.body)===null||s===void 0?void 0:s.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let u="";const f="data:",g=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:h,value:_}=yield Me(r.read());if(h){if(u.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(_,{stream:!0});try{const k=JSON.parse(T);if("error"in k){const q=JSON.parse(JSON.stringify(k.error)),P=q.status,H=q.code,te=`got status: ${P}. ${JSON.stringify(k)}`;if(H>=400&&H<600)throw new Cd({message:te,status:H})}}catch(k){if(k.name==="ApiError")throw k}u+=T;let x=-1,w=0;for(;;){x=-1,w=0;for(const P of g){const H=u.indexOf(P);H!==-1&&(x===-1||H<x)&&(x=H,w=P.length)}if(x===-1)break;const k=u.substring(0,x);u=u.substring(x+w);const q=k.trim();if(q.startsWith(f)){const P=q.substring(f.length).trim();try{const H=new Response(P,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Me(new Ap(H))}catch(H){throw new Error(`exception parsing stream chunk ${P}. ${H}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(s=>{throw new Error(`exception ${s} sending request`)})}getDefaultHeaders(){const e={},t=RP+" "+this.clientOptions.userAgentExtra;return e[IP]=t,e[Np]=t,e[wP]="application/json",e}async getHeadersInternal(e,t){const s=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))s.append(r,l);e.timeout&&e.timeout>0&&s.append(CP,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(s,t),s}getFileName(e){var t;let s="";return typeof e=="string"&&(s=e.replace(/[/\\]+$/,""),s=(t=s.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),s}async uploadFile(e,t){var s;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,u=await l.stat(e);r.sizeBytes=String(u.size);const f=(s=t==null?void 0:t.mimeType)!==null&&s!==void 0?s:u.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const g={file:r},h=this.getFileName(e),_=me("upload/v1beta/files",g._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,h,g,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,s){var r;const l=this.clientOptions.uploader,u=await l.stat(t),f=String(u.size),g=(r=s==null?void 0:s.mimeType)!==null&&r!==void 0?r:u.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};s!=null&&mS(s,T);const x=await this.fetchUploadUrl(h,f,g,_,T,s==null?void 0:s.httpOptions);return l.uploadToFileSearchStore(t,x,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,s,r,l,u){var f;let g={};u?g=u:g={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${s}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:g});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(f=h==null?void 0:h.headers)===null||f===void 0?void 0:f["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function jE(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(s);throw t>=400&&t<600?new Cd({message:r,status:t}):new Error(r)}}function VP(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function s(l,u){const f=Object.assign({},l);for(const g in u)if(Object.prototype.hasOwnProperty.call(u,g)){const h=u[g],_=f[g];h&&typeof h=="object"&&!Array.isArray(h)&&_&&typeof _=="object"&&!Array.isArray(_)?f[g]=s(_,h):(_&&h&&typeof _!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${g}". Original type: ${typeof _}, New type: ${typeof h}. Overwriting.`),f[g]=h)}return f}const r=s(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kP="mcp_used/unknown";let UP=!1;function gS(n){for(const e of n)if(LP(e)||typeof e=="object"&&"inputSchema"in e)return!0;return UP}function yS(n){var e;const t=(e=n[Np])!==null&&e!==void 0?e:"";n[Np]=(t+` ${kP}`).trimStart()}function LP(n){return n!==null&&typeof n=="object"&&n instanceof Dm}function OP(n){return oi(this,arguments,function*(t,s=100){let r,l=0;for(;l<s;){const u=yield Me(t.listTools({cursor:r}));for(const f of u.tools)yield yield Me(f),l++;if(!u.nextCursor)break;r=u.nextCursor}})}class Dm{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Dm(e,t)}async initialize(){var e,t,s,r;if(this.mcpTools.length>0)return;const l={},u=[];for(const _ of this.mcpClients)try{for(var f=!0,g=(t=void 0,ri(OP(_))),h;h=await g.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const T=r;u.push(T);const x=T.name;if(l[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);l[x]=_}}catch(T){t={error:T}}finally{try{!f&&!e&&(s=g.return)&&await s.call(g)}finally{if(t)throw t.error}}this.mcpTools=u,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),gR(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const s of e)if(s.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[s.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const u=await r.callTool({name:s.name,arguments:s.args},void 0,l);t.push({functionResponse:{name:s.name,response:u.isError?{error:u}:u}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function qP(n,e,t){const s=new lR;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(s,r),e(s)}class BP{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s}async connect(e){var t,s;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),u=HP(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),g=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let h=()=>{};const _=new Promise(j=>{h=j}),T=e.callbacks,x=function(){h({})},w=this.apiClient,k={onopen:x,onmessage:j=>{qP(w,T.onmessage,j)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(j){},onclose:(s=T==null?void 0:T.onclose)!==null&&s!==void 0?s:function(j){}},q=this.webSocketFactory.create(g,FP(u),k);q.connect(),await _;const te={setup:{model:$e(this.apiClient,e.model)}};return q.send(JSON.stringify(te)),new GP(q,this.apiClient)}}class GP{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=hM(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=fM(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Jr.PLAY)}pause(){this.sendPlaybackControl(Jr.PAUSE)}stop(){this.sendPlaybackControl(Jr.STOP)}resetContext(){this.sendPlaybackControl(Jr.RESET_CONTEXT)}close(){this.conn.close()}}function FP(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function HP(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zP="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function jP(n,e,t){const s=new aR;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const u=gM(l);Object.assign(s,u)}else Object.assign(s,l);e(s)}class YP{constructor(e,t,s){this.apiClient=e,this.auth=t,this.webSocketFactory=s,this.music=new BP(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,s,r,l,u,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const g=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&gS(e.config.tools)&&yS(T);const x=QP(T);if(this.apiClient.isVertexAI())_=`${g}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x,_);else{const R=this.apiClient.getApiKey();let O="BidiGenerateContent",U="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",U="access_token"),_=`${g}/ws/google.ai.generativelanguage.${h}.GenerativeService.${O}?${U}=${R}`}let w=()=>{};const k=new Promise(R=>{w=R}),q=e.callbacks,P=function(){var R;(R=q==null?void 0:q.onopen)===null||R===void 0||R.call(q),w({})},H=this.apiClient,te={onopen:P,onmessage:R=>{jP(H,q.onmessage,R)},onerror:(t=q==null?void 0:q.onerror)!==null&&t!==void 0?t:function(R){},onclose:(s=q==null?void 0:q.onclose)!==null&&s!==void 0?s:function(R){}},j=this.webSocketFactory.create(_,$P(x),te);j.connect(),await k;let oe=$e(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&oe.startsWith("publishers/")){const R=this.apiClient.getProject(),O=this.apiClient.getLocation();oe=`projects/${R}/locations/${O}/`+oe}let de={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[id.AUDIO]}:e.config.responseModalities=[id.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ce=(f=(u=e.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[],D=[];for(const R of ce)if(this.isCallableTool(R)){const O=R;D.push(await O.tool())}else D.push(R);D.length>0&&(e.config.tools=D);const M={model:oe,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?de=dM(this.apiClient,M):de=cM(this.apiClient,M),delete de.config,j.send(JSON.stringify(de)),new KP(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const JP={turnComplete:!0};class KP{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let s=[];try{s=jn(t.turns),e.isVertexAI()||(s=s.map(r=>Id(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:s,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let s=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?s=t.functionResponses:s=[t.functionResponses],s.length===0)throw new Error("functionResponses is required.");for(const l of s){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(zP)}return{toolResponse:{functionResponses:s}}}sendClientContent(e){e=Object.assign(Object.assign({},JP),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:mM(e)}:t={realtimeInput:pM(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function $P(n){const e={};return n.forEach((t,s)=>{e[s]=t}),e}function QP(n){const e=new Headers;for(const[t,s]of Object.entries(n))e.append(t,s);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YE=10;function JE(n){var e,t,s;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const u of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Wr(u)){r=!0;break}if(!r)return!0;const l=(s=n==null?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Wr(n){return"callTool"in n&&typeof n.callTool=="function"}function XP(n){var e,t,s;return(s=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Wr(r)))!==null&&s!==void 0?s:!1}function KE(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((s,r)=>{if(Wr(s))return;const l=s;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function $E(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class WP extends ds{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var s,r,l,u,f;const g=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!XP(t)||JE(t.config))return await this.generateContentInternal(g);const h=KE(t);if(h.length>0){const q=h.map(P=>`tools[${P}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${q}.`)}let _,T;const x=jn(g.contents),w=(l=(r=(s=g.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:YE;let k=0;for(;k<w&&(_=await this.generateContentInternal(g),!(!_.functionCalls||_.functionCalls.length===0));){const q=_.candidates[0].content,P=[];for(const H of(f=(u=t.config)===null||u===void 0?void 0:u.tools)!==null&&f!==void 0?f:[])if(Wr(H)){const j=await H.callTool(_.functionCalls);P.push(...j)}k++,T={role:"user",parts:P},g.contents=jn(g.contents),g.contents.push(q),g.contents.push(T),$E(g.config)&&(x.push(q),x.push(T))}return $E(g.config)&&(_.automaticFunctionCallingHistory=x),_},this.generateContentStream=async t=>{var s,r,l,u,f;if(this.maybeMoveToResponseJsonSchem(t),JE(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const g=KE(t);if(g.length>0){const T=g.map(x=>`tools[${x}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const h=(l=(r=(s=t==null?void 0:t.config)===null||s===void 0?void 0:s.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,_=(f=(u=t==null?void 0:t.config)===null||u===void 0?void 0:u.automaticFunctionCalling)===null||f===void 0?void 0:f.disable;if(h&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(s=>{var r;let l;const u=[];if(s!=null&&s.generatedImages)for(const g of s.generatedImages)g&&(g!=null&&g.safetyAttributes)&&((r=g==null?void 0:g.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=g==null?void 0:g.safetyAttributes:u.push(g);let f;return l?f={generatedImages:u,positivePromptSafetyAttributes:l,sdkHttpResponse:s.sdkHttpResponse}:f={generatedImages:u,sdkHttpResponse:s.sdkHttpResponse},f}),this.list=async t=>{var s;const u={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!u.config.queryBase){if(!((s=u.config)===null||s===void 0)&&s.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");u.config.filter="labels.tune-type:*"}return new Wo(cs.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(u),u)},this.editImage=async t=>{const s={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(s.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(s)},this.upscaleImage=async t=>{let s={numberOfImages:1,mode:"upscale"};t.config&&(s=Object.assign(Object.assign({},s),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:s};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var s,r,l,u,f,g;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((s=t.video)===null||s===void 0)&&s.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((u=(l=t.source)===null||l===void 0?void 0:l.video)===null||u===void 0)&&u.uri&&(!((g=(f=t.source)===null||f===void 0?void 0:f.video)===null||g===void 0)&&g.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,s,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const u=await Promise.all(l.map(async g=>Wr(g)?await g.tool():g)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:u})};if(f.config.tools=u,e.config&&e.config.tools&&gS(e.config.tools)){const g=(r=(s=e.config.httpOptions)===null||s===void 0?void 0:s.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},g);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),yS(h),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return f}async initAfcToolsMap(e){var t,s,r;const l=new Map;for(const u of(s=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&s!==void 0?s:[])if(Wr(u)){const f=u,g=await f.tool();for(const h of(r=g.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(l.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);l.set(h.name,f)}}return l}async processAfcStream(e){var t,s,r;const l=(r=(s=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&r!==void 0?r:YE;let u=!1,f=0;const g=await this.initAfcToolsMap(e);return(function(h,_,T){return oi(this,arguments,function*(){for(var x,w,k,q,P,H;f<l;){u&&(f++,u=!1);const de=yield Me(h.processParamsMaybeAddMcpUsage(T)),ce=yield Me(h.generateContentStreamInternal(de)),D=[],M=[];try{for(var te=!0,j=(w=void 0,ri(ce)),oe;oe=yield Me(j.next()),x=oe.done,!x;te=!0){q=oe.value,te=!1;const R=q;if(yield yield Me(R),R.candidates&&(!((P=R.candidates[0])===null||P===void 0)&&P.content)){M.push(R.candidates[0].content);for(const O of(H=R.candidates[0].content.parts)!==null&&H!==void 0?H:[])if(f<l&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(O.functionCall.name)){const U=yield Me(_.get(O.functionCall.name).callTool([O.functionCall]));D.push(...U)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(R){w={error:R}}finally{try{!te&&!x&&(k=j.return)&&(yield Me(k.call(j)))}finally{if(w)throw w.error}}if(D.length>0){u=!0;const R=new El;R.candidates=[{content:{role:"user",parts:D}}],yield yield Me(R);const O=[];O.push(...M),O.push({role:"user",parts:D});const U=jn(T.contents).concat(O);T.contents=U}else break}})})(this,g,e)}async generateContentInternal(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=FE(this.apiClient,e);return f=me("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=zE(_),x=new El;return Object.assign(x,T),x})}else{const h=GE(this.apiClient,e);return f=me("{model}:generateContent",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=HE(_),x=new El;return Object.assign(x,T),x})}}async generateContentStreamInternal(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=FE(this.apiClient,e);return f=me("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),u.then(function(T){return oi(this,arguments,function*(){var x,w,k,q;try{for(var P=!0,H=ri(T),te;te=yield Me(H.next()),x=te.done,!x;P=!0){q=te.value,P=!1;const j=q,oe=zE(yield Me(j.json()));oe.sdkHttpResponse={headers:j.headers};const de=new El;Object.assign(de,oe),yield yield Me(de)}}catch(j){w={error:j}}finally{try{!P&&!x&&(k=H.return)&&(yield Me(k.call(H)))}finally{if(w)throw w.error}}})})}else{const h=GE(this.apiClient,e);return f=me("{model}:streamGenerateContent?alt=sse",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.requestStream({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),u.then(function(T){return oi(this,arguments,function*(){var x,w,k,q;try{for(var P=!0,H=ri(T),te;te=yield Me(H.next()),x=te.done,!x;P=!0){q=te.value,P=!1;const j=q,oe=HE(yield Me(j.json()));oe.sdkHttpResponse={headers:j.headers};const de=new El;Object.assign(de,oe),yield yield Me(de)}}catch(j){w={error:j}}finally{try{!P&&!x&&(k=H.return)&&(yield Me(k.call(H)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=YM(this.apiClient,e);return f=me("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=KM(_),x=new AE;return Object.assign(x,T),x})}else{const h=jM(this.apiClient,e);return f=me("{model}:batchEmbedContents",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=JM(_),x=new AE;return Object.assign(x,T),x})}}async generateImagesInternal(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=oD(this.apiClient,e);return f=me("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=aD(_),x=new bE;return Object.assign(x,T),x})}else{const h=sD(this.apiClient,e);return f=me("{model}:predict",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=rD(_),x=new bE;return Object.assign(x,T),x})}}async editImageInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=GM(this.apiClient,e);return l=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=FM(g),_=new QN;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=oP(this.apiClient,e);return l=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=rP(g),_=new XN;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=BD(this.apiClient,e);return l=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const h=GD(g),_=new WN;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=JD(this.apiClient,e);return l=me("{model}:predict",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const h=KD(g),_=new ZN;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=AD(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>Ip(_))}else{const h=SD(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Cp(_))}}async listInternal(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=PD(this.apiClient,e);return f=me("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=kD(_),x=new wE;return Object.assign(x,T),x})}else{const h=DD(this.apiClient,e);return f=me("{models_url}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=VD(_),x=new wE;return Object.assign(x,T),x})}}async update(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=iP(this.apiClient,e);return f=me("{model}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>Ip(_))}else{const h=nP(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>Cp(_))}}async delete(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=LM(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=qM(_),x=new CE;return Object.assign(x,T),x})}else{const h=UM(this.apiClient,e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=OM(_),x=new CE;return Object.assign(x,T),x})}}async countTokens(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=PM(this.apiClient,e);return f=me("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=kM(_),x=new IE;return Object.assign(x,T),x})}else{const h=DM(this.apiClient,e);return f=me("{model}:countTokens",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=VM(_),x=new IE;return Object.assign(x,T),x})}}async computeTokens(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=bM(this.apiClient,e);return l=me("{model}:computeTokens",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>{const h=wM(g),_=new eR;return Object.assign(_,h),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=hD(this.apiClient,e);return f=me("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u.then(_=>{const T=dD(_),x=new sd;return Object.assign(x,T),x})}else{const h=fD(this.apiClient,e);return f=me("{model}:predictLongRunning",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u.then(_=>{const T=cD(_),x=new sd;return Object.assign(x,T),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZP extends ds{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,s=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;s&&"httpOptions"in s&&(l=s.httpOptions);const u=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:u,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:s});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=zN(e);return f=me("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json()),u}else{const h=HN(e);return f=me("{operationName}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json()),u}}async fetchPredictVideosOperationInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=UN(e);return l=me("{resourceName}:fetchPredictOperation",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function e4(n){const e={},t=d(n,["data"]);if(t!=null&&p(e,["data"],t),d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function t4(n){const e={},t=d(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>c4(l))),p(e,["parts"],r)}const s=d(n,["role"]);return s!=null&&p(e,["role"],s),e}function n4(n,e,t){const s={},r=d(e,["expireTime"]);t!==void 0&&r!=null&&p(t,["expireTime"],r);const l=d(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&p(t,["newSessionExpireTime"],l);const u=d(e,["uses"]);t!==void 0&&u!=null&&p(t,["uses"],u);const f=d(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&p(t,["bidiGenerateContentSetup"],u4(n,f));const g=d(e,["lockAdditionalFields"]);return t!==void 0&&g!=null&&p(t,["fieldMask"],g),s}function i4(n,e){const t={},s=d(e,["config"]);return s!=null&&p(t,["config"],n4(n,s,t)),t}function s4(n){const e={};if(d(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=d(n,["fileUri"]);t!=null&&p(e,["fileUri"],t);const s=d(n,["mimeType"]);return s!=null&&p(e,["mimeType"],s),e}function o4(n){const e={},t=d(n,["id"]);t!=null&&p(e,["id"],t);const s=d(n,["args"]);s!=null&&p(e,["args"],s);const r=d(n,["name"]);if(r!=null&&p(e,["name"],r),d(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(d(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function r4(n){const e={};if(d(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=d(n,["enableWidget"]);return t!=null&&p(e,["enableWidget"],t),e}function a4(n){const e={};if(d(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(d(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=d(n,["timeRangeFilter"]);return t!=null&&p(e,["timeRangeFilter"],t),e}function l4(n,e){const t={},s=d(n,["generationConfig"]);e!==void 0&&s!=null&&p(e,["setup","generationConfig"],s);const r=d(n,["responseModalities"]);e!==void 0&&r!=null&&p(e,["setup","generationConfig","responseModalities"],r);const l=d(n,["temperature"]);e!==void 0&&l!=null&&p(e,["setup","generationConfig","temperature"],l);const u=d(n,["topP"]);e!==void 0&&u!=null&&p(e,["setup","generationConfig","topP"],u);const f=d(n,["topK"]);e!==void 0&&f!=null&&p(e,["setup","generationConfig","topK"],f);const g=d(n,["maxOutputTokens"]);e!==void 0&&g!=null&&p(e,["setup","generationConfig","maxOutputTokens"],g);const h=d(n,["mediaResolution"]);e!==void 0&&h!=null&&p(e,["setup","generationConfig","mediaResolution"],h);const _=d(n,["seed"]);e!==void 0&&_!=null&&p(e,["setup","generationConfig","seed"],_);const T=d(n,["speechConfig"]);e!==void 0&&T!=null&&p(e,["setup","generationConfig","speechConfig"],Mm(T));const x=d(n,["thinkingConfig"]);e!==void 0&&x!=null&&p(e,["setup","generationConfig","thinkingConfig"],x);const w=d(n,["enableAffectiveDialog"]);e!==void 0&&w!=null&&p(e,["setup","generationConfig","enableAffectiveDialog"],w);const k=d(n,["systemInstruction"]);e!==void 0&&k!=null&&p(e,["setup","systemInstruction"],t4(sn(k)));const q=d(n,["tools"]);if(e!==void 0&&q!=null){let ce=fa(q);Array.isArray(ce)&&(ce=ce.map(D=>f4(da(D)))),p(e,["setup","tools"],ce)}const P=d(n,["sessionResumption"]);e!==void 0&&P!=null&&p(e,["setup","sessionResumption"],d4(P));const H=d(n,["inputAudioTranscription"]);e!==void 0&&H!=null&&p(e,["setup","inputAudioTranscription"],H);const te=d(n,["outputAudioTranscription"]);e!==void 0&&te!=null&&p(e,["setup","outputAudioTranscription"],te);const j=d(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&p(e,["setup","realtimeInputConfig"],j);const oe=d(n,["contextWindowCompression"]);e!==void 0&&oe!=null&&p(e,["setup","contextWindowCompression"],oe);const de=d(n,["proactivity"]);if(e!==void 0&&de!=null&&p(e,["setup","proactivity"],de),d(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function u4(n,e){const t={},s=d(e,["model"]);s!=null&&p(t,["setup","model"],$e(n,s));const r=d(e,["config"]);return r!=null&&p(t,["config"],l4(r,t)),t}function c4(n){const e={},t=d(n,["mediaResolution"]);t!=null&&p(e,["mediaResolution"],t);const s=d(n,["codeExecutionResult"]);s!=null&&p(e,["codeExecutionResult"],s);const r=d(n,["executableCode"]);r!=null&&p(e,["executableCode"],r);const l=d(n,["fileData"]);l!=null&&p(e,["fileData"],s4(l));const u=d(n,["functionCall"]);u!=null&&p(e,["functionCall"],o4(u));const f=d(n,["functionResponse"]);f!=null&&p(e,["functionResponse"],f);const g=d(n,["inlineData"]);g!=null&&p(e,["inlineData"],e4(g));const h=d(n,["text"]);h!=null&&p(e,["text"],h);const _=d(n,["thought"]);_!=null&&p(e,["thought"],_);const T=d(n,["thoughtSignature"]);T!=null&&p(e,["thoughtSignature"],T);const x=d(n,["videoMetadata"]);return x!=null&&p(e,["videoMetadata"],x),e}function d4(n){const e={},t=d(n,["handle"]);if(t!=null&&p(e,["handle"],t),d(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function f4(n){const e={},t=d(n,["functionDeclarations"]);if(t!=null){let _=t;Array.isArray(_)&&(_=_.map(T=>T)),p(e,["functionDeclarations"],_)}if(d(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const s=d(n,["googleSearchRetrieval"]);s!=null&&p(e,["googleSearchRetrieval"],s);const r=d(n,["computerUse"]);r!=null&&p(e,["computerUse"],r);const l=d(n,["fileSearch"]);l!=null&&p(e,["fileSearch"],l);const u=d(n,["codeExecution"]);if(u!=null&&p(e,["codeExecution"],u),d(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const f=d(n,["googleMaps"]);f!=null&&p(e,["googleMaps"],r4(f));const g=d(n,["googleSearch"]);g!=null&&p(e,["googleSearch"],a4(g));const h=d(n,["urlContext"]);return h!=null&&p(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function h4(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const s=n[t];if(typeof s=="object"&&s!=null&&Object.keys(s).length>0){const r=Object.keys(s).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function p4(n,e){let t=null;const s=n.bidiGenerateContentSetup;if(typeof s=="object"&&s!==null&&"setup"in s){const l=s.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else s!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=h4(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const u=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(h=>u.includes(h)?`generationConfig.${h}`:h));const g=[];l&&g.push(l),f.length>0&&g.push(...f),g.length>0?n.fieldMask=g.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class m4 extends ds{constructor(e){super(),this.apiClient=e}async create(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=i4(this.apiClient,e);l=me("auth_tokens",f._url),u=f._query,delete f.config,delete f._url,delete f._query;const g=p4(f,e.config);return r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function g4(n,e){const t={},s=d(n,["force"]);return e!==void 0&&s!=null&&p(e,["_query","force"],s),t}function y4(n){const e={},t=d(n,["name"]);t!=null&&p(e,["_url","name"],t);const s=d(n,["config"]);return s!=null&&g4(s,e),e}function v4(n){const e={},t=d(n,["name"]);return t!=null&&p(e,["_url","name"],t),e}function _4(n,e){const t={},s=d(n,["pageSize"]);e!==void 0&&s!=null&&p(e,["_query","pageSize"],s);const r=d(n,["pageToken"]);return e!==void 0&&r!=null&&p(e,["_query","pageToken"],r),t}function E4(n){const e={},t=d(n,["parent"]);t!=null&&p(e,["_url","parent"],t);const s=d(n,["config"]);return s!=null&&_4(s,e),e}function T4(n){const e={},t=d(n,["sdkHttpResponse"]);t!=null&&p(e,["sdkHttpResponse"],t);const s=d(n,["nextPageToken"]);s!=null&&p(e,["nextPageToken"],s);const r=d(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(u=>u)),p(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class x4 extends ds{constructor(e){super(),this.apiClient=e,this.list=async t=>new Wo(cs.PAGED_ITEM_DOCUMENTS,s=>this.listInternal({parent:t.parent,config:s.config}),await this.listInternal(t),t)}async get(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=v4(e);return l=me("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=y4(e);r=me("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=E4(e);return l=me("{parent}/documents",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const h=T4(g),_=new tR;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class S4 extends ds{constructor(e,t=new x4(e)){super(),this.apiClient=e,this.documents=t,this.list=async(s={})=>new Wo(cs.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(s),s)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=hP(e);return l=me("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async get(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=gP(e);return l=me("{name}",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>g)}}async delete(e){var t,s;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=mP(e);r=me("{name}",u._url),l=u._query,delete u._url,delete u._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=xP(e);return l=me("fileSearchStores",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const h=SP(g),_=new nR;return Object.assign(_,h),_})}}async uploadToFileSearchStoreInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=AP(e);return l=me("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const h=bP(g),_=new iR;return Object.assign(_,h),_})}}async importFile(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=_P(e);return l=me("{file_search_store_name}:importFile",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json()),r.then(g=>{const h=vP(g),_=new wm;return Object.assign(_,h),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let vS=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return vS=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,s=>(+s^t()&15>>+s/4).toString(16))};const A4=()=>vS();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rp(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Mp=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yn extends Error{}class un extends Yn{constructor(e,t,s,r){super(`${un.makeMessage(e,t,s)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,s){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):s;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,s,r){if(!e||!r)return new Md({message:s,cause:Mp(t)});const l=t;return e===400?new ES(e,l,s,r):e===401?new TS(e,l,s,r):e===403?new xS(e,l,s,r):e===404?new SS(e,l,s,r):e===409?new AS(e,l,s,r):e===422?new bS(e,l,s,r):e===429?new wS(e,l,s,r):e>=500?new CS(e,l,s,r):new un(e,l,s,r)}}class Dp extends un{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Md extends un{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class _S extends Md{constructor({message:e}={}){super({message:e??"Request timed out."})}}class ES extends un{}class TS extends un{}class xS extends un{}class SS extends un{}class AS extends un{}class bS extends un{}class wS extends un{}class CS extends un{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const b4=/^[a-z][a-z0-9+.-]*:/i,w4=n=>b4.test(n);let Pp=n=>(Pp=Array.isArray,Pp(n));const C4=Pp;let I4=C4;const QE=I4;function N4(n){if(!n)return!0;for(const e in n)return!1;return!0}function R4(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const M4=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Yn(`${n} must be an integer`);if(e<0)throw new Yn(`${n} must be a positive integer`);return e},D4=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const P4=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V4(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const k4=()=>{var n,e,t,s,r;const l=V4();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yr,"X-Stainless-OS":WE(Deno.build.os),"X-Stainless-Arch":XE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yr,"X-Stainless-OS":WE((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":XE((s=globalThis.process.arch)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const u=U4();return u?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${u.browser}`,"X-Stainless-Runtime-Version":u.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Yr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function U4(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const s=t.exec(navigator.userAgent);if(s){const r=s[1]||0,l=s[2]||0,u=s[3]||0;return{browser:e,version:`${r}.${l}.${u}`}}}return null}const XE=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",WE=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Cc;const L4=()=>Cc??(Cc=k4());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function O4(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function IS(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function q4(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return IS({start(){},async pull(t){const{done:s,value:r}=await e.next();s?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function NS(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function B4(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const s=n.getReader(),r=s.cancel();s.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G4=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RS=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Xh(n,e,t){return RS(),new File(n,e??"unknown_file",t)}function F4(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const H4=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const MS=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",z4=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&MS(n),j4=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function Y4(n,e,t){if(RS(),n=await n,z4(n))return n instanceof File?n:Xh([await n.arrayBuffer()],n.name);if(j4(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Xh(await Vp(r),e,t)}const s=await Vp(n);if(e||(e=F4(n)),!(t!=null&&t.type)){const r=s.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Xh(s,e,t)}async function Vp(n){var e,t,s,r,l;let u=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)u.push(n);else if(MS(n))u.push(n instanceof Blob?n:await n.arrayBuffer());else if(H4(n))try{for(var f=!0,g=ri(n),h;h=await g.next(),e=h.done,!e;f=!0){r=h.value,f=!1;const _=r;u.push(...await Vp(_))}}catch(_){t={error:_}}finally{try{!f&&!e&&(s=g.return)&&await s.call(g)}finally{if(t)throw t.error}}else{const _=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${J4(n)}`)}return u}function J4(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DS{constructor(e){this._client=e}}DS._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PS(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const ZE=Object.freeze(Object.create(null)),K4=(n=PS)=>(function(t,...s){if(t.length===1)return t[0];let r=!1;const l=[],u=t.reduce((_,T,x)=>{var w,k,q;/[?#]/.test(T)&&(r=!0);const P=s[x];let H=(r?encodeURIComponent:n)(""+P);return x!==s.length&&(P==null||typeof P=="object"&&P.toString===((q=Object.getPrototypeOf((k=Object.getPrototypeOf((w=P.hasOwnProperty)!==null&&w!==void 0?w:ZE))!==null&&k!==void 0?k:ZE))===null||q===void 0?void 0:q.toString))&&(H=P+"",l.push({start:_.length+T.length,length:H.length,error:`Value of type ${Object.prototype.toString.call(P).slice(8,-1)} is not a valid path parameter`})),_+T+(x===s.length?"":H)},""),f=u.split(/[?#]/,1)[0],g=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let h;for(;(h=g.exec(f))!==null;)l.push({start:h.index,length:h[0].length,error:`Value "${h[0]}" can't be safely passed as a path parameter`});if(l.sort((_,T)=>_.start-T.start),l.length>0){let _=0;const T=l.reduce((x,w)=>{const k=" ".repeat(w.start-_),q="^".repeat(w.length);return _=w.start+w.length,x+k+q},"");throw new Yn(`Path parameters result in path with invalid segments:
${l.map(x=>x.error).join(`
`)}
${u}
${T}`)}return u}),Ic=K4(PS);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VS extends DS{create(e,t){var s;const{api_version:r=this._client.apiVersion}=e,l=rd(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Yn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Yn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Ic`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(s=e.stream)!==null&&s!==void 0?s:!1}))}delete(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(Ic`/${r}/interactions/${e}`,s)}cancel(e,t={},s){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(Ic`/${r}/interactions/${e}/cancel`,s)}get(e,t={},s){var r;const l=t??{},{api_version:u=this._client.apiVersion}=l,f=rd(l,["api_version"]);return this._client.get(Ic`/${u}/interactions/${e}`,Object.assign(Object.assign({query:f},s),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}VS._key=Object.freeze(["interactions"]);class kS extends VS{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $4(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let s=0;for(const r of n)t.set(r,s),s+=r.length;return t}let Nc;function Pm(n){let e;return(Nc??(e=new globalThis.TextEncoder,Nc=e.encode.bind(e)))(n)}let Rc;function eT(n){let e;return(Rc??(e=new globalThis.TextDecoder,Rc=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dd{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Pm(e):e;this.buffer=$4([this.buffer,t]);const s=[];let r;for(;(r=Q4(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){s.push(eT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,u=eT(this.buffer.subarray(0,l));s.push(u),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return s}flush(){return this.buffer.length?this.decode(`
`):[]}}Dd.NEWLINE_CHARS=new Set([`
`,"\r"]);Dd.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function Q4(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function X4(n){for(let s=0;s<n.length-1;s++){if(n[s]===10&&n[s+1]===10||n[s]===13&&n[s+1]===13)return s+2;if(n[s]===13&&n[s+1]===10&&s+3<n.length&&n[s+2]===13&&n[s+3]===10)return s+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ad={off:0,error:200,warn:300,info:400,debug:500},tT=(n,e,t)=>{if(n){if(R4(ad,n))return n;ln(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(ad))}`)}};function wl(){}function Mc(n,e,t){return!e||ad[n]>ad[t]?wl:e[n].bind(e)}const W4={error:wl,warn:wl,info:wl,debug:wl};let nT=new WeakMap;function ln(n){var e;const t=n.logger,s=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return W4;const r=nT.get(t);if(r&&r[0]===s)return r[1];const l={error:Mc("error",t,s),warn:Mc("warn",t,s),info:Mc("info",t,s),debug:Mc("debug",t,s)};return nT.set(t,[s,l]),l}const Ho=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Kr{constructor(e,t,s){this.iterator=e,this.controller=t,this.client=s}static fromSSEResponse(e,t,s){let r=!1;const l=s?ln(s):console;function u(){return oi(this,arguments,function*(){var g,h,_,T;if(r)throw new Yn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let x=!1;try{try{for(var w=!0,k=ri(Z4(e,t)),q;q=yield Me(k.next()),g=q.done,!g;w=!0){T=q.value,w=!1;const P=T;if(!x)if(P.data.startsWith("[DONE]")){x=!0;continue}else try{yield yield Me(JSON.parse(P.data))}catch(H){throw l.error("Could not parse message into JSON:",P.data),l.error("From chunk:",P.raw),H}}}catch(P){h={error:P}}finally{try{!w&&!g&&(_=k.return)&&(yield Me(_.call(k)))}finally{if(h)throw h.error}}x=!0}catch(P){if(Rp(P))return yield Me(void 0);throw P}finally{x||t.abort()}})}return new Kr(u,t,s)}static fromReadableStream(e,t,s){let r=!1;function l(){return oi(this,arguments,function*(){var g,h,_,T;const x=new Dd,w=NS(e);try{for(var k=!0,q=ri(w),P;P=yield Me(q.next()),g=P.done,!g;k=!0){T=P.value,k=!1;const H=T;for(const te of x.decode(H))yield yield Me(te)}}catch(H){h={error:H}}finally{try{!k&&!g&&(_=q.return)&&(yield Me(_.call(q)))}finally{if(h)throw h.error}}for(const H of x.flush())yield yield Me(H)})}function u(){return oi(this,arguments,function*(){var g,h,_,T;if(r)throw new Yn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let x=!1;try{try{for(var w=!0,k=ri(l()),q;q=yield Me(k.next()),g=q.done,!g;w=!0){T=q.value,w=!1;const P=T;x||P&&(yield yield Me(JSON.parse(P)))}}catch(P){h={error:P}}finally{try{!w&&!g&&(_=k.return)&&(yield Me(_.call(k)))}finally{if(h)throw h.error}}x=!0}catch(P){if(Rp(P))return yield Me(void 0);throw P}finally{x||t.abort()}})}return new Kr(u,t,s)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],s=this.iterator(),r=l=>({next:()=>{if(l.length===0){const u=s.next();e.push(u),t.push(u)}return l.shift()}});return[new Kr(()=>r(e),this.controller,this.client),new Kr(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return IS({async start(){t=e[Symbol.asyncIterator]()},async pull(s){try{const{value:r,done:l}=await t.next();if(l)return s.close();const u=Pm(JSON.stringify(r)+`
`);s.enqueue(u)}catch(r){s.error(r)}},async cancel(){var s;await((s=t.return)===null||s===void 0?void 0:s.call(t))}})}}function Z4(n,e){return oi(this,arguments,function*(){var s,r,l,u;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Yn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Yn("Attempted to iterate over a response with no body");const f=new tV,g=new Dd,h=NS(n.body);try{for(var _=!0,T=ri(eV(h)),x;x=yield Me(T.next()),s=x.done,!s;_=!0){u=x.value,_=!1;const w=u;for(const k of g.decode(w)){const q=f.decode(k);q&&(yield yield Me(q))}}}catch(w){r={error:w}}finally{try{!_&&!s&&(l=T.return)&&(yield Me(l.call(T)))}finally{if(r)throw r.error}}for(const w of g.flush()){const k=f.decode(w);k&&(yield yield Me(k))}})}function eV(n){return oi(this,arguments,function*(){var t,s,r,l;let u=new Uint8Array;try{for(var f=!0,g=ri(n),h;h=yield Me(g.next()),t=h.done,!t;f=!0){l=h.value,f=!1;const _=l;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?Pm(_):_;let x=new Uint8Array(u.length+T.length);x.set(u),x.set(T,u.length),u=x;let w;for(;(w=X4(u))!==-1;)yield yield Me(u.slice(0,w)),u=u.slice(w)}}catch(_){s={error:_}}finally{try{!f&&!t&&(r=g.return)&&(yield Me(r.call(g)))}finally{if(s)throw s.error}}u.length>0&&(yield yield Me(u))})}class tV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,s,r]=nV(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function nV(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function iV(n,e){const{response:t,requestLogID:s,retryOfRequestLogID:r,startTime:l}=e,u=await(async()=>{var f;if(e.options.stream)return ln(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Kr.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const g=t.headers.get("content-type"),h=(f=g==null?void 0:g.split(";")[0])===null||f===void 0?void 0:f.trim();return(h==null?void 0:h.includes("application/json"))||(h==null?void 0:h.endsWith("+json"))?await t.json():await t.text()})();return ln(n).debug(`[${s}] response parsed`,Ho({retryOfRequestLogID:r,url:t.url,status:t.status,body:u,durationMs:Date.now()-l})),u}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vm extends Promise{constructor(e,t,s=iV){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=s,this.client=e}_thenUnwrap(e){return new Vm(this.client,this.responsePromise,async(t,s)=>e(await this.parseResponse(t,s),s))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const US=Symbol("brand.privateNullableHeaders");function*sV(n){if(!n)return;if(US in n){const{values:s,nulls:r}=n;yield*s.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():QE(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let s of t){const r=s[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=QE(s[1])?s[1]:[s[1]];let u=!1;for(const f of l)f!==void 0&&(e&&!u&&(u=!0,yield[r,null]),yield[r,f])}}const Tl=n=>{const e=new Headers,t=new Set;for(const s of n){const r=new Set;for(const[l,u]of sV(s)){const f=l.toLowerCase();r.has(f)||(e.delete(l),r.add(f)),u===null?(e.delete(l),t.add(f)):(e.append(l,u),t.delete(f))}}return{[US]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Wh=n=>{var e,t,s,r,l,u;if(typeof globalThis.process<"u")return(s=(t=(e=RN)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&s!==void 0?s:void 0;if(typeof globalThis.Deno<"u")return(u=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||u===void 0?void 0:u.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var LS;class Pd{constructor(e){var t,s,r,l,u,f,g,{baseURL:h=Wh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Wh("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,x=rd(e,["baseURL","apiKey","apiVersion"]);const w=Object.assign(Object.assign({apiKey:_,apiVersion:T},x),{baseURL:h||"https://generativelanguage.googleapis.com"});this.baseURL=w.baseURL,this.timeout=(s=w.timeout)!==null&&s!==void 0?s:Pd.DEFAULT_TIMEOUT,this.logger=(r=w.logger)!==null&&r!==void 0?r:console;const k="warn";this.logLevel=k,this.logLevel=(u=(l=tT(w.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:tT(Wh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&u!==void 0?u:k,this.fetchOptions=w.fetchOptions,this.maxRetries=(f=w.maxRetries)!==null&&f!==void 0?f:2,this.fetch=(g=w.fetch)!==null&&g!==void 0?g:O4(),this.encoder=G4,this._options=w,this.apiKey=_,this.apiVersion=T,this.clientAdapter=w.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Tl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Tl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Tl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,s])=>typeof s<"u").map(([t,s])=>{if(typeof s=="string"||typeof s=="number"||typeof s=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;if(s===null)return`${encodeURIComponent(t)}=`;throw new Yn(`Cannot stringify type ${typeof s}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Yr}`}defaultIdempotencyKey(){return`stainless-node-retry-${A4()}`}makeStatusError(e,t,s,r){return un.generate(e,t,s,r)}buildURL(e,t,s){const r=!this.baseURLOverridden()&&s||this.baseURL,l=w4(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),u=this.defaultQuery();return N4(u)||(t=Object.assign(Object.assign({},u),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:s}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,s){return this.request(Promise.resolve(s).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Vm(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,s){var r,l,u;const f=await e,g=(r=f.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=g),await this.prepareOptions(f);const{req:h,url:_,timeout:T}=await this.buildRequest(f,{retryCount:g-t});await this.prepareRequest(h,{url:_,options:f});const x="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),w=s===void 0?"":`, retryOf: ${s}`,k=Date.now();if(ln(this).debug(`[${x}] sending request`,Ho({retryOfRequestLogID:s,method:f.method,url:_,options:f,headers:h.headers})),!((l=f.signal)===null||l===void 0)&&l.aborted)throw new Dp;const q=new AbortController,P=await this.fetchWithTimeout(_,h,T,q).catch(Mp),H=Date.now();if(P instanceof globalThis.Error){const j=`retrying, ${t} attempts remaining`;if(!((u=f.signal)===null||u===void 0)&&u.aborted)throw new Dp;const oe=Rp(P)||/timed? ?out/i.test(String(P)+("cause"in P?String(P.cause):""));if(t)return ln(this).info(`[${x}] connection ${oe?"timed out":"failed"} - ${j}`),ln(this).debug(`[${x}] connection ${oe?"timed out":"failed"} (${j})`,Ho({retryOfRequestLogID:s,url:_,durationMs:H-k,message:P.message})),this.retryRequest(f,t,s??x);throw ln(this).info(`[${x}] connection ${oe?"timed out":"failed"} - error; no more retries left`),ln(this).debug(`[${x}] connection ${oe?"timed out":"failed"} (error; no more retries left)`,Ho({retryOfRequestLogID:s,url:_,durationMs:H-k,message:P.message})),oe?new _S:new Md({cause:P})}const te=`[${x}${w}] ${h.method} ${_} ${P.ok?"succeeded":"failed"} with status ${P.status} in ${H-k}ms`;if(!P.ok){const j=await this.shouldRetry(P);if(t&&j){const R=`retrying, ${t} attempts remaining`;return await B4(P.body),ln(this).info(`${te} - ${R}`),ln(this).debug(`[${x}] response error (${R})`,Ho({retryOfRequestLogID:s,url:P.url,status:P.status,headers:P.headers,durationMs:H-k})),this.retryRequest(f,t,s??x,P.headers)}const oe=j?"error; no more retries left":"error; not retryable";ln(this).info(`${te} - ${oe}`);const de=await P.text().catch(R=>Mp(R).message),ce=D4(de),D=ce?void 0:de;throw ln(this).debug(`[${x}] response error (${oe})`,Ho({retryOfRequestLogID:s,url:P.url,status:P.status,headers:P.headers,message:D,durationMs:Date.now()-k})),this.makeStatusError(P.status,ce,D,P.headers)}return ln(this).info(te),ln(this).debug(`[${x}] response start`,Ho({retryOfRequestLogID:s,url:P.url,status:P.status,headers:P.headers,durationMs:H-k})),{response:P,options:f,controller:q,requestLogID:x,retryOfRequestLogID:s,startTime:k}}async fetchWithTimeout(e,t,s,r){const l=t||{},{signal:u,method:f}=l,g=rd(l,["signal","method"]);u&&u.addEventListener("abort",()=>r.abort());const h=setTimeout(()=>r.abort(),s),_=globalThis.ReadableStream&&g.body instanceof globalThis.ReadableStream||typeof g.body=="object"&&g.body!==null&&Symbol.asyncIterator in g.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},_?{duplex:"half"}:{}),{method:"GET"}),g);f&&(T.method=f.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(h)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,s,r){var l;let u;const f=r==null?void 0:r.get("retry-after-ms");if(f){const h=parseFloat(f);Number.isNaN(h)||(u=h)}const g=r==null?void 0:r.get("retry-after");if(g&&!u){const h=parseFloat(g);Number.isNaN(h)?u=Date.parse(g)-Date.now():u=h*1e3}if(!(u&&0<=u&&u<60*1e3)){const h=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(t,h)}return await P4(u),this.makeRequest(e,t-1,s)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,u=Math.min(.5*Math.pow(2,l),8),f=1-Math.random()*.25;return u*f*1e3}async buildRequest(e,{retryCount:t=0}={}){var s,r,l;const u=Object.assign({},e),{method:f,path:g,query:h,defaultBaseURL:_}=u,T=this.buildURL(g,h,_);"timeout"in u&&M4("timeout",u.timeout),u.timeout=(s=u.timeout)!==null&&s!==void 0?s:this.timeout;const{bodyHeaders:x,body:w}=this.buildBody({options:u}),k=await this.buildHeaders({options:e,method:f,bodyHeaders:x,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:f,headers:k},u.signal&&{signal:u.signal}),globalThis.ReadableStream&&w instanceof globalThis.ReadableStream&&{duplex:"half"}),w&&{body:w}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=u.fetchOptions)!==null&&l!==void 0?l:{}),url:T,timeout:u.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:s,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const u=await this.authHeaders(e);let f=Tl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),L4()),this._options.defaultHeaders,s,e.headers,u]);return this.validateHeaders(f),f.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const s=Tl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&s.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:q4(e)}:this.encoder({body:e,headers:s})}}Pd.DEFAULT_TIMEOUT=6e4;class Ht extends Pd{constructor(){super(...arguments),this.interactions=new kS(this)}}LS=Ht;Ht.GeminiNextGenAPIClient=LS;Ht.GeminiNextGenAPIClientError=Yn;Ht.APIError=un;Ht.APIConnectionError=Md;Ht.APIConnectionTimeoutError=_S;Ht.APIUserAbortError=Dp;Ht.NotFoundError=SS;Ht.ConflictError=AS;Ht.RateLimitError=wS;Ht.BadRequestError=ES;Ht.AuthenticationError=TS;Ht.InternalServerError=CS;Ht.PermissionDeniedError=xS;Ht.UnprocessableEntityError=bS;Ht.toFile=Y4;Ht.Interactions=kS;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oV(n,e){const t={},s=d(n,["name"]);return s!=null&&p(t,["_url","name"],s),t}function rV(n,e){const t={},s=d(n,["name"]);return s!=null&&p(t,["_url","name"],s),t}function aV(n,e){const t={},s=d(n,["sdkHttpResponse"]);return s!=null&&p(t,["sdkHttpResponse"],s),t}function lV(n,e){const t={},s=d(n,["sdkHttpResponse"]);return s!=null&&p(t,["sdkHttpResponse"],s),t}function uV(n,e,t){const s={};if(d(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=d(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&p(e,["displayName"],r),d(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=d(n,["epochCount"]);e!==void 0&&l!=null&&p(e,["tuningTask","hyperparameters","epochCount"],l);const u=d(n,["learningRateMultiplier"]);if(u!=null&&p(s,["tuningTask","hyperparameters","learningRateMultiplier"],u),d(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(d(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(d(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const f=d(n,["batchSize"]);e!==void 0&&f!=null&&p(e,["tuningTask","hyperparameters","batchSize"],f);const g=d(n,["learningRate"]);if(e!==void 0&&g!=null&&p(e,["tuningTask","hyperparameters","learningRate"],g),d(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(d(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return s}function cV(n,e,t){const s={};let r=d(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec"],iT(w))}else if(r==="PREFERENCE_TUNING"){const w=d(n,["validationDataset"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec"],iT(w))}const l=d(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&p(e,["tunedModelDisplayName"],l);const u=d(n,["description"]);e!==void 0&&u!=null&&p(e,["description"],u);let f=d(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(f==="PREFERENCE_TUNING"){const w=d(n,["epochCount"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let g=d(t,["config","method"]);if(g===void 0&&(g="SUPERVISED_FINE_TUNING"),g==="SUPERVISED_FINE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(g==="PREFERENCE_TUNING"){const w=d(n,["learningRateMultiplier"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let h=d(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(h==="PREFERENCE_TUNING"){const w=d(n,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let _=d(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&p(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(_==="PREFERENCE_TUNING"){const w=d(n,["adapterSize"]);e!==void 0&&w!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(d(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(d(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=d(n,["labels"]);e!==void 0&&T!=null&&p(e,["labels"],T);const x=d(n,["beta"]);return e!==void 0&&x!=null&&p(e,["preferenceOptimizationSpec","hyperParameters","beta"],x),s}function dV(n,e){const t={},s=d(n,["baseModel"]);s!=null&&p(t,["baseModel"],s);const r=d(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const l=d(n,["trainingDataset"]);l!=null&&xV(l);const u=d(n,["config"]);return u!=null&&uV(u,t),t}function fV(n,e){const t={},s=d(n,["baseModel"]);s!=null&&p(t,["baseModel"],s);const r=d(n,["preTunedModel"]);r!=null&&p(t,["preTunedModel"],r);const l=d(n,["trainingDataset"]);l!=null&&SV(l,t,e);const u=d(n,["config"]);return u!=null&&cV(u,t,e),t}function hV(n,e){const t={},s=d(n,["name"]);return s!=null&&p(t,["_url","name"],s),t}function pV(n,e){const t={},s=d(n,["name"]);return s!=null&&p(t,["_url","name"],s),t}function mV(n,e,t){const s={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),s}function gV(n,e,t){const s={},r=d(n,["pageSize"]);e!==void 0&&r!=null&&p(e,["_query","pageSize"],r);const l=d(n,["pageToken"]);e!==void 0&&l!=null&&p(e,["_query","pageToken"],l);const u=d(n,["filter"]);return e!==void 0&&u!=null&&p(e,["_query","filter"],u),s}function yV(n,e){const t={},s=d(n,["config"]);return s!=null&&mV(s,t),t}function vV(n,e){const t={},s=d(n,["config"]);return s!=null&&gV(s,t),t}function _V(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const l=d(n,["tunedModels"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>OS(f))),p(t,["tuningJobs"],u)}return t}function EV(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const r=d(n,["nextPageToken"]);r!=null&&p(t,["nextPageToken"],r);const l=d(n,["tuningJobs"]);if(l!=null){let u=l;Array.isArray(u)&&(u=u.map(f=>kp(f))),p(t,["tuningJobs"],u)}return t}function TV(n,e){const t={},s=d(n,["name"]);s!=null&&p(t,["model"],s);const r=d(n,["name"]);return r!=null&&p(t,["endpoint"],r),t}function xV(n,e){const t={};if(d(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(d(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const s=d(n,["examples"]);if(s!=null){let r=s;Array.isArray(r)&&(r=r.map(l=>l)),p(t,["examples","examples"],r)}return t}function SV(n,e,t){const s={};let r=d(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(r==="PREFERENCE_TUNING"){const u=d(n,["gcsUri"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}let l=d(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["supervisedTuningSpec","trainingDatasetUri"],u)}else if(l==="PREFERENCE_TUNING"){const u=d(n,["vertexDatasetResource"]);e!==void 0&&u!=null&&p(e,["preferenceOptimizationSpec","trainingDatasetUri"],u)}if(d(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return s}function OS(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["state"]);l!=null&&p(t,["state"],eS(l));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["tuningTask","startTime"]);f!=null&&p(t,["startTime"],f);const g=d(n,["tuningTask","completeTime"]);g!=null&&p(t,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=d(n,["description"]);_!=null&&p(t,["description"],_);const T=d(n,["baseModel"]);T!=null&&p(t,["baseModel"],T);const x=d(n,["_self"]);return x!=null&&p(t,["tunedModel"],TV(x)),t}function kp(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["state"]);l!=null&&p(t,["state"],eS(l));const u=d(n,["createTime"]);u!=null&&p(t,["createTime"],u);const f=d(n,["startTime"]);f!=null&&p(t,["startTime"],f);const g=d(n,["endTime"]);g!=null&&p(t,["endTime"],g);const h=d(n,["updateTime"]);h!=null&&p(t,["updateTime"],h);const _=d(n,["error"]);_!=null&&p(t,["error"],_);const T=d(n,["description"]);T!=null&&p(t,["description"],T);const x=d(n,["baseModel"]);x!=null&&p(t,["baseModel"],x);const w=d(n,["tunedModel"]);w!=null&&p(t,["tunedModel"],w);const k=d(n,["preTunedModel"]);k!=null&&p(t,["preTunedModel"],k);const q=d(n,["supervisedTuningSpec"]);q!=null&&p(t,["supervisedTuningSpec"],q);const P=d(n,["preferenceOptimizationSpec"]);P!=null&&p(t,["preferenceOptimizationSpec"],P);const H=d(n,["tuningDataStats"]);H!=null&&p(t,["tuningDataStats"],H);const te=d(n,["encryptionSpec"]);te!=null&&p(t,["encryptionSpec"],te);const j=d(n,["partnerModelTuningSpec"]);j!=null&&p(t,["partnerModelTuningSpec"],j);const oe=d(n,["customBaseModel"]);oe!=null&&p(t,["customBaseModel"],oe);const de=d(n,["experiment"]);de!=null&&p(t,["experiment"],de);const ce=d(n,["labels"]);ce!=null&&p(t,["labels"],ce);const D=d(n,["outputUri"]);D!=null&&p(t,["outputUri"],D);const M=d(n,["pipelineJob"]);M!=null&&p(t,["pipelineJob"],M);const R=d(n,["serviceAccount"]);R!=null&&p(t,["serviceAccount"],R);const O=d(n,["tunedModelDisplayName"]);O!=null&&p(t,["tunedModelDisplayName"],O);const U=d(n,["veoTuningSpec"]);return U!=null&&p(t,["veoTuningSpec"],U),t}function AV(n,e){const t={},s=d(n,["sdkHttpResponse"]);s!=null&&p(t,["sdkHttpResponse"],s);const r=d(n,["name"]);r!=null&&p(t,["name"],r);const l=d(n,["metadata"]);l!=null&&p(t,["metadata"],l);const u=d(n,["done"]);u!=null&&p(t,["done"],u);const f=d(n,["error"]);return f!=null&&p(t,["error"],f),t}function iT(n,e){const t={},s=d(n,["gcsUri"]);s!=null&&p(t,["validationDatasetUri"],s);const r=d(n,["vertexDatasetResource"]);return r!=null&&p(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bV extends ds{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Wo(cs.PAGED_ITEM_TUNING_JOBS,s=>this.listInternal(s),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var s;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((s=t.config)===null||s===void 0)&&s.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let u="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?u=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(u=l.name.split("/operations/")[0]),{name:u,state:Sp.JOB_STATE_QUEUED}}}}async getInternal(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=pV(e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>kp(_))}else{const h=hV(e);return f=me("{name}",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>OS(_))}}async listInternal(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=vV(e);return f=me("tuningJobs",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=EV(_),x=new NE;return Object.assign(x,T),x})}else{const h=yV(e);return f=me("tunedModels",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=_V(_),x=new NE;return Object.assign(x,T),x})}}async cancel(e){var t,s,r,l;let u,f="",g={};if(this.apiClient.isVertexAI()){const h=rV(e);return f=me("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=lV(_),x=new RE;return Object.assign(x,T),x})}else{const h=oV(e);return f=me("{name}:cancel",h._url),g=h._query,delete h._url,delete h._query,u=this.apiClient.request({path:f,queryParams:g,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),u.then(_=>{const T=aV(_),x=new RE;return Object.assign(x,T),x})}}async tuneInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI()){const f=fV(e,e);return l=me("tuningJobs",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>kp(g))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,s;let r,l="",u={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=dV(e);return l=me("tunedModels",f._url),u=f._query,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:u,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(g=>g.json().then(h=>{const _=h;return _.sdkHttpResponse={headers:g.headers},_})),r.then(g=>AV(g))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wV{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const CV=1024*1024*8,IV=3,NV=1e3,RV=2,ld="x-goog-upload-status";async function MV(n,e,t){var s;const r=await qS(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[ld])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function DV(n,e,t){var s;const r=await qS(n,e,t),l=await(r==null?void 0:r.json());if(((s=r==null?void 0:r.headers)===null||s===void 0?void 0:s[ld])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const u=Kx(l),f=new Cm;return Object.assign(f,u),f}async function qS(n,e,t){var s,r;let l=0,u=0,f=new Ap(new Response),g="upload";for(l=n.size;u<l;){const h=Math.min(CV,l-u),_=n.slice(u,u+h);u+h>=l&&(g+=", finalize");let T=0,x=NV;for(;T<IV&&(f=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":g,"X-Goog-Upload-Offset":String(u),"Content-Length":String(h)}}}),!(!((s=f==null?void 0:f.headers)===null||s===void 0)&&s[ld]));)T++,await VV(x),x=x*RV;if(u+=h,((r=f==null?void 0:f.headers)===null||r===void 0?void 0:r[ld])!=="active")break;if(l<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return f}async function PV(n){return{size:n.size,type:n.type}}function VV(n){return new Promise(e=>setTimeout(e,n))}class kV{async upload(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await MV(e,t,s)}async uploadToFileSearchStore(e,t,s){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await DV(e,t,s)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await PV(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UV{create(e,t,s){return new LV(e,t,s)}}class LV{constructor(e,t,s){this.url=e,this.headers=t,this.callbacks=s}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sT="x-goog-api-key";class OV{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(sT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(sT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qV="gl-node/";class BS{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Ht({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const s=VN(e.httpOptions,e.vertexai,void 0,void 0);s&&(e.httpOptions?e.httpOptions.baseUrl=s:e.httpOptions={baseUrl:s}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new OV(this.apiKey);this.apiClient=new PP({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:qV+"web",uploader:new kV,downloader:new wV}),this.models=new WP(this.apiClient),this.live=new YP(this.apiClient,r,new UV),this.batches=new u2(this.apiClient),this.chats=new z2(this.models,this.apiClient),this.caches=new G2(this.apiClient),this.files=new eM(this.apiClient),this.operations=new ZP(this.apiClient),this.authTokens=new m4(this.apiClient),this.tunings=new bV(this.apiClient),this.fileSearchStores=new S4(this.apiClient)}}const GS="PLACEHOLDER_API_KEY",ud=async n=>{var e;try{const t=new BS({apiKey:GS}),s="gemini-3-flash-preview",r=`
      You are a content filter for a high-security student platform.
      Your task is to take the provided text and replace EVERY instance of swearing, profanity, slurs, or highly toxic language with hashtags (#) of equal length to the word (e.g., "fuck" becomes "####").
      Do not change any other part of the sentence. Maintain original punctuation and casing for non-flagged words.
      
      Input Text: "${n}"
      
      Respond ONLY with the sanitized text string.
    `;return((e=(await t.models.generateContent({model:s,contents:r})).text)==null?void 0:e.trim())||n}catch(t){return console.error("Gemini sanitization failed",t),n}},FS=async n=>{try{const e=new BS({apiKey:GS}),t="gemini-3-flash-preview",s=`
      Analyze the following text for a student platform. 
      Check for: Extreme Hate Speech, Explicit Threats of Violence, or Illegal content.
      Minor profanity will be handled by a different filter, so focus on high-severity risks.
      
      Text: "${n}"
      
      Respond with JSON only: { "safe": boolean, "reason": string | null }
    `,l=(await e.models.generateContent({model:t,contents:s})).text;if(!l)return{safe:!0};const u=l.replace(/```json/g,"").replace(/```/g,"").trim();return JSON.parse(u)}catch(e){return console.error("Gemini safety check failed",e),{safe:!0}}},BV=({currentUser:n,refreshTrigger:e,onActivity:t})=>{const[s,r]=pe.useState([]),[l,u]=pe.useState(null),[f,g]=pe.useState({}),[h,_]=pe.useState(""),[T,x]=pe.useState(!1),[w,k]=pe.useState(!1),[q,P]=pe.useState(["",""]),[H,te]=pe.useState("public"),[j,oe]=pe.useState([]),[de,ce]=pe.useState({});pe.useEffect(()=>{const ue=Ne.subscribeToPosts(Se=>{r(B=>H==="public"?Se.filter(Q=>Q.category==="general"||Q.category==="poll"||Q.category==="announcement"):U(n)?Se.filter(Q=>Q.category==="ticket"):Se.filter(Q=>Q.category==="ticket"&&Q.authorId===n.studentId))});return D(),()=>ue()},[H]);const D=async()=>{const[ue,Se]=await Promise.all([Ne.getSettings(),Ne.getAllUsers()]),B={};Se.forEach(le=>B[le.studentId]=le),g(B);let Q=[];H==="public"?Q=allPosts.filter(le=>le.category==="general"||le.category==="poll"||le.category==="announcement"):U(n)?Q=allPosts.filter(le=>le.category==="ticket"):Q=allPosts.filter(le=>le.category==="ticket"&&le.authorId===n.studentId),r(Q),u(ue)},M=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],R=M.indexOf(n.currentCard),O=l?M.indexOf(l.minRankToPost):0,U=ue=>M.indexOf(ue.currentCard)>=9||ue.isAdmin,V=(R>=O||n.isAdmin)&&H==="public",N=H==="council",ye=async()=>{if(!h.trim())return;x(!0);const ue=await ud(h),Se=await FS(ue),B=H==="council"?"ticket":w?"poll":"general",Q={id:`post-${Date.now()}`,authorId:n.studentId,authorName:n.username,authorRank:n.currentCard,content:ue,category:B,status:Se.safe?"approved":"flagged",upvotes:[],downvotes:[],comments:[],pollOptions:w?q.map(le=>({text:le,votes:[]})):void 0,createdAt:new Date().toISOString()};await Ne.savePost(Q),await Ne.saveUser({...n,totalPoints:n.totalPoints+nd.POST}),_(""),x(!1),t()},ee=async ue=>{const Se=de[ue];if(!(Se!=null&&Se.trim()))return;const B=s.find(Ee=>Ee.id===ue);if(!B)return;const Q=await ud(Se),le={id:`c-${Date.now()}`,authorId:n.studentId,authorName:n.username,content:Q,createdAt:new Date().toISOString()},he={...B,comments:[...B.comments||[],le]};await Ne.savePost(he),ce({...de,[ue]:""})},F=async(ue,Se)=>{ue.stopPropagation(),ue.preventDefault(),r(B=>B.filter(Q=>Q.id!==Se)),await Ne.deletePost(Se),t()},ae=async(ue,Se,B)=>{ue.stopPropagation(),ue.preventDefault(),r(Q=>Q.map(le=>le.id===Se?{...le,comments:le.comments.filter(he=>he.id!==B)}:le)),await Ne.deleteComment(Se,B)},_e=ue=>{j.includes(ue)?oe(Se=>Se.filter(B=>B!==ue)):oe(Se=>[...Se,ue])};return E.jsxs("div",{className:"max-w-3xl mx-auto space-y-8 pb-32 animate-in fade-in duration-500",children:[E.jsxs("div",{className:"flex bg-black border border-white/10 rounded-xl p-1 relative z-10",children:[E.jsx("button",{onClick:()=>te("public"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-widest rounded-lg transition-all ${H==="public"?"bg-white text-black shadow-lg":"text-neutral-500 hover:text-white"}`,children:"Public Broadcast"}),E.jsxs("button",{onClick:()=>te("council"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-widest rounded-lg transition-all flex items-center justify-center gap-2 ${H==="council"?"bg-emerald-900/50 text-emerald-400 border border-emerald-500/50 shadow-[0_0_20px_rgba(16,185,129,0.2)]":"text-neutral-500 hover:text-emerald-500"}`,children:[E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Council Uplink"]})]}),E.jsxs("div",{className:"flex justify-between items-center px-2",children:[E.jsx("h2",{className:`text-xl font-display font-bold ${H==="council"?"text-emerald-500":"text-white"}`,children:H==="public"?"Global Network":"Secure Channel"}),E.jsxs("div",{className:"text-[10px] font-mono text-neutral-500 uppercase tracking-widest",children:["Frequency: ",H==="public"?"Open":"Encrypted"]})]}),(V||N)&&E.jsxs("div",{className:`glass-panel rounded-2xl border p-6 shadow-2xl relative overflow-hidden ${H==="council"?"border-emerald-500/20":"border-white/5"}`,children:[E.jsx("div",{className:`absolute top-0 left-0 w-1 h-full bg-gradient-to-b ${H==="council"?"from-emerald-500 to-transparent":"from-brand-red to-transparent"}`}),E.jsx("div",{className:"flex gap-6",children:E.jsxs("div",{className:"flex-1",children:[E.jsx("textarea",{value:h,onChange:ue=>_(ue.target.value),placeholder:H==="council"?"Send secure message to the High Table...":"Share intelligence...",className:"w-full bg-black/30 border border-white/10 rounded-xl p-4 text-sm text-white outline-none h-24 resize-none focus:border-white/20"}),E.jsxs("div",{className:"flex justify-between items-center mt-4",children:[H==="public"?E.jsx("button",{onClick:()=>k(!w),className:"text-[10px] text-neutral-500 font-bold uppercase tracking-widest hover:text-white",children:w?"Poll Mode Active":"Toggle Poll"}):E.jsxs("div",{className:"text-[10px] text-emerald-600 font-mono flex items-center gap-2",children:[E.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full animate-pulse"}),"ENCRYPTED"]}),E.jsx("button",{onClick:ye,disabled:T,className:`px-6 py-2 text-white text-xs font-bold uppercase rounded-lg shadow-lg ${H==="council"?"bg-emerald-700 hover:bg-emerald-600":"bg-brand-red hover:bg-brand-red/80"}`,children:T?"...":H==="council"?"Transmit":"Post"})]})]})})]}),E.jsxs("div",{className:"space-y-6",children:[s.map(ue=>{var Ee,Re;const Se=ue.authorId===n.studentId,B=n.isAdmin||Se,Q=f[ue.authorId],le=(Q==null?void 0:Q.username)||ue.authorName,he=(Q==null?void 0:Q.currentCard)||ue.authorRank;return E.jsxs("div",{className:`glass-panel border rounded-2xl p-6 relative group ${ue.category==="ticket"?"border-emerald-500/20 bg-emerald-950/10":"border-white/5"}`,children:[B&&E.jsx("button",{onClick:Ce=>F(Ce,ue.id),className:"absolute top-4 right-4 z-50 p-2 bg-black hover:bg-red-500 text-neutral-500 hover:text-white rounded-lg transition-all border border-white/10 hover:border-red-500 shadow-xl cursor-pointer",title:"Purge Post",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),E.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[E.jsx(rs,{rankId:he,size:"sm"}),E.jsxs("div",{children:[E.jsxs("div",{className:`font-bold text-sm ${ue.category==="ticket"?"text-emerald-400":"text-white"}`,children:[le,ue.category==="ticket"&&E.jsx("span",{className:"ml-2 text-[10px] bg-emerald-500/20 px-1.5 py-0.5 rounded border border-emerald-500/30",children:"TICKET"})]}),E.jsx("div",{className:"text-[10px] text-neutral-600 font-mono",children:new Date(ue.createdAt).toLocaleDateString()})]})]}),E.jsx("p",{className:"text-neutral-300 text-sm font-light leading-relaxed whitespace-pre-wrap",children:ue.content}),ue.category==="ticket"&&E.jsxs("div",{className:"mt-6 border-t border-emerald-500/20 pt-4",children:[E.jsx("button",{onClick:()=>_e(ue.id),className:"text-[10px] font-bold uppercase tracking-widest text-emerald-600 hover:text-emerald-400 flex items-center gap-2",children:j.includes(ue.id)?"Hide Responses":`View Responses (${((Ee=ue.comments)==null?void 0:Ee.length)||0})`}),j.includes(ue.id)&&E.jsxs("div",{className:"mt-4 space-y-4 animate-in fade-in slide-in-from-top-2",children:[E.jsxs("div",{className:"space-y-3 max-h-40 overflow-y-auto custom-scrollbar",children:[(Re=ue.comments)==null?void 0:Re.map(Ce=>{const pt=n.isAdmin||Ce.authorId===n.studentId,We=f[Ce.authorId],qi=(We==null?void 0:We.username)||Ce.authorName;return E.jsxs("div",{className:"bg-emerald-900/20 border border-emerald-500/10 p-3 rounded-lg relative group/comment hover:bg-emerald-900/30 transition-colors",children:[pt&&E.jsx("button",{onClick:hs=>ae(hs,ue.id,Ce.id),className:"absolute top-2 right-2 bg-black text-neutral-500 hover:text-red-500 p-1.5 rounded transition-colors z-50 cursor-pointer border border-white/5",title:"Delete Comment",children:E.jsx("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),E.jsxs("div",{className:"flex justify-between items-baseline mb-1 mr-8",children:[E.jsx("span",{className:"text-emerald-400 text-xs font-bold",children:qi}),E.jsx("span",{className:"text-[9px] text-emerald-700/70",children:new Date(Ce.createdAt).toLocaleTimeString()})]}),E.jsx("p",{className:"text-neutral-300 text-xs pr-2",children:Ce.content})]},Ce.id)}),(!ue.comments||ue.comments.length===0)&&E.jsx("div",{className:"text-neutral-600 text-xs italic",children:"Awaiting Council Response..."})]}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"text",value:de[ue.id]||"",onChange:Ce=>ce({...de,[ue.id]:Ce.target.value}),placeholder:"Add response...",className:"flex-1 bg-black/40 border border-emerald-500/30 rounded px-3 py-2 text-xs text-white outline-none focus:border-emerald-500"}),E.jsx("button",{onClick:()=>ee(ue.id),className:"px-4 py-2 bg-emerald-800 text-emerald-100 text-[10px] font-bold uppercase rounded hover:bg-emerald-700",children:"Reply"})]})]})]})]},ue.id)}),s.length===0&&E.jsx("div",{className:"text-center py-20 text-neutral-600 font-mono text-sm border-2 border-dashed border-white/5 rounded-2xl",children:H==="public"?"No signals detected on the network.":"Secure Channel Clear. No tickets."})]})]})},GV=({user:n})=>{const e=oo[n.currentCard],t=n.currentCard==="A",s=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],r=s.indexOf(n.currentCard),l=t?"A":s[r+1]||"A",u=oo[l],f=t?100:Math.min(99.9,Math.max(0,(n.totalPoints-e.minPoints)/(u.minPoints-e.minPoints)*100)),g=e.voteWeight;return E.jsxs("div",{className:"space-y-8 pb-32 animate-in fade-in duration-700 slide-in-from-bottom-4",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end gap-4 border-b border-white/5 pb-6",children:[E.jsxs("div",{children:[E.jsx("h3",{className:"text-brand-red font-mono text-xs uppercase tracking-[0.3em] mb-2",children:"Welcome Back"}),E.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white tracking-tight",children:n.username})]}),E.jsxs("div",{className:"text-right hidden md:block",children:[E.jsx("div",{className:"text-xs text-neutral-500 font-mono tracking-widest uppercase mb-1",children:"Student ID"}),E.jsx("div",{className:"text-xl text-neutral-300 font-display font-bold tracking-wider",children:n.studentId})]})]}),E.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[E.jsxs("div",{className:"lg:col-span-7 glass-panel rounded-2xl p-8 relative overflow-hidden group",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-neutral-800/50 to-black/50 z-0"}),E.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5 text-9xl font-display font-bold text-white select-none group-hover:scale-105 transition-transform duration-1000 z-0",children:n.currentCard.replace("","")}),E.jsxs("div",{className:"relative z-10 flex flex-col sm:flex-row items-center sm:items-start gap-8",children:[E.jsx("div",{className:"transform hover:scale-105 transition-transform duration-500 hover:rotate-2 shadow-2xl shadow-black/50",children:E.jsx(rs,{rankId:n.currentCard,size:"lg"})}),E.jsxs("div",{className:"flex-1 w-full text-center sm:text-left",children:[E.jsxs("div",{className:"inline-block px-3 py-1 bg-brand-red/10 border border-brand-red/20 rounded-full text-brand-red text-[10px] font-bold uppercase tracking-[0.2em] mb-3",children:[e.tier," Clearance"]}),E.jsx("h2",{className:"text-3xl font-display font-bold text-white mb-2 tracking-wide",children:e.name}),E.jsx("p",{className:"text-neutral-400 text-sm leading-relaxed mb-8 max-w-sm",children:t?"You have attained the ultimate authority: Ace of Spades. The system recognizes your absolute sovereignty.":`You have ascended to the tier of ${e.tier}. Your influence is growing within the system. Maintain momentum to reach the Council.`}),E.jsxs("div",{className:"space-y-2",children:[E.jsxs("div",{className:"flex justify-between text-xs font-mono font-medium text-neutral-400",children:[E.jsxs("span",{className:"text-brand-gold",children:[n.totalPoints.toLocaleString()," PTS"]}),E.jsx("span",{children:t?"MAX CLEARANCE":`${u.minPoints.toLocaleString()} PTS`})]}),E.jsx("div",{className:"h-1.5 bg-neutral-900 rounded-full overflow-hidden border border-white/5",children:E.jsx("div",{className:"h-full bg-gradient-to-r from-brand-red via-brand-crimson to-brand-gold shadow-[0_0_10px_rgba(220,38,38,0.5)]",style:{width:`${f}%`,transition:"width 1.5s cubic-bezier(0.4, 0, 0.2, 1)"}})}),E.jsx("p",{className:"text-right text-[10px] text-neutral-600 mt-1 uppercase tracking-widest",children:t?"TOP CLEARANCE ATTAINED":`Target: ${u.name}`})]})]})]})]}),E.jsx("div",{className:"lg:col-span-5 space-y-4",children:E.jsxs("div",{className:"grid grid-cols-2 gap-4 h-full",children:[E.jsxs("div",{className:"glass-panel p-5 rounded-2xl flex flex-col justify-between group hover:bg-white/5 transition-colors",children:[E.jsx("div",{className:"flex justify-between items-start",children:E.jsx("div",{className:"p-2 bg-neutral-900/50 rounded-lg text-neutral-400 group-hover:text-brand-gold transition-colors",children:E.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z"}),E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"})]})})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-[10px] text-neutral-500 uppercase tracking-widest font-bold mb-1",children:"Impact"}),E.jsx("p",{className:"text-3xl font-display font-bold text-white",children:n.stats.commentsCreated+n.stats.votesGiven+n.stats.postsCreated}),E.jsx("p",{className:"text-[9px] text-neutral-600 font-mono",children:"Total System Interactions"})]})]}),E.jsxs("div",{className:"glass-panel p-5 rounded-2xl flex flex-col justify-between group hover:bg-white/5 transition-colors",children:[E.jsx("div",{className:"flex justify-between items-start",children:E.jsx("div",{className:"p-2 bg-neutral-900/50 rounded-lg text-neutral-400 group-hover:text-brand-red transition-colors",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})}),E.jsxs("div",{children:[E.jsx("p",{className:"text-[10px] text-neutral-500 uppercase tracking-widest font-bold mb-1",children:"Influence"}),E.jsxs("p",{className:"text-3xl font-display font-bold text-white",children:[g,"x"]}),E.jsx("p",{className:"text-[9px] text-neutral-600 font-mono",children:"Weighted Vote Power"})]})]}),E.jsx("div",{className:"col-span-2 glass-panel p-6 rounded-2xl relative overflow-hidden flex items-center justify-center opacity-50",children:E.jsx("p",{className:"text-xs font-mono text-neutral-600 uppercase tracking-widest",children:"Protocol Directives Online"})})]})})]}),E.jsxs("div",{className:"glass-panel rounded-2xl p-8 border-t border-white/5",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[E.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-neutral-800 to-transparent"}),E.jsx("h3",{className:"text-neutral-500 font-mono text-[10px] uppercase tracking-[0.3em]",children:"System Privileges"}),E.jsx("div",{className:"h-px flex-1 bg-gradient-to-r from-transparent via-neutral-800 to-transparent"})]}),E.jsx("div",{className:"flex flex-wrap justify-center gap-3",children:e.permissions.map(h=>E.jsxs("div",{className:"px-4 py-2 bg-black/40 border border-white/5 rounded-lg text-xs text-neutral-400 font-mono hover:border-brand-red/30 hover:text-white transition-colors cursor-default",children:[E.jsx("span",{className:"text-brand-red/50 mr-2",children:">"}),h.toUpperCase().replace(/([A-Z])/g," $1").trim()]},h))})]})]})},FV=()=>{const[n,e]=pe.useState([]),[t,s]=pe.useState(!0);return pe.useEffect(()=>{(async()=>{const u=(await Ne.getAllUsers()).filter(f=>!f.isGuest).sort((f,g)=>g.totalPoints-f.totalPoints);e(u),s(!1)})()},[]),t?E.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[E.jsx("div",{className:"w-12 h-1 bg-neutral-800 rounded-full overflow-hidden",children:E.jsx("div",{className:"w-full h-full bg-brand-red animate-shine",style:{backgroundSize:"200% auto"}})}),E.jsx("p",{className:"text-xs font-mono text-neutral-500 uppercase tracking-widest",children:"Accessing Mainframe..."})]}):E.jsxs("div",{className:"pb-32 animate-in fade-in duration-700",children:[E.jsxs("div",{className:"flex items-center justify-between mb-12",children:[E.jsxs("div",{children:[E.jsx("h2",{className:"text-3xl font-display font-bold text-white tracking-wide",children:"Elite Rankings"}),E.jsx("p",{className:"text-neutral-500 text-xs mt-1 font-mono uppercase tracking-widest",children:"Global Competition  Season 1"})]}),E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("span",{className:"w-2 h-2 bg-brand-red rounded-full animate-pulse"}),E.jsx("span",{className:"text-[10px] font-mono text-brand-red font-bold",children:"LIVE"})]})]}),E.jsxs("div",{className:"flex items-end justify-center gap-4 md:gap-8 mb-16 px-4",children:[n[1]&&E.jsxs("div",{className:"flex flex-col items-center group relative w-1/3 max-w-[140px]",children:[E.jsx("div",{className:"absolute inset-0 bg-white/5 blur-2xl rounded-full opacity-0 group-hover:opacity-20 transition-opacity"}),E.jsx(rs,{rankId:n[1].currentCard,size:"md",className:"mb-4 transform group-hover:-translate-y-4 transition-transform duration-500 relative z-10"}),E.jsxs("div",{className:"w-full bg-gradient-to-b from-neutral-400 to-neutral-600 h-32 flex flex-col items-center justify-start pt-4 rounded-t-xl relative overflow-hidden border-t border-white/20",children:[E.jsx("div",{className:"absolute top-0 inset-x-0 h-px bg-white/50"}),E.jsx("span",{className:"text-4xl font-display font-black text-white/20 mb-1",children:"2"}),E.jsx("span",{className:"text-xs font-bold text-white truncate w-24 text-center px-2",children:n[1].username}),E.jsx("span",{className:"text-[10px] text-neutral-300 font-mono mt-1",children:n[1].totalPoints.toLocaleString()})]})]}),n[0]&&E.jsxs("div",{className:"flex flex-col items-center group relative w-1/3 max-w-[160px] z-10 -mx-2",children:[E.jsx("div",{className:"absolute inset-0 bg-brand-gold/10 blur-3xl rounded-full opacity-50 animate-pulse-slow"}),E.jsxs("div",{className:"relative",children:[E.jsx("div",{className:"absolute -top-10 left-1/2 -translate-x-1/2 text-brand-gold text-2xl animate-float filter drop-shadow-[0_0_10px_rgba(251,191,36,0.5)]",children:""}),E.jsx(rs,{rankId:n[0].currentCard,size:"lg",className:"mb-6 transform group-hover:-translate-y-4 transition-transform duration-500 shadow-[0_0_40px_rgba(251,191,36,0.2)]"})]}),E.jsxs("div",{className:"w-full bg-gradient-to-b from-brand-gold to-yellow-700 h-44 flex flex-col items-center justify-start pt-6 rounded-t-xl relative overflow-hidden border-t border-white/30 shadow-2xl",children:[E.jsx("div",{className:"absolute top-0 inset-x-0 h-px bg-white/60"}),E.jsx("span",{className:"text-5xl font-display font-black text-white/20 mb-2",children:"1"}),E.jsx("span",{className:"text-sm font-bold text-white truncate w-32 text-center px-2",children:n[0].username}),E.jsxs("span",{className:"text-[10px] text-yellow-100 font-mono font-bold mt-1 bg-black/20 px-2 py-0.5 rounded",children:[n[0].totalPoints.toLocaleString()," PTS"]})]})]}),n[2]&&E.jsxs("div",{className:"flex flex-col items-center group relative w-1/3 max-w-[140px]",children:[E.jsx("div",{className:"absolute inset-0 bg-brand-red/5 blur-2xl rounded-full opacity-0 group-hover:opacity-20 transition-opacity"}),E.jsx(rs,{rankId:n[2].currentCard,size:"md",className:"mb-4 transform group-hover:-translate-y-4 transition-transform duration-500 relative z-10"}),E.jsxs("div",{className:"w-full bg-gradient-to-b from-brand-darkRed to-neutral-900 h-24 flex flex-col items-center justify-start pt-4 rounded-t-xl relative overflow-hidden border-t border-white/20",children:[E.jsx("div",{className:"absolute top-0 inset-x-0 h-px bg-white/40"}),E.jsx("span",{className:"text-4xl font-display font-black text-white/20 mb-1",children:"3"}),E.jsx("span",{className:"text-xs font-bold text-neutral-300 truncate w-24 text-center px-2",children:n[2].username}),E.jsx("span",{className:"text-[10px] text-neutral-500 font-mono mt-1",children:n[2].totalPoints.toLocaleString()})]})]})]}),E.jsxs("div",{className:"glass-panel border border-white/5 rounded-2xl overflow-hidden backdrop-blur-md",children:[E.jsxs("div",{className:"grid grid-cols-12 gap-4 px-6 py-3 border-b border-white/5 text-[10px] font-mono text-neutral-500 uppercase tracking-widest",children:[E.jsx("div",{className:"col-span-1 text-center",children:"Rank"}),E.jsx("div",{className:"col-span-7",children:"Agent"}),E.jsx("div",{className:"col-span-4 text-right",children:"Score"})]}),n.slice(3).map((r,l)=>E.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center px-6 py-4 border-b border-white/5 hover:bg-white/5 transition-colors group",children:[E.jsx("div",{className:"col-span-1 text-center font-mono font-bold text-neutral-600 group-hover:text-white transition-colors",children:l+4}),E.jsxs("div",{className:"col-span-7 flex items-center gap-4",children:[E.jsx("div",{className:"w-8 h-10 rounded bg-neutral-900 border border-white/5 flex items-center justify-center text-xs font-bold text-neutral-400 group-hover:border-brand-red/30 transition-colors",children:r.currentCard.replace("","")}),E.jsxs("div",{className:"min-w-0",children:[E.jsx("div",{className:"font-bold text-sm text-neutral-300 group-hover:text-white truncate transition-colors",children:r.username}),E.jsx("div",{className:"text-[10px] text-neutral-600 group-hover:text-neutral-500",children:r.house})]})]}),E.jsx("div",{className:"col-span-4 text-right",children:E.jsx("div",{className:"font-mono text-brand-gold font-bold",children:r.totalPoints.toLocaleString()})})]},r.studentId))]})]})},HV=({currentUser:n,refreshTrigger:e,onActivity:t})=>{const[s,r]=pe.useState([]),[l,u]=pe.useState(""),[f,g]=pe.useState(!1),[h,_]=pe.useState({}),[T,x]=pe.useState({}),[w,k]=pe.useState([]),P=["2","3","4","5","6","7","8","9","10","J","Q","K","A"].indexOf(n.currentCard),H=P>9,te=n.isAdmin||P>=11;pe.useEffect(()=>{j()},[e]);const j=async()=>{const[V,N]=await Promise.all([Ne.getPosts(),Ne.getAllUsers()]),ye={};N.forEach(F=>ye[F.studentId]=F),_(ye);const ee=V.filter(F=>F.category==="proposal");r(ee)},oe=V=>{var ye;let N=0;return V.upvotes.forEach(ee=>{const F=h[ee],ae=F?oo[F.currentCard].voteWeight:1;N+=ae}),(ye=V.downvotes)==null||ye.forEach(ee=>{const F=h[ee],ae=F?oo[F.currentCard].voteWeight:1;N-=ae}),N},de=async()=>{if(!l.trim()||!H)return;g(!0);const V=await ud(l),N=await FS(V);let ye="approved";N.safe||(ye="flagged");const ee={id:`proposal-${Date.now()}`,authorId:n.studentId,authorName:n.username,authorRank:n.currentCard,content:V,category:"proposal",status:ye,upvotes:[],downvotes:[],comments:[],createdAt:new Date().toISOString()};await Ne.savePost(ee),u(""),g(!1),j(),t()},ce=async(V,N)=>{if(V.status==="passed"||V.status==="failed"||V.upvotes.includes(n.studentId)||V.downvotes&&V.downvotes.includes(n.studentId))return;const ye=N==="up";let ee=[...V.upvotes],F=[...V.downvotes||[]];ye?ee.push(n.studentId):F.push(n.studentId);const ae={...V,upvotes:ee,downvotes:F};await Ne.savePost(ae);const _e=await Ne.getUser(n.studentId);if(_e){const ue={..._e,totalPoints:_e.totalPoints+nd.VOTE_ACTION,stats:{..._e.stats,votesGiven:_e.stats.votesGiven+1}};await Ne.saveUser(ue),t()}j()},D=async(V,N)=>{const ee={...V,status:N==="pass"?"passed":"failed"};await Ne.savePost(ee),j()},M=async(V,N)=>{V.stopPropagation(),V.preventDefault(),r(ye=>ye.filter(ee=>ee.id!==N)),await Ne.deletePost(N),t()},R=async V=>{const N=T[V];if(!(N!=null&&N.trim()))return;const ye=s.find(_e=>_e.id===V);if(!ye)return;const ee=await ud(N),F={id:`c-${Date.now()}`,authorId:n.studentId,authorName:n.username,content:ee.trim(),createdAt:new Date().toISOString()},ae={...ye,comments:[...ye.comments||[],F]};await Ne.savePost(ae),x({...T,[V]:""}),j()},O=async(V,N,ye)=>{V.stopPropagation(),V.preventDefault(),r(ee=>ee.map(F=>F.id===N&&F.comments?{...F,comments:F.comments.filter(ae=>ae.id!==ye)}:F)),await Ne.deleteComment(N,ye)},U=V=>{w.includes(V)?k(w.filter(N=>N!==V)):k([...w,V])};return E.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 pb-32 animate-in fade-in duration-700",children:[E.jsxs("div",{className:"text-center py-8 relative",children:[E.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-brand-gold/5 blur-[80px] rounded-full pointer-events-none"}),E.jsx("h1",{className:"text-4xl md:text-5xl font-display font-black text-white tracking-tight relative z-10 mb-2",children:"THE COUNCIL CHAMBER"}),E.jsx("p",{className:"text-brand-gold font-mono text-xs uppercase tracking-[0.4em] relative z-10",children:"High Table Policy Proposals"})]}),H?E.jsxs("div",{className:"glass-panel rounded-2xl border border-brand-gold/20 p-8 shadow-[0_0_50px_rgba(0,0,0,0.5)] relative overflow-hidden group",children:[E.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-brand-gold to-transparent"}),E.jsxs("div",{className:"flex gap-8",children:[E.jsx("div",{className:"hidden sm:block",children:E.jsx(rs,{rankId:n.currentCard,size:"md",className:"shadow-[0_0_20px_rgba(251,191,36,0.1)]"})}),E.jsxs("div",{className:"flex-1",children:[E.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[E.jsx("span",{className:"text-brand-gold font-display font-bold uppercase tracking-widest text-sm",children:"Submit New Directive"}),E.jsx("div",{className:"px-2 py-1 rounded bg-brand-gold/10 border border-brand-gold/20 text-[10px] text-brand-gold font-mono uppercase",children:"Clearance Verified"})]}),E.jsx("textarea",{value:l,onChange:V=>u(V.target.value),placeholder:"Outline your policy for the future of Greenhead...",className:"w-full bg-black/50 border border-brand-gold/20 rounded-xl p-6 text-base text-white placeholder-neutral-600 focus:border-brand-gold focus:ring-1 focus:ring-brand-gold/50 focus:outline-none resize-none h-40 transition-all font-serif italic leading-relaxed"}),E.jsx("div",{className:"flex justify-end mt-6",children:E.jsx("button",{onClick:de,disabled:f||!l.trim(),className:`px-8 py-3 rounded-lg font-bold text-xs uppercase tracking-[0.2em] transition-all duration-300 ${f||!l.trim()?"bg-neutral-900 text-neutral-600 cursor-not-allowed border border-neutral-800":"bg-brand-gold hover:bg-yellow-400 text-black shadow-[0_0_20px_rgba(251,191,36,0.4)] hover:shadow-[0_0_30px_rgba(251,191,36,0.6)]"}`,children:f?"Submitting...":"Table Proposal"})})]})]})]}):E.jsxs("div",{className:"glass-panel p-6 rounded-xl border border-white/5 text-center flex flex-col items-center gap-4",children:[E.jsx("svg",{className:"w-8 h-8 text-neutral-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),E.jsx("p",{className:"text-neutral-500 font-mono text-xs uppercase tracking-widest",children:"Proposal Submission Restricted to Jack+ Clearance"})]}),E.jsxs("div",{className:"space-y-8",children:[s.map(V=>{var Q,le,he;const N=oe(V),ye=V.status==="passed",ee=V.status==="failed",F=!ye&&!ee,ae=V.upvotes.includes(n.studentId)||V.downvotes&&V.downvotes.includes(n.studentId),_e=V.authorId===n.studentId,ue=h[V.authorId],Se=(ue==null?void 0:ue.username)||V.authorName,B=(ue==null?void 0:ue.currentCard)||V.authorRank;return E.jsxs("div",{className:`glass-panel border rounded-2xl p-8 transition-all duration-500 group relative overflow-visible ${ye?"border-emerald-500/30 bg-emerald-950/10":ee?"border-red-500/30 bg-red-950/10":"border-brand-gold/10 hover:border-brand-gold/30"}`,children:[(n.isAdmin||_e)&&E.jsx("button",{onClick:Ee=>M(Ee,V.id),className:"absolute top-4 right-4 z-50 p-2 bg-black hover:bg-red-500 text-neutral-500 hover:text-white rounded-lg transition-all border border-white/10 hover:border-red-500 shadow-xl cursor-pointer",title:"Delete Proposal",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),ye&&E.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 rotate-12 text-6xl text-emerald-500 font-black border-4 border-emerald-500 rounded-lg pointer-events-none",children:"PASSED"}),ee&&E.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 -rotate-12 text-6xl text-red-500 font-black border-4 border-red-500 rounded-lg pointer-events-none",children:"REJECTED"}),E.jsxs("div",{className:"flex flex-col md:flex-row gap-8 relative z-10",children:[E.jsxs("div",{className:"flex md:flex-col items-center gap-4 md:gap-2 justify-center md:justify-start min-w-[60px]",children:[E.jsx("button",{onClick:()=>ce(V,"up"),disabled:!F||ae,className:`p-2 rounded-full transition-all duration-200 ${!F||ae?"opacity-30 cursor-not-allowed":"hover:scale-110"} ${V.upvotes.includes(n.studentId)?"text-green-500 bg-green-500/10":"text-neutral-500 hover:text-green-400 hover:bg-white/5"}`,title:ae?"Vote Cast Locked":"Vote Yes",children:E.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5 15l7-7 7 7"})})}),E.jsxs("span",{className:`text-2xl font-display font-bold ${N>0?"text-brand-gold":N<0?"text-brand-red":"text-white"}`,children:[N>0?"+":"",N]}),E.jsx("button",{onClick:()=>ce(V,"down"),disabled:!F||ae,className:`p-2 rounded-full transition-all duration-200 ${!F||ae?"opacity-30 cursor-not-allowed":"hover:scale-110"} ${(Q=V.downvotes)!=null&&Q.includes(n.studentId)?"text-red-500 bg-red-500/10":"text-neutral-500 hover:text-red-400 hover:bg-white/5"}`,title:ae?"Vote Cast Locked":"Vote No",children:E.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 9l-7 7-7-7"})})})]}),E.jsxs("div",{className:"flex-1",children:[E.jsx("div",{className:"flex justify-between items-start mb-6",children:E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx(rs,{rankId:B,size:"sm",className:"w-12 h-16 shadow-lg border border-brand-gold/20"}),E.jsxs("div",{children:[E.jsx("h3",{className:"font-display font-bold text-xl text-white tracking-wide",children:Se}),E.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[E.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border font-bold uppercase tracking-wider ${ye?"text-emerald-500 bg-emerald-500/10 border-emerald-500/20":ee?"text-red-500 bg-red-500/10 border-red-500/20":"text-brand-gold bg-brand-gold/10 border-brand-gold/20"}`,children:ye?"Enacted":ee?"Failed":"Proposal"}),E.jsxs("span",{className:"text-white bg-black/50 border border-white/10 px-2 py-0.5 rounded text-[10px] font-mono",children:["Influence: ",oe(V)>0?"Positive":"Negative"]})]})]})]})}),E.jsx("p",{className:"text-neutral-200 text-lg leading-relaxed font-light whitespace-pre-wrap border-l-2 border-brand-gold/20 pl-6 mb-8",children:V.content}),te&&F&&E.jsxs("div",{className:"flex justify-end gap-4 border-t border-white/5 pt-6 mb-6",children:[E.jsx("button",{onClick:()=>D(V,"fail"),className:"px-4 py-2 border border-red-500/30 text-red-500 hover:bg-red-500 hover:text-white rounded text-xs font-bold uppercase tracking-widest transition-all",children:"Reject Motion"}),E.jsx("button",{onClick:()=>D(V,"pass"),className:"px-4 py-2 border border-emerald-500/30 text-emerald-500 hover:bg-emerald-500 hover:text-white rounded text-xs font-bold uppercase tracking-widest transition-all",children:"Pass Motion"})]}),E.jsxs("div",{className:"border-t border-white/5 pt-4",children:[E.jsxs("button",{onClick:()=>U(V.id),className:"text-xs text-neutral-500 font-bold uppercase tracking-widest hover:text-white flex items-center gap-2 mb-4",children:[E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 8h2a2 2 0 012 2v6a2 2 0 01-2 2h-2v4l-4-4H9a1.994 1.994 0 01-1.414-.586m0 0L11 14h4a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2v4l.586-.586z"})}),w.includes(V.id)?"Hide Deliberation":`View Deliberation (${((le=V.comments)==null?void 0:le.length)||0})`]}),w.includes(V.id)&&E.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-2",children:[E.jsxs("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:[(he=V.comments)==null?void 0:he.map(Ee=>{const Re=n.isAdmin||Ee.authorId===n.studentId,Ce=h[Ee.authorId],pt=(Ce==null?void 0:Ce.username)||Ee.authorName;return E.jsxs("div",{className:"bg-white/5 p-3 rounded-lg group/comment relative hover:bg-white/10 transition-colors",children:[Re&&E.jsx("button",{onClick:We=>O(We,V.id,Ee.id),className:"absolute top-2 right-2 bg-black text-neutral-600 hover:text-red-500 p-1.5 rounded transition-colors z-50 cursor-pointer border border-white/5",title:"Delete Comment",children:E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),E.jsxs("div",{className:"flex justify-between items-baseline mb-1 mr-8",children:[E.jsx("span",{className:"text-brand-gold text-xs font-bold",children:pt}),E.jsx("span",{className:"text-[10px] text-neutral-600 font-mono",children:new Date(Ee.createdAt).toLocaleDateString()})]}),E.jsx("p",{className:"text-sm text-neutral-300 pr-6",children:Ee.content})]},Ee.id)}),(!V.comments||V.comments.length===0)&&E.jsx("div",{className:"text-center text-neutral-600 text-xs italic py-4",children:"No remarks recorded."})]}),E.jsxs("div",{className:"flex gap-2",children:[E.jsx("input",{type:"text",value:T[V.id]||"",onChange:Ee=>x({...T,[V.id]:Ee.target.value}),placeholder:"Add your remark...",className:"flex-1 bg-black/30 border border-white/10 rounded-lg px-3 py-2 text-sm text-white focus:border-brand-gold outline-none",onKeyDown:Ee=>Ee.key==="Enter"&&R(V.id)}),E.jsx("button",{onClick:()=>R(V.id),className:"px-4 py-2 bg-white/10 hover:bg-white/20 text-white rounded-lg text-xs font-bold uppercase",children:"Send"})]})]})]})]})]})]},V.id)}),s.length===0&&E.jsxs("div",{className:"text-center py-24 glass-panel rounded-2xl border-dashed border-2 border-white/10",children:[E.jsx("p",{className:"text-neutral-500 font-display font-bold text-2xl mb-2",children:"Chamber Empty"}),E.jsx("p",{className:"text-neutral-600 font-mono text-xs uppercase tracking-widest",children:"No policies currently tabled"})]})]})]})},zV=({currentUser:n,onActivity:e})=>{const[t,s]=pe.useState("operatives"),[r,l]=pe.useState([]),[u,f]=pe.useState([]),[g,h]=pe.useState(null),[_,T]=pe.useState(!0),[x,w]=pe.useState(""),[k,q]=pe.useState(null),[P,H]=pe.useState({points:0,rank:"2",username:""});pe.useEffect(()=>{te()},[t]);const te=async()=>{T(!0);const[ee,F,ae]=await Promise.all([Ne.getAllUsers(),Ne.getPurchaseLogs(),Ne.getSettings()]);l(ee),f(F),h(ae),T(!1)},j=async(ee,F)=>{await Ne.updateSettings({[ee]:F}),te()},oe=async ee=>{await Ne.markDelivered(ee),te()},de=async ee=>{if(ee===n.studentId||ee==="S253456"){alert("PROTOCOL OVERRIDE: Cannot purge the Ace.");return}confirm(`CRITICAL: Purge operative ${ee}? This deletes their history and allows fresh registration.`)&&(await Ne.deleteUser(ee),await te(),e())},ce=async ee=>{if(ee===n.studentId||ee==="S253456"){alert("PROTOCOL OVERRIDE: Cannot ban the Ace.");return}confirm(`Restrict access for operative ${ee}? They will be locked out of the system.`)&&(await Ne.updateUserStatus(ee,{isBanned:!0}),await te(),e())},D=async ee=>{confirm(`Restore access for ${ee}? They will be able to log in immediately.`)&&(await Ne.updateUserStatus(ee,{isBanned:!1}),await te(),alert(`User ${ee} restored to active duty.`),e())},M=ee=>{q(ee.studentId),H({points:ee.totalPoints,rank:ee.currentCard,username:ee.username,password:""})},R=async ee=>{await Ne.updateUserStatus(ee,{totalPoints:P.points,currentCard:P.rank,currentRank:oo[P.rank].name,username:P.username}),P.password&&P.password.length>=8&&await Ne.updatePassword(ee,P.password),q(null),await te(),e()},O=["2","3","4","5","6","7","8","9","10","J","Q","K","A"],U=r.filter(ee=>ee.studentId.includes(x.toUpperCase())||ee.username.toLowerCase().includes(x.toLowerCase())),V=u.filter(ee=>!ee.delivered).length,N=(ee,F)=>{const ae=r.find(_e=>_e.studentId===ee);return ae?ae.username:F},ye=ee=>{const F=new Date(ee);return`${F.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})} on ${F.toLocaleDateString()}`};return E.jsxs("div",{className:"space-y-8 animate-in fade-in duration-700 pb-32",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center bg-brand-obsidian p-8 border border-white/5 rounded-3xl shadow-2xl gap-6 relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:E.jsx("svg",{className:"w-32 h-32",fill:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{d:"M12 2L1 21h22L12 2zm0 3.45l8.15 14.1H3.85L12 5.45zM11 16h2v2h-2v-2zm0-7h2v5h-2V9z"})})}),E.jsxs("div",{className:"relative z-10",children:[E.jsx("h1",{className:"text-4xl font-display font-black text-white",children:"ACE COMMAND"}),E.jsx("p",{className:"text-[10px] text-brand-red font-mono uppercase tracking-[0.4em] font-bold",children:"Protocol Overlord Interface"})]}),E.jsx("div",{className:"flex gap-2 bg-black/40 p-1.5 rounded-xl border border-white/5 relative z-10",children:["operatives","deliveries","protocol"].map(ee=>E.jsxs("button",{onClick:()=>s(ee),className:`px-6 py-2.5 text-[10px] font-bold uppercase rounded-lg transition-all flex items-center gap-2 ${t===ee?"bg-brand-red text-white shadow-lg":"text-neutral-500 hover:text-white hover:bg-white/5"}`,children:[ee,ee==="deliveries"&&V>0&&E.jsx("span",{className:"w-4 h-4 bg-white text-brand-red rounded-full flex items-center justify-center text-[8px] animate-pulse",children:V})]},ee))})]}),t==="deliveries"&&E.jsxs("div",{className:"space-y-6 max-w-5xl",children:[E.jsxs("h3",{className:"text-brand-gold font-bold uppercase tracking-[0.3em] text-xs mb-8 ml-2 flex items-center gap-3",children:[E.jsx("div",{className:"w-2 h-2 rounded-full bg-brand-gold animate-pulse"}),"Requisition Manifest Logs"]}),E.jsxs("div",{className:"space-y-4",children:[u.length===0&&E.jsx("div",{className:"p-20 text-center glass-panel rounded-3xl border-dashed border-2 border-white/5 opacity-20",children:E.jsx("p",{className:"text-sm font-mono uppercase tracking-widest",children:"No active requisitions recorded."})}),u.map(ee=>E.jsxs("div",{className:`p-8 rounded-3xl border transition-all duration-500 flex flex-col md:flex-row items-center justify-between gap-6 relative overflow-hidden ${ee.delivered?"bg-black/40 border-white/5 opacity-50 grayscale":"bg-brand-obsidian border-brand-red/20 shadow-[0_0_30px_rgba(217,35,35,0.05)]"}`,children:[E.jsxs("div",{className:"flex-1 space-y-4 text-center md:text-left",children:[E.jsxs("div",{className:"flex items-center gap-3 justify-center md:justify-start",children:[E.jsx("div",{className:`w-2 h-2 rounded-full ${ee.delivered?"bg-neutral-700":"bg-brand-red animate-pulse"}`}),E.jsxs("span",{className:"text-[10px] font-mono text-neutral-500 uppercase tracking-widest",children:["LOG_REF: ",ee.id]})]}),E.jsxs("p",{className:"text-lg font-display text-white leading-relaxed font-light",children:["Operative ",E.jsx("span",{className:"text-brand-gold font-bold",children:N(ee.buyerId,ee.buyerName)})," bought asset ",E.jsxs("span",{className:"text-white bg-white/10 px-2 py-0.5 rounded font-bold",children:['"',ee.artTitle,'"']})," at ",E.jsx("span",{className:"text-neutral-400 font-mono italic",children:ye(ee.timestamp)})," for ",E.jsxs("span",{className:"text-brand-gold font-bold",children:[ee.price," PTS"]}),"."]}),E.jsxs("p",{className:"text-[9px] text-neutral-600 font-mono uppercase tracking-[0.2em]",children:["Identifier: ",ee.buyerId]})]}),E.jsx("div",{className:"shrink-0",children:ee.delivered?E.jsxs("div",{className:"px-8 py-4 bg-white/5 border border-white/10 rounded-xl flex items-center gap-3 text-emerald-500 text-[10px] font-black uppercase tracking-[0.2em]",children:[E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Manifest Fulfilled"]}):E.jsx("button",{onClick:()=>oe(ee.id),className:"px-8 py-4 bg-emerald-600 hover:bg-emerald-500 text-white text-[10px] font-black uppercase tracking-[0.2em] rounded-xl shadow-2xl shadow-emerald-900/20 transition-all active:scale-95",children:"Confirm Delivery"})})]},ee.id))]})]}),t==="operatives"&&E.jsxs("div",{className:"space-y-6",children:[E.jsx("div",{className:"flex gap-4",children:E.jsx("input",{type:"text",placeholder:"Search operatives by ID or Name...",value:x,onChange:ee=>w(ee.target.value),className:"flex-1 bg-black/50 border border-white/10 rounded-2xl p-5 text-white font-mono placeholder-neutral-700 focus:border-brand-red outline-none transition-all shadow-inner"})}),E.jsx("div",{className:"grid grid-cols-1 gap-4",children:U.map(ee=>E.jsx("div",{className:`glass-panel p-6 rounded-2xl border ${ee.isBanned?"border-red-500/30 bg-red-950/5":"border-white/5"} transition-all hover:bg-white/2`,children:k===ee.studentId?E.jsxs("div",{className:"space-y-4 p-4 animate-in slide-in-from-left-2",children:[E.jsx("h3",{className:"text-xs font-bold text-brand-red uppercase tracking-widest mb-4",children:"Identity Editor Overlay"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 ml-1",children:"Display Alias"}),E.jsx("input",{type:"text",value:P.username,onChange:F=>H({...P,username:F.target.value}),className:"w-full bg-black p-3 border border-white/10 rounded-xl text-sm text-white focus:border-brand-red outline-none"})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 ml-1",children:"Point Balance"}),E.jsx("input",{type:"number",value:P.points,onChange:F=>H({...P,points:parseInt(F.target.value)}),className:"w-full bg-black p-3 border border-white/10 rounded-xl text-sm text-white font-mono focus:border-brand-red outline-none"})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[10px] uppercase font-bold text-neutral-500 ml-1",children:"Rank Card"}),E.jsx("select",{value:P.rank,onChange:F=>H({...P,rank:F.target.value}),className:"w-full bg-black p-3 border border-white/10 rounded-xl text-sm text-white focus:border-brand-red outline-none",children:O.map(F=>E.jsx("option",{value:F,children:F},F))})]})]}),E.jsxs("div",{className:"flex gap-4 justify-end pt-4",children:[E.jsx("button",{onClick:()=>q(null),className:"px-6 py-2 text-[10px] font-black text-neutral-500 uppercase tracking-widest",children:"Abort"}),E.jsx("button",{onClick:()=>R(ee.studentId),className:"px-10 py-3 bg-emerald-600 text-white rounded-xl font-black text-[10px] uppercase tracking-widest shadow-xl hover:bg-emerald-500 transition-all",children:"Apply Identity"})]})]}):E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-6",children:[E.jsx("div",{className:"transform group-hover:scale-110 transition-transform",children:E.jsx(rs,{rankId:ee.currentCard,size:"sm"})}),E.jsxs("div",{children:[E.jsxs("h4",{className:"font-display font-black text-white text-xl tracking-tight leading-none",children:[ee.username," ",E.jsxs("span",{className:"text-neutral-600 text-xs font-mono font-normal ml-2",children:["[",ee.studentId,"]"]})]}),E.jsxs("p",{className:"text-[10px] text-neutral-500 font-mono uppercase tracking-[0.2em] mt-2",children:[ee.currentRank,"  ",ee.totalPoints.toLocaleString()," PTS"]}),ee.isBanned&&E.jsx("span",{className:"inline-block text-[8px] font-black text-red-500 uppercase tracking-[0.3em] border border-red-500/30 px-2 py-0.5 rounded-full bg-red-500/5 mt-3 shadow-[0_0_15px_rgba(239,68,68,0.1)]",children:"Account Restricted"})]})]}),E.jsxs("div",{className:"flex gap-3",children:[E.jsx("button",{onClick:()=>M(ee),className:"p-3 bg-white/5 hover:bg-white/10 rounded-xl text-neutral-400 hover:text-white transition-all shadow-xl",title:"Edit Identity",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),ee.isBanned?E.jsx("button",{onClick:()=>D(ee.studentId),className:"p-3 bg-emerald-950/20 text-emerald-500 rounded-xl border border-emerald-900/40 shadow-xl",title:"Unban Operative",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}):E.jsx("button",{onClick:()=>ce(ee.studentId),className:"p-3 bg-red-950/20 text-red-500 rounded-xl border border-red-900/40 shadow-xl",title:"Ban Operative",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),E.jsx("button",{onClick:()=>de(ee.studentId),className:"p-3 bg-neutral-900 text-neutral-600 hover:text-red-500 rounded-xl border border-white/5 transition-colors shadow-xl",title:"Purge Record",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},ee.studentId))})]}),t==="protocol"&&g&&E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:E.jsxs("div",{className:"glass-panel p-10 rounded-[32px] border border-white/5 space-y-8 shadow-2xl",children:[E.jsxs("h3",{className:"text-xl font-display font-black text-white uppercase tracking-[0.2em] border-b border-white/5 pb-6 flex items-center gap-3",children:[E.jsx("div",{className:"w-2 h-8 bg-brand-red"}),"System Infrastructure"]}),E.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/20 rounded-2xl border border-white/5",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-sm font-bold text-white uppercase tracking-widest",children:"Emergency Lockdown"}),E.jsx("p",{className:"text-[10px] text-neutral-500 font-mono mt-1",children:"Freezes all system activity immediately."})]}),E.jsx("button",{onClick:()=>j("emergencyLockdown",!g.emergencyLockdown),className:`w-14 h-7 rounded-full transition-all relative ${g.emergencyLockdown?"bg-red-600":"bg-neutral-800"}`,children:E.jsx("div",{className:`absolute top-1 w-5 h-5 rounded-full bg-white shadow-lg transition-all ${g.emergencyLockdown?"left-8":"left-1"}`})})]}),E.jsxs("div",{className:"flex items-center justify-between p-4 bg-black/20 rounded-2xl border border-white/5",children:[E.jsxs("div",{children:[E.jsx("span",{className:"text-sm font-bold text-white uppercase tracking-widest",children:"Guest Access"}),E.jsx("p",{className:"text-[10px] text-neutral-500 font-mono mt-1",children:"Allows read-only access for unregistered users."})]}),E.jsx("button",{onClick:()=>j("allowGuestAccess",!g.allowGuestAccess),className:`w-14 h-7 rounded-full transition-all relative ${g.allowGuestAccess?"bg-emerald-600":"bg-neutral-800"}`,children:E.jsx("div",{className:`absolute top-1 w-5 h-5 rounded-full bg-white shadow-lg transition-all ${g.allowGuestAccess?"left-8":"left-1"}`})})]})]})})]})},jV=({expiresAt:n,onExpire:e})=>{const[t,s]=pe.useState("");return pe.useEffect(()=>{const r=()=>{const u=new Date().getTime(),f=new Date(n).getTime()-u;if(f<0)return e(),"EXPIRED";const g=Math.floor(f%(1e3*60*60*24)/(1e3*60*60)),h=Math.floor(f%(1e3*60*60)/(1e3*60)),_=Math.floor(f%(1e3*60)/1e3);return`${g.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`},l=setInterval(()=>{s(r())},1e3);return s(r()),()=>clearInterval(l)},[n,e]),E.jsxs("div",{className:"text-[10px] font-mono font-bold text-brand-red bg-black/80 px-2 py-1 rounded border border-brand-red/50 backdrop-blur-md shadow-lg",children:["EXPIRES IN: ",t]})};function YV({currentUser:n,onPurchase:e}){const[t,s]=pe.useState([]),[r,l]=pe.useState(!0),[u,f]=pe.useState(!1),[g,h]=pe.useState({title:"",imageUrl:"",artistId:"",description:"",price:100,durationHours:24});pe.useEffect(()=>{_()},[]);const _=async()=>{l(!0);const w=await Ne.getArtPieces(),k=new Date().getTime(),q=w.filter(P=>new Date(P.expiresAt).getTime()>k);s(q),l(!1)},T=async w=>{w.preventDefault();const k=new Date;k.setHours(k.getHours()+g.durationHours);const q={id:`art-${Date.now()}`,title:g.title,imageUrl:g.imageUrl,studentArtistId:g.artistId,description:g.description,price:g.price,ownerId:null,ownerName:null,createdAt:new Date().toISOString(),expiresAt:k.toISOString()};await Ne.uploadArt(q),f(!1),h({title:"",imageUrl:"",artistId:"",description:"",price:100,durationHours:24}),_()},x=async(w,k)=>{w.preventDefault(),w.stopPropagation(),confirm("PROTOCOL ALERT: Confirm permanent removal of this asset from the Vault?")&&(s(q=>q.filter(P=>P.id!==k)),await Ne.deleteArt(k))};return r&&t.length===0?E.jsxs("div",{className:"flex flex-col items-center justify-center p-20 space-y-4 text-center",children:[E.jsx("div",{className:"w-16 h-1 bg-brand-red rounded-full overflow-hidden animate-pulse mx-auto"}),E.jsx("p",{className:"text-xs font-mono text-neutral-500 uppercase tracking-widest",children:"Scanning Secure Vault..."})]}):E.jsxs("div",{className:"pb-32 space-y-12 animate-in fade-in duration-1000 relative",children:[E.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center bg-brand-obsidian p-10 rounded-3xl border border-white/5 relative overflow-hidden shadow-2xl",children:[E.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-5",children:E.jsx("svg",{className:"w-24 h-24",fill:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{d:"M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"})})}),E.jsxs("div",{className:"relative z-10 text-center md:text-left",children:[E.jsx("h1",{className:"text-5xl md:text-6xl font-display font-black text-white tracking-tighter",children:"THE VAULT"}),E.jsx("p",{className:"text-brand-gold font-mono text-xs uppercase tracking-[0.4em] mt-2 font-bold",children:"Secure Asset Repository"}),E.jsx("div",{className:"mt-6 p-4 bg-red-950/20 border border-red-500/30 rounded-2xl max-w-lg shadow-[0_0_20px_rgba(220,38,38,0.1)]",children:E.jsxs("p",{className:"text-[12px] font-bold text-red-400 uppercase tracking-widest leading-relaxed",children:["Go into global network and cancel uplink. ",E.jsx("br",{}),"Message the council asking if you can buy it. ",E.jsx("br",{}),"First person to offer wins the item."]})})]}),n.isAdmin&&E.jsx("button",{type:"button",onClick:()=>f(!u),className:"mt-6 md:mt-0 px-8 py-3 bg-white text-black font-black text-xs uppercase tracking-widest rounded-xl hover:scale-105 hover:bg-brand-gold transition-all shadow-xl relative z-[100] cursor-pointer",children:u?"Close Terminal":"Exhibit New Asset"})]}),u&&E.jsxs("form",{onSubmit:T,className:"glass-panel p-8 rounded-3xl border border-brand-gold/30 space-y-6 animate-in slide-in-from-top-4 duration-500 relative z-[200]",children:[E.jsx("h3",{className:"text-brand-gold font-bold uppercase tracking-widest text-sm",children:"Asset Metadata Entry"}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[10px] text-neutral-500 uppercase font-bold ml-1",children:"Asset Title"}),E.jsx("input",{type:"text",placeholder:"Title",value:g.title,onChange:w=>h({...g,title:w.target.value}),className:"w-full bg-black/50 p-4 rounded-xl border border-white/10 text-white outline-none focus:border-brand-gold transition-colors",required:!0})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[10px] text-neutral-500 uppercase font-bold ml-1",children:"Artist ID"}),E.jsx("input",{type:"text",placeholder:"S25XXXX",value:g.artistId,onChange:w=>h({...g,artistId:w.target.value}),className:"w-full bg-black/50 p-4 rounded-xl border border-white/10 text-white font-mono",required:!0})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[10px] text-neutral-500 uppercase font-bold ml-1",children:"Image URL"}),E.jsx("input",{type:"text",placeholder:"https://...",value:g.imageUrl,onChange:w=>h({...g,imageUrl:w.target.value}),className:"w-full bg-black/50 p-4 rounded-xl border border-white/10 text-white",required:!0})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[10px] text-neutral-500 uppercase font-bold ml-1",children:"Point Valuation (PTS)"}),E.jsx("input",{type:"number",value:g.price,onChange:w=>h({...g,price:parseInt(w.target.value)}),className:"w-full bg-black/50 p-4 rounded-xl border border-white/10 text-white font-mono",required:!0})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[10px] text-neutral-500 uppercase font-bold ml-1",children:"Expiry (Hours)"}),E.jsx("input",{type:"number",value:g.durationHours,onChange:w=>h({...g,durationHours:parseInt(w.target.value)}),className:"w-full bg-black/50 p-4 rounded-xl border border-white/10 text-white font-mono",required:!0})]})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[10px] text-neutral-500 uppercase font-bold ml-1",children:"Asset Intelligence"}),E.jsx("textarea",{placeholder:"Description...",value:g.description,onChange:w=>h({...g,description:w.target.value}),className:"w-full bg-black/50 p-4 rounded-xl border border-white/10 h-32 text-white resize-none"})]}),E.jsx("button",{type:"submit",className:"w-full bg-brand-gold py-5 text-black font-black uppercase text-xs tracking-[0.2em] rounded-xl shadow-2xl hover:brightness-110 transition-all cursor-pointer",children:"Authorize Publication"})]}),t.length===0&&!r?E.jsxs("div",{className:"text-center py-32 flex flex-col items-center justify-center glass-panel rounded-3xl border-dashed border-2 border-white/5 opacity-30",children:[E.jsx("div",{className:"text-7xl mb-6",children:""}),E.jsx("span",{className:"text-3xl font-display font-black text-white uppercase tracking-widest",children:"Inventory Depleted"}),E.jsx("p",{className:"mt-4 text-neutral-500 font-mono text-xs uppercase",children:"Check back for fresh asset drops"})]}):E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-12",children:t.map(w=>E.jsxs("div",{className:"flex flex-col group relative overflow-visible h-full",children:[E.jsx("div",{className:"absolute top-2 right-2 z-[9999] pointer-events-none",children:n.isAdmin&&E.jsx("button",{type:"button",onClick:k=>x(k,w.id),className:"pointer-events-auto p-3 bg-black hover:bg-brand-red text-neutral-500 hover:text-white rounded-xl transition-all border border-white/10 shadow-2xl cursor-pointer active:scale-95",title:"Purge Record",children:E.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})}),E.jsxs("div",{className:"flex-1 flex flex-col relative",children:[E.jsxs("div",{className:"relative p-6 transition-all duration-700 group-hover:scale-[1.01]",children:[E.jsx("div",{className:"absolute inset-0 bg-neutral-900 shadow-[10px_10px_40px_rgba(0,0,0,0.8)] rounded-sm group-hover:bg-neutral-800 transition-colors"}),E.jsx("div",{className:"absolute inset-1.5 border border-neutral-700 rounded-sm"}),E.jsx("div",{className:"absolute inset-6 bg-black shadow-[inset_0_0_30px_rgba(0,0,0,1)]"}),E.jsxs("div",{className:"relative aspect-[4/5] bg-neutral-950 overflow-hidden flex items-center justify-center border border-neutral-800/50",children:[E.jsx("img",{src:w.imageUrl,alt:w.title,className:"w-full h-full object-cover transform transition-transform duration-[1500ms] group-hover:scale-110"}),E.jsx("div",{className:"absolute top-3 left-3 z-20",children:E.jsx(jV,{expiresAt:w.expiresAt,onExpire:_})}),E.jsx("div",{className:"absolute bottom-4 inset-x-4 bg-black/90 backdrop-blur-md p-3 border border-white/10 rounded-lg translate-y-2 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500",children:E.jsx("p",{className:"text-[10px] font-bold text-emerald-400 text-center uppercase tracking-widest",children:"Message Council to Secure"})})]})]}),E.jsxs("div",{className:"mt-4 px-4 text-center pb-6",children:[E.jsx("h3",{className:"text-xl font-display font-bold text-white uppercase tracking-tighter mb-1 truncate",children:w.title}),E.jsxs("div",{className:"flex justify-center items-center gap-4 border-t border-white/5 pt-3 mb-2",children:[E.jsxs("p",{className:"text-brand-gold font-mono text-[9px] uppercase tracking-widest opacity-80",children:["ARTIST: ",w.studentArtistId]}),E.jsx("div",{className:"h-1 w-1 bg-neutral-700 rounded-full"}),E.jsxs("span",{className:"text-white font-mono font-black text-xs",children:[w.price," PTS"]})]}),E.jsx("p",{className:"text-[10px] text-neutral-500 font-light line-clamp-2 italic px-2",children:w.description||"Intelligence encrypted."})]})]})]},w.id))})]})}const JV=({currentUser:n,onActivity:e})=>{const[t,s]=pe.useState("timer"),[r,l]=pe.useState(!1),[u,f]=pe.useState(0),[g,h]=pe.useState(1500),[_,T]=pe.useState(0),[x,w]=pe.useState([]),k=pe.useRef(null);pe.useEffect(()=>{f(t==="timer"?g:0),l(!1)},[t,g]),pe.useEffect(()=>{(async()=>{const oe=await Ne.getAllUsers();w(oe.filter(de=>!de.isGuest).sort((de,ce)=>(ce.stats.minutesStudied||0)-(de.stats.minutesStudied||0)).slice(0,5))})()},[r]),pe.useEffect(()=>(r?k.current=window.setInterval(()=>{f(t==="stopwatch"?j=>j+1:j=>j<=1?(H(g),0):j-1)},1e3):k.current&&(clearInterval(k.current),k.current=null),()=>{k.current&&(clearInterval(k.current),k.current=null)}),[r,t,g]),pe.useEffect(()=>{let j=0;t==="stopwatch"?j=Math.floor(u/60):j=Math.floor((g-u)/60),T(j*nd.STUDY_MINUTE)},[u,t,g]);const q=()=>{if(n.isGuest){alert("ACCESS DENIED: Guest operatives cannot utilize the Focus Realm. Initialize Identity (Sign Up) to access.");return}l(!r)},P=()=>{if(t==="stopwatch")H(u);else{const j=g-u;H(j)}},H=async j=>{l(!1),k.current&&(clearInterval(k.current),k.current=null);const oe=Math.floor(j/60);if(oe<1&&!(t==="timer"&&u===0)){f(t==="timer"?g:0);return}const de=oe*nd.STUDY_MINUTE;if(de>0){const ce=await Ne.getUser(n.studentId);if(ce){const D={...ce,totalPoints:ce.totalPoints+de,stats:{...ce.stats,minutesStudied:(ce.stats.minutesStudied||0)+oe}};await Ne.saveUser(D),e(),alert(`SESSION COMPLETE: +${de} POINTS`)}}f(t==="timer"?g:0)},te=j=>{const oe=Math.floor(j/60),de=j%60;return`${oe.toString().padStart(2,"0")}:${de.toString().padStart(2,"0")}`};return E.jsxs("div",{className:"pb-32 grid grid-cols-1 lg:grid-cols-3 gap-8 animate-in fade-in duration-700",children:[E.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[E.jsxs("div",{className:"glass-panel p-10 rounded-3xl text-center relative overflow-hidden border border-white/10",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-brand-deepRed/20 via-transparent to-transparent pointer-events-none"}),E.jsxs("div",{className:"relative w-64 h-64 mx-auto mb-10 flex items-center justify-center",children:[E.jsx("div",{className:`absolute inset-0 rounded-full border-2 border-brand-red/20 ${r?"animate-ping opacity-20":""}`}),E.jsx("div",{className:`absolute inset-4 rounded-full border border-brand-red/40 ${r?"animate-spin opacity-40":""}`,style:{animationDuration:"10s"}}),E.jsx("div",{className:`w-48 h-48 rounded-full bg-gradient-to-br from-neutral-900 to-black border-4 border-brand-red shadow-[0_0_50px_rgba(217,35,35,0.2)] flex items-center justify-center z-10 transition-all duration-1000 ${r?"shadow-[0_0_80px_rgba(217,35,35,0.6)] scale-105":""}`,children:E.jsx("span",{className:"text-6xl font-mono font-bold text-white tracking-wider",children:te(u)})})]}),E.jsxs("div",{className:"flex justify-center gap-4 mb-8",children:[E.jsx("button",{onClick:()=>{l(!1),s("timer")},className:`px-6 py-2 rounded-full text-xs font-bold uppercase tracking-widest transition-all ${t==="timer"?"bg-white text-black":"text-neutral-500 hover:text-white"}`,children:"Timer"}),E.jsx("button",{onClick:()=>{l(!1),s("stopwatch")},className:`px-6 py-2 rounded-full text-xs font-bold uppercase tracking-widest transition-all ${t==="stopwatch"?"bg-white text-black":"text-neutral-500 hover:text-white"}`,children:"Stopwatch"})]}),t==="timer"&&!r&&E.jsx("div",{className:"flex justify-center gap-2 mb-8",children:[15,25,45,60].map(j=>E.jsx("button",{onClick:()=>{h(j*60),f(j*60)},className:`w-12 h-12 rounded-full border border-white/10 text-xs font-mono hover:border-brand-red hover:text-brand-red transition-all ${g===j*60?"border-brand-red text-brand-red bg-brand-red/10":"text-neutral-500"}`,children:j},j))}),E.jsx("div",{className:"flex justify-center gap-6",children:n.isGuest?E.jsx("button",{disabled:!0,className:"px-12 py-4 rounded-xl font-bold uppercase tracking-[0.2em] bg-neutral-900 text-neutral-600 border border-neutral-800 cursor-not-allowed",children:"Guest Restricted"}):E.jsxs(E.Fragment,{children:[E.jsx("button",{onClick:q,className:`px-12 py-4 rounded-xl font-bold uppercase tracking-[0.2em] transition-all shadow-xl ${r?"bg-neutral-800 text-neutral-400 border border-neutral-700 hover:text-white":"bg-brand-red text-white hover:bg-white hover:text-black shadow-brand-red/30"}`,children:r?"Pause":"Start Focus"}),r&&E.jsx("button",{onClick:P,className:"px-8 py-4 rounded-xl font-bold uppercase tracking-[0.2em] border border-red-500 text-red-500 hover:bg-red-500 hover:text-white transition-all",children:"Finish"})]})}),r&&E.jsxs("div",{className:"mt-8 text-brand-gold font-mono text-xs uppercase tracking-widest animate-pulse",children:["Gaining +",_," Points"]})]}),E.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[E.jsxs("div",{className:"glass-panel p-6 rounded-2xl border border-white/5",children:[E.jsx("p",{className:"text-neutral-500 text-[10px] uppercase tracking-widest mb-2",children:"My Total Focus"}),E.jsxs("p",{className:"text-3xl font-display font-bold text-white",children:[Math.floor((n.stats.minutesStudied||0)/60),E.jsx("span",{className:"text-sm text-neutral-500 ml-1",children:"h"})," ",(n.stats.minutesStudied||0)%60,E.jsx("span",{className:"text-sm text-neutral-500 ml-1",children:"m"})]})]}),E.jsxs("div",{className:"glass-panel p-6 rounded-2xl border border-white/5",children:[E.jsx("p",{className:"text-neutral-500 text-[10px] uppercase tracking-widest mb-2",children:"Earned Today"}),E.jsxs("p",{className:"text-3xl font-display font-bold text-brand-gold",children:["+",_]})]})]})]}),E.jsxs("div",{className:"lg:col-span-1 glass-panel rounded-2xl p-6 border border-white/5 h-fit",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-6 pb-4 border-b border-white/5",children:[E.jsx("div",{className:"w-8 h-8 rounded bg-brand-gold/10 flex items-center justify-center text-brand-gold",children:""}),E.jsx("h3",{className:"font-bold text-white uppercase tracking-widest text-sm",children:"Top Focused"})]}),E.jsxs("div",{className:"space-y-4",children:[x.map((j,oe)=>E.jsxs("div",{className:"flex items-center gap-4 group",children:[E.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center font-mono text-xs font-bold ${oe===0?"bg-brand-gold text-black":"bg-neutral-800 text-neutral-500"}`,children:oe+1}),E.jsxs("div",{className:"flex-1",children:[E.jsx("div",{className:"text-sm font-bold text-neutral-300 group-hover:text-white",children:j.username}),E.jsxs("div",{className:"text-[10px] text-neutral-600 font-mono",children:[Math.floor((j.stats.minutesStudied||0)/60),"h ",(j.stats.minutesStudied||0)%60,"m"]})]}),oe===0&&E.jsx("span",{className:"text-lg",children:""})]},j.studentId)),x.length===0&&E.jsx("div",{className:"text-neutral-600 text-xs italic",children:"No data available"})]})]})]})},oT=({src:n,type:e,className:t,alt:s,...r})=>{const[l,u]=pe.useState(n),[f,g]=pe.useState(!1);pe.useEffect(()=>{u(n),g(!1)},[n]);const h=()=>{if(!f){g(!0);const _=(s||"Asset Offline").toUpperCase();u(`https://placehold.co/800x800/0a0a0a/333/png?text=${encodeURIComponent(_)}`)}};return E.jsx("img",{src:l,alt:s||"Campaign Media",className:t,onError:h,...r})},KV=()=>{const n=pe.useRef(null);return pe.useEffect(()=>{const e=n.current;if(!e)return;const t=e.getContext("2d");if(!t)return;let s,r=Date.now();const l=60,u=50,f=()=>{const h=e.parentElement;h&&(e.width=h.clientWidth,e.height=h.clientWidth*.7)};f(),window.addEventListener("resize",f);const g=()=>{const h=Date.now(),T=(h-r)%8e3,x=e.width,w=e.height,k=x*.05,q=w*.05,P=x-k*2,H=w-q*2,te=P/l,j=H/u,oe=Math.min(te,j)*.35;t.fillStyle="#050505",t.fillRect(0,0,x,w);const de=Math.floor(l/2),ce=Math.floor(u/2);let D=0;T>3500&&T<5500?D=(T-3500)/2e3:T>=5500&&(D=1);for(let M=0;M<l;M++)for(let R=0;R<u;R++){const O=k+M*te+te/2,U=q+R*j+j/2,V=M===de&&R===ce;if(t.beginPath(),t.arc(O,U,oe,0,Math.PI*2),T<3500)if(V){const N=Math.sin(h/200)*.5+.5;t.fillStyle=`rgba(217, 35, 35, ${.5+N*.5})`,t.shadowBlur=10*N,t.shadowColor="#d92323"}else t.fillStyle="#1a1a1a",t.shadowBlur=0;else{const N=q+D*H;if(U<N){if(T>=5500){const ye=Math.sqrt(Math.pow(M-de,2)+Math.pow(R-ce,2)),ee=Math.sin(ye*.2-h/200)*.3+.7;t.fillStyle=`rgba(226, 177, 91, ${ee})`}else t.fillStyle="#e2b15b";t.shadowBlur=0}else U>=N&&U<N+j*2?(t.fillStyle="#ffffff",t.shadowBlur=10,t.shadowColor="#ffffff"):V?t.fillStyle="#d92323":t.fillStyle="#1a1a1a"}t.fill()}t.font=`bold ${Math.max(12,x/40)}px "JetBrains Mono"`,t.textAlign="right",t.textBaseline="bottom",T<3500?(t.fillStyle="#d92323",t.fillText("SIGNAL: 0.03% (WEAK)",x-20,w-20)):T<5500?(t.fillStyle="#ffffff",t.fillText("PROTOCOL: AMPLIFYING...",x-20,w-20)):(t.fillStyle="#e2b15b",t.fillText("IMPACT: 100% (MAXIMUM)",x-20,w-20)),t.textAlign="left",t.fillStyle="#333",t.fillText("STUDENTS: 3,000",20,w-20),s=requestAnimationFrame(g)};return g(),()=>{window.removeEventListener("resize",f),cancelAnimationFrame(s)}},[]),E.jsx("canvas",{ref:n,className:"w-full h-auto rounded-2xl border border-white/10 bg-black shadow-2xl"})};function rT({onEnterSystem:n}){const e=[{id:1,src:"https://raw.githubusercontent.com/Charm-Master/a7f3c9b3qhufg-sdrIGR9h9hh-323422x91q-tmpr4d2-assetsm02-static-001r82398r/refs/heads/main/i1.jpeg",title:"UNRELENTING DRIVE",subtitle:"THE DAILY COMMUTE",quote:`"Dedication isn't a speech. It's a five-hour daily journey. If I fight this hard just to get to school, imagine how hard I'll fight for you."`,context:"Bradford Interchange  06:00 AM",align:"right"},{id:2,src:"https://raw.githubusercontent.com/Charm-Master/a7f3c9b3qhufg-sdrIGR9h9hh-323422x91q-tmpr4d2-assetsm02-static-001r82398r/refs/heads/main/v3.jpeg",title:"FORGED IN THE WILD",subtitle:"EXPEDITIONS & RESILIENCE",quote:`"The map is not the territory. Real leadership is navigating the unknown when the path disappears. I don't just plan for the easy days."`,context:"Wilderness Expedition",align:"left"},{id:3,src:"https://m.media-amazon.com/images/I/61x6X7gelNL._SL1500_.jpg",title:"INTELLECTUAL RIGOR",subtitle:"PUBLISHED AUTHOR",quote:`"Words have power. I don't just speak; I write, I document, I create. My work is a testament to the depth of thought I bring to the table."`,context:"Available on Amazon",align:"right"},{id:4,src:"https://raw.githubusercontent.com/Charm-Master/a7f3c9b3qhufg-sdrIGR9h9hh-323422x91q-tmpr4d2-assetsm02-static-001r82398r/refs/heads/main/i3.jpeg",title:"DUTY & SERVICE",subtitle:"REMEMBRANCE SUNDAY",quote:'"We stand on the shoulders of giants. True service is about recognizing that we are part of something bigger than ourselves."',description:"In 2025-2026, I was honoured to serve as the Standard Bearer for West Yorkshire. Carrying the flag is more than a ceremony; it is a pledge of duty, respect, and unwavering service to our county.",context:"The Cenotaph",align:"left"}];return E.jsxs("div",{className:"min-h-screen bg-black text-white selection:bg-brand-red selection:text-white font-sans",children:[E.jsxs("section",{className:"relative min-h-[100dvh] flex flex-col items-center justify-center overflow-hidden px-6 py-20",children:[E.jsxs("div",{className:"absolute inset-0 z-0 bg-black",children:[E.jsx("div",{className:"absolute inset-0",children:E.jsx("img",{src:"https://raw.githubusercontent.com/Charm-Master/a7f3c9b3qhufg-sdrIGR9h9hh-323422x91q-tmpr4d2-assetsm02-static-001r82398r/refs/heads/main/i2.jpeg",className:"w-full h-full object-cover opacity-60",alt:"Campaign Hero"})}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/20 via-black/40 to-black z-10"})]}),E.jsxs("div",{className:"relative z-20 text-center max-w-6xl animate-in fade-in slide-in-from-bottom-12 duration-1000 mt-auto mb-auto",children:[E.jsxs("div",{className:"mb-6 flex items-center justify-center gap-4",children:[E.jsx("div",{className:"h-px w-8 md:w-16 bg-brand-red"}),E.jsx("h2",{className:"text-brand-red font-mono text-xs md:text-sm uppercase tracking-[0.3em] font-bold drop-shadow-[0_0_10px_rgba(217,35,35,0.8)]",children:"Vote Waris  Greenhead College"}),E.jsx("div",{className:"h-px w-8 md:w-16 bg-brand-red"})]}),E.jsxs("h1",{className:"text-6xl sm:text-7xl md:text-9xl font-display font-black tracking-tighter mb-8 leading-[0.9] drop-shadow-xl relative break-words",children:[E.jsxs("span",{className:"text-white/30 backdrop-blur-[2px]",children:["THE MAN ",E.jsx("br",{})," BEHIND"]})," ",E.jsx("span",{className:"text-brand-red",children:"THE PLAN"})]}),E.jsxs("p",{className:"max-w-xl mx-auto text-neutral-200 text-lg md:text-xl font-light mb-12 leading-relaxed drop-shadow-md mix-blend-screen px-4",children:["Revolutionizing Greenhead College through the ",E.jsx("strong",{className:"text-white",children:"Spades Protocol"}),". Gamified engagement. Real rewards. Student power."]}),E.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 sm:gap-6 w-full px-4",children:[E.jsx("button",{onClick:()=>{var t;return(t=document.getElementById("manifesto"))==null?void 0:t.scrollIntoView({behavior:"smooth"})},className:"w-full sm:w-auto px-8 py-4 border border-white/20 rounded-full hover:bg-white hover:text-black transition-all font-bold uppercase tracking-widest text-xs min-w-[200px] backdrop-blur-sm bg-black/20",children:"Why Vote Waris?"}),E.jsxs("button",{onClick:n,className:"w-full sm:w-auto group px-8 py-4 bg-brand-red rounded-full hover:scale-105 transition-all font-bold uppercase tracking-widest text-xs shadow-[0_0_30px_rgba(217,35,35,0.4)] min-w-[200px] flex items-center justify-center gap-2",children:[E.jsx("span",{children:"Enter System"}),E.jsx("svg",{className:"w-4 h-4 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})]})]}),E.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 animate-bounce opacity-50 hidden sm:block",children:E.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 14l-7 7-7-7"})})})]}),E.jsxs("div",{className:"w-full py-16 md:py-24 border-y border-white/5 bg-neutral-900/10 relative overflow-hidden flex items-center justify-center group",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-brand-red/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-1000"}),E.jsxs("h2",{className:"text-4xl sm:text-6xl md:text-8xl font-display font-black tracking-tighter text-white uppercase italic relative z-10 transition-all duration-700 group-hover:scale-[1.02]",children:["VOTE ",E.jsx("span",{className:"text-brand-red drop-shadow-[0_0_15px_rgba(217,35,35,0.5)]",children:"WARIS"})," 2026."]}),E.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-px bg-white/5 -translate-y-1/2 pointer-events-none"})]}),E.jsxs("section",{id:"manifesto",className:"py-32 px-6 max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-20 items-center",children:[E.jsxs("div",{className:"space-y-10 order-2 md:order-1",children:[E.jsx("div",{className:"inline-block border border-brand-red/30 bg-brand-red/5 px-4 py-2 rounded uppercase font-bold text-xs tracking-widest text-brand-red mb-2",children:"Candidate Profile"}),E.jsxs("h2",{className:"text-5xl md:text-7xl font-display font-black leading-[0.9]",children:["NOT JUST A ",E.jsx("br",{})," ",E.jsx("span",{className:"text-neutral-600",children:"CANDIDATE."})]}),E.jsxs("div",{className:"space-y-6 text-lg text-neutral-400 font-light leading-relaxed",children:[E.jsxs("p",{children:["I am ",E.jsx("strong",{className:"text-white",children:"Waris Taj Rattan Singh Dhaliwal"}),"."]}),E.jsxs("p",{children:["I am a developer, a strategist, a published author, and a student who believes Greenhead College deserves a digital revolution. Traditional campaigns are built on posters. This campaign is built on ",E.jsx("strong",{children:"code"}),"."]}),E.jsxs("p",{children:["The ",E.jsx("strong",{children:"Spades Protocol"})," is more than a platformit's a promise. A promise that your engagement matters, your voice is counted, and your effort is rewarded."]})]}),E.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 pt-4",children:[E.jsxs("div",{className:"p-6 border-l-2 border-brand-red bg-neutral-900/20 backdrop-blur-sm",children:[E.jsx("div",{className:"text-brand-red font-mono text-xs uppercase tracking-widest mb-2 font-bold",children:"The Goal"}),E.jsx("p",{className:"text-sm text-neutral-300",children:"To replace empty speeches with a working app. A system where you can vote, earn points, and actually lead."})]}),E.jsxs("div",{className:"p-6 border-l-2 border-brand-gold bg-neutral-900/20 backdrop-blur-sm",children:[E.jsx("div",{className:"text-brand-gold font-mono text-xs uppercase tracking-widest mb-2 font-bold",children:"The Method"}),E.jsx("p",{className:"text-sm text-neutral-300",children:"Simple. You log in, you study to earn rank, and you use your rank to vote on real college changes."})]})]})]}),E.jsxs("div",{className:"relative group order-1 md:order-2",children:[E.jsx("div",{className:"absolute inset-0 bg-brand-red/10 blur-[100px] rounded-full group-hover:bg-brand-red/20 transition-all duration-1000"}),E.jsxs("div",{className:"relative z-10 rounded-3xl overflow-hidden border border-white/10 shadow-2xl bg-black",children:[E.jsx(oT,{src:"https://raw.githubusercontent.com/Charm-Master/a7f3c9b3qhufg-sdrIGR9h9hh-323422x91q-tmpr4d2-assetsm02-static-001r82398r/refs/heads/main/v2.jfif",className:"w-full h-auto block",alt:"Candidate Portrait"}),E.jsxs("div",{className:"absolute bottom-6 left-6 right-6 p-4 bg-black/80 backdrop-blur-md border border-white/10 rounded-xl flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("div",{className:"text-white font-bold uppercase tracking-wider text-sm",children:"Vote Spades"}),E.jsx("div",{className:"text-brand-gold font-mono text-[10px]",children:"Election ID: #S253456"})]}),E.jsx("div",{className:"text-2xl",children:""})]})]})]})]}),E.jsxs("section",{className:"py-24 bg-[#030303] border-y border-white/5 relative overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-5"}),E.jsxs("div",{className:"max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-2 gap-16 items-center",children:[E.jsxs("div",{className:"relative z-10 space-y-10 order-2 md:order-1",children:[E.jsx("div",{className:"border-l-4 border-brand-red pl-8 py-2",children:E.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-black text-white leading-[1.1] mb-2",children:["1,500 IN THE YEAR. ",E.jsx("br",{}),E.jsx("span",{className:"text-neutral-600",children:"3,000 IN THE COLLEGE."})]})}),E.jsxs("div",{className:"space-y-6",children:[E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsx("div",{className:"bg-white/5 px-4 py-2 rounded-lg border border-white/10 font-mono text-xl text-white",children:"1  3,000"}),E.jsx("span",{className:"text-neutral-500 text-lg",children:"="}),E.jsx("div",{className:"bg-brand-red/10 px-4 py-2 rounded-lg border border-brand-red/30 font-mono text-xl text-brand-red font-bold",children:"0.03%"})]}),E.jsxs("p",{className:"text-2xl text-neutral-300 font-light leading-relaxed",children:["The current system limits your influence to 0.03%. ",E.jsx("br",{}),E.jsx("span",{className:"text-white font-bold",children:"We change the equation."})]})]}),E.jsxs("div",{className:"pt-6 border-t border-white/10",children:[E.jsxs("p",{className:"text-neutral-400 text-sm leading-relaxed max-w-lg mb-6",children:["Through the ",E.jsx("strong",{className:"text-white",children:"Spades Protocol"}),", we don't just count your vote. We execute it. We give you ",E.jsx("strong",{className:"text-brand-gold",children:"100% Impact"}),". We ensure your voice constitutes the command, not just a suggestion."]}),E.jsxs("div",{className:"inline-flex items-center gap-3 text-brand-gold font-bold uppercase tracking-widest text-xs bg-brand-gold/10 px-4 py-2 rounded border border-brand-gold/20",children:[E.jsx("span",{className:"w-2 h-2 bg-brand-gold rounded-full animate-pulse"}),"We guarantee the vote."]})]})]}),E.jsx("div",{className:"relative z-10 order-1 md:order-2",children:E.jsxs("div",{className:"relative group cursor-crosshair",children:[E.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-brand-red to-brand-gold opacity-20 blur-xl group-hover:opacity-40 transition-opacity duration-1000"}),E.jsx(KV,{}),E.jsx("div",{className:"absolute bottom-4 right-4 text-[10px] text-neutral-500 font-mono pointer-events-none",children:"LIVE POPULATION MATRIX"})]})})]})]}),E.jsxs("section",{className:"bg-[#050505] py-32 border-y border-white/5 relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 inset-x-0 h-px bg-gradient-to-r from-transparent via-brand-red/50 to-transparent"}),E.jsxs("div",{className:"max-w-7xl mx-auto px-6 relative z-10",children:[E.jsxs("div",{className:"text-center mb-20",children:[E.jsx("h3",{className:"font-mono text-brand-gold text-xs uppercase tracking-[0.5em] mb-4",children:"Core Directives"}),E.jsx("h2",{className:"text-4xl md:text-5xl font-display font-black text-white",children:"THE THREE PILLARS"})]}),E.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{id:"01",title:"Your Voice",subtitle:"Voting & Proposals",desc:"Don't just listenspeak. Vote on college rules directly from your phone. See every idea, cast your vote, and make change happen instantly.",icon:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},{id:"02",title:"Rewards",subtitle:"Points & Ranks",desc:"Get rewarded for the work you already do. Earn points for studying, climb the ranks, and unlock real privileges. Hard work pays off here.",icon:"M13 10V3L4 14h7v7l9-11h-7z"},{id:"03",title:"Community",subtitle:"The Student Market",desc:"A space for us. Share your notes, trade resources, or showcase your art. It's a student-run economy built for students.",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}].map((t,s)=>E.jsxs("div",{className:"group relative p-10 bg-[#0a0a0a] border border-white/5 rounded-3xl hover:border-brand-red/30 transition-all duration-500 hover:-translate-y-2",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-brand-red/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 rounded-3xl"}),E.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[E.jsx("div",{className:"w-16 h-16 rounded-2xl bg-black border border-white/10 flex items-center justify-center mb-8 group-hover:border-brand-red/50 group-hover:shadow-[0_0_30px_rgba(217,35,35,0.2)] transition-all",children:E.jsx("svg",{className:"w-8 h-8 text-neutral-400 group-hover:text-brand-red transition-colors",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:t.icon})})}),E.jsx("div",{className:"text-brand-red/50 font-mono text-6xl font-black absolute top-4 right-6 opacity-20 select-none",children:t.id}),E.jsx("h4",{className:"text-2xl font-bold mb-2 text-white",children:t.title}),E.jsx("p",{className:"text-brand-gold font-mono text-xs uppercase tracking-widest mb-6",children:t.subtitle}),E.jsx("p",{className:"text-neutral-500 text-sm leading-relaxed",children:t.desc})]})]},s))})]})]}),E.jsx("section",{className:"py-32 px-6 border-b border-white/5 bg-neutral-900/10",children:E.jsxs("div",{className:"max-w-7xl mx-auto space-y-32",children:[E.jsxs("div",{className:"text-center mb-24",children:[E.jsx("h3",{className:"font-mono text-brand-gold text-xs uppercase tracking-[0.5em] mb-4",children:"The Journey"}),E.jsx("h2",{className:"text-4xl md:text-5xl font-display font-black text-white",children:"CHARACTER IN ACTION"})]}),e.map((t,s)=>E.jsxs("div",{className:`flex flex-col md:flex-row items-center gap-12 md:gap-20 ${t.align==="left"?"md:flex-row-reverse":""}`,children:[E.jsxs("div",{className:"flex-1 space-y-8 text-center md:text-left",children:[E.jsxs("div",{className:`inline-flex items-center gap-2 px-3 py-1 rounded-full border border-white/10 bg-white/5 text-[10px] font-mono uppercase tracking-widest text-brand-gold ${t.align==="left"?"md:flex-row-reverse":""}`,children:[E.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-brand-red animate-pulse"}),t.context]}),E.jsx("h2",{className:"text-4xl md:text-6xl font-display font-black leading-[0.9] text-white",children:t.title}),E.jsx("h3",{className:"text-brand-red font-mono text-sm uppercase tracking-[0.3em] font-bold",children:t.subtitle}),E.jsxs("div",{className:"relative p-6 md:p-0",children:[E.jsx("span",{className:"absolute top-0 left-0 text-6xl font-serif text-white/5 -translate-y-4 -translate-x-4",children:""}),E.jsx("p",{className:"text-lg md:text-2xl font-light text-neutral-300 italic leading-relaxed relative z-10",children:t.quote}),t.description&&E.jsx("p",{className:"mt-6 text-sm md:text-base text-neutral-400 font-sans border-l-2 border-brand-red pl-6 leading-relaxed",children:t.description})]})]}),E.jsx("div",{className:"flex-1 w-full max-w-lg md:max-w-none",children:E.jsxs("div",{className:"relative group rounded-2xl overflow-hidden border border-white/10 shadow-2xl bg-black",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-brand-red/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500 z-20 pointer-events-none"}),E.jsx(oT,{src:t.src,alt:t.title,className:"w-full h-auto block transform transition-transform duration-1000 group-hover:scale-105"}),E.jsx("div",{className:"absolute bottom-4 right-4 z-30 opacity-50 group-hover:opacity-100 transition-opacity",children:E.jsx("svg",{className:"w-8 h-8 text-white drop-shadow-md",fill:"currentColor",viewBox:"0 0 24 24",children:E.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"})})})]})})]},t.id))]})}),E.jsxs("section",{className:"py-40 text-center px-6 relative overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] opacity-20"}),E.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-black"}),E.jsxs("div",{className:"relative z-10 max-w-4xl mx-auto",children:[E.jsxs("h2",{className:"text-6xl md:text-9xl font-display font-black mb-12 text-white tracking-tighter",children:["READY TO ",E.jsx("br",{})," ",E.jsx("span",{className:"text-brand-red",children:"ASCEND?"})]}),E.jsxs("p",{className:"text-neutral-400 text-lg mb-12 max-w-2xl mx-auto",children:["The system is online. The rank hierarchy is established. ",E.jsx("br",{}),"All that is missing is ",E.jsx("strong",{children:"you"}),"."]}),E.jsxs("button",{onClick:n,className:"group relative px-16 py-6 bg-white text-black font-black uppercase tracking-[0.3em] text-sm hover:bg-brand-red hover:text-white transition-all transform hover:scale-105 overflow-hidden rounded-lg",children:[E.jsx("span",{className:"relative z-10",children:"Initialize Protocol"}),E.jsx("div",{className:"absolute inset-0 bg-brand-red transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-300 -z-0"})]})]})]}),E.jsx("footer",{className:"py-12 border-t border-white/5 bg-black",children:E.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6 text-neutral-600 font-mono text-[10px] uppercase tracking-widest",children:[E.jsx("div",{children:" 2025 Spades Campaign. All Rights Reserved."}),E.jsx("div",{children:"Design and Development by Waris  S253456  VOTE WARIS 2026"})]})})]})}const $V=()=>E.jsxs("div",{className:"max-w-4xl mx-auto space-y-12 pb-32 animate-in fade-in duration-700",children:[E.jsxs("div",{className:"text-center py-12 relative",children:[E.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-brand-red/5 to-transparent blur-3xl rounded-full opacity-20 pointer-events-none"}),E.jsx("h1",{className:"text-5xl md:text-7xl font-display font-black text-white tracking-tighter mb-4 drop-shadow-[0_0_30px_rgba(255,255,255,0.1)]",children:"SYSTEM GUIDE"}),E.jsx("p",{className:"text-brand-gold font-mono text-xs uppercase tracking-[0.5em] font-bold bg-black/50 inline-block px-4 py-2 rounded-full border border-brand-gold/20",children:"Protocol Manual v2.4"})]}),E.jsxs("div",{className:"glass-panel p-10 rounded-3xl border border-white/10 bg-gradient-to-br from-neutral-900/80 to-black relative overflow-hidden group hover:border-brand-red/30 transition-colors duration-500",children:[E.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-brand-red/10 blur-[80px] rounded-full group-hover:bg-brand-red/20 transition-all"}),E.jsx("h3",{className:"text-2xl font-bold text-white mb-6 uppercase tracking-widest text-center",children:"Protocol Overview"}),E.jsxs("p",{className:"text-neutral-300 text-lg font-light leading-relaxed text-center max-w-3xl mx-auto",children:["Spades is a meritocratic ecosystem. It replaces popularity contests with ",E.jsx("span",{className:"text-white font-medium",children:"verifiable effort"}),". You ascend by engaging with the system and demonstrating academic discipline."]})]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[E.jsxs("div",{className:"glass-panel p-8 rounded-3xl border border-white/10 bg-gradient-to-b from-brand-red/5 to-transparent text-center hover:transform hover:-translate-y-2 transition-all duration-300",children:[E.jsx("div",{className:"w-12 h-12 bg-brand-red/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-brand-red/20",children:E.jsx("span",{className:"text-2xl",children:""})}),E.jsx("h3",{className:"text-brand-red font-bold uppercase tracking-widest text-xs mb-3",children:"Pillar I"}),E.jsx("h4",{className:"text-white font-bold text-xl mb-3",children:"Your Voice"}),E.jsx("p",{className:"text-sm text-neutral-400 font-light leading-relaxed",children:"Vote on proposals. The higher your rank, the heavier your vote."})]}),E.jsxs("div",{className:"glass-panel p-8 rounded-3xl border border-white/10 bg-gradient-to-b from-brand-gold/5 to-transparent text-center hover:transform hover:-translate-y-2 transition-all duration-300",children:[E.jsx("div",{className:"w-12 h-12 bg-brand-gold/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-brand-gold/20",children:E.jsx("span",{className:"text-2xl",children:""})}),E.jsx("h3",{className:"text-brand-gold font-bold uppercase tracking-widest text-xs mb-3",children:"Pillar II"}),E.jsx("h4",{className:"text-white font-bold text-xl mb-3",children:"Rewards"}),E.jsx("p",{className:"text-sm text-neutral-400 font-light leading-relaxed",children:"Earn points for academic focus and civic duty. Points unlock power."})]}),E.jsxs("div",{className:"glass-panel p-8 rounded-3xl border border-white/10 bg-gradient-to-b from-blue-500/5 to-transparent text-center hover:transform hover:-translate-y-2 transition-all duration-300",children:[E.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-blue-500/20",children:E.jsx("span",{className:"text-2xl",children:""})}),E.jsx("h3",{className:"text-blue-400 font-bold uppercase tracking-widest text-xs mb-3",children:"Pillar III"}),E.jsx("h4",{className:"text-white font-bold text-xl mb-3",children:"Community"}),E.jsx("p",{className:"text-sm text-neutral-400 font-light leading-relaxed",children:"Trade resources and engage in a student-run economy."})]})]}),E.jsxs("div",{className:"glass-panel p-10 rounded-3xl border border-white/10",children:[E.jsxs("h3",{className:"text-2xl font-bold text-white mb-8 uppercase tracking-widest flex items-center gap-3",children:[E.jsx("span",{className:"w-2 h-2 bg-brand-gold rounded-full animate-pulse"}),"Economy & Influence"]}),E.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[E.jsxs("div",{children:[E.jsxs("p",{className:"text-neutral-400 text-sm mb-8 leading-relaxed",children:["The system is balanced to reward ",E.jsx("strong",{children:"Academic Focus"})," and ",E.jsx("strong",{children:"Civic Participation"}),". Creating content does not grant points; interacting with policy does."]}),E.jsxs("ul",{className:"space-y-4",children:[E.jsxs("li",{className:"flex justify-between items-center p-4 bg-white/5 rounded-xl border border-brand-gold/20 hover:bg-white/10 transition-colors",children:[E.jsx("span",{className:"text-white font-bold text-sm",children:"Focus Realm (Studying)"}),E.jsx("span",{className:"text-brand-gold font-mono font-bold text-sm",children:"2 PTS / MIN"})]}),E.jsxs("li",{className:"flex justify-between items-center p-4 bg-white/5 rounded-xl border border-brand-gold/20 hover:bg-white/10 transition-colors",children:[E.jsx("span",{className:"text-white font-bold text-sm",children:"Casting a Vote (Council)"}),E.jsx("span",{className:"text-brand-gold font-mono font-bold text-sm",children:"5 PTS"})]}),E.jsxs("li",{className:"flex justify-between items-center p-4 bg-white/5 rounded-xl border border-white/5 opacity-50",children:[E.jsx("span",{className:"text-neutral-500 text-sm",children:"Posting Content"}),E.jsx("span",{className:"text-neutral-600 font-mono text-sm",children:"0 PTS"})]})]})]}),E.jsxs("div",{className:"flex flex-col justify-center text-center p-8 bg-black/40 rounded-2xl border border-white/10 relative overflow-hidden",children:[E.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-brand-gold/20 via-brand-gold to-brand-gold/20"}),E.jsx("div",{className:"text-5xl mb-6",children:""}),E.jsx("h4",{className:"text-white font-bold text-xl mb-2",children:"Weighted Voting"}),E.jsx("p",{className:"text-xs text-neutral-400 mb-6 px-4",children:"Rank determines impact. A senior officer's vote outweighs a novice's."}),E.jsxs("ul",{className:"text-xs text-neutral-500 font-mono space-y-2",children:[E.jsxs("li",{className:"flex justify-between px-4",children:[E.jsx("span",{children:"Student"})," ",E.jsx("span",{className:"text-white",children:"1x Influence"})]}),E.jsxs("li",{className:"flex justify-between px-4",children:[E.jsx("span",{children:"Contributor"})," ",E.jsx("span",{className:"text-white",children:"2x Influence"})]}),E.jsxs("li",{className:"flex justify-between px-4",children:[E.jsx("span",{children:"Scholar"})," ",E.jsx("span",{className:"text-white",children:"5x Influence"})]}),E.jsxs("li",{className:"flex justify-between px-4 border-t border-white/10 pt-2 mt-2",children:[E.jsx("span",{className:"text-brand-gold font-bold",children:"COUNCIL"})," ",E.jsx("span",{className:"text-brand-gold font-bold",children:"50x Influence"})]})]})]})]})]}),E.jsx("div",{className:"glass-panel p-10 rounded-3xl border border-emerald-500/20 bg-gradient-to-br from-emerald-950/30 to-black",children:E.jsxs("div",{className:"flex items-start gap-6",children:[E.jsx("div",{className:"p-4 bg-emerald-500/10 rounded-2xl border border-emerald-500/20 hidden md:block",children:E.jsx("svg",{className:"w-8 h-8 text-emerald-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),E.jsxs("div",{children:[E.jsx("h3",{className:"text-2xl font-bold text-white mb-4 uppercase tracking-widest",children:"The Vault & Academic Integrity"}),E.jsxs("p",{className:"text-neutral-300 text-sm leading-relaxed mb-6",children:["The Vault allows students to purchase artwork and resources using points earned from studying.",E.jsx("br",{}),E.jsx("br",{}),E.jsx("strong",{className:"text-emerald-400",children:"WARNING:"})," To maintain system integrity, ",E.jsx("span",{className:"text-white underline decoration-emerald-500/50",children:"study time is audited against real-world grades"}),"."]}),E.jsxs("div",{className:"p-4 bg-black/40 border border-white/10 rounded-xl text-xs text-neutral-400 font-mono leading-relaxed",children:[E.jsx("span",{className:"text-red-400 font-bold mr-2",children:"ANTI-FRAUD PROTOCOL:"}),"If a student accumulates massive study hours (leaving the timer running) but their real-world grades do not reflect this effort, purchased Vault assets will be revoked and points reset. Fraudulent activity prevents artwork distribution."]})]})]})}),E.jsxs("div",{className:"glass-panel p-10 rounded-3xl border border-white/10",children:[E.jsxs("div",{className:"text-center mb-10",children:[E.jsx("h3",{className:"text-2xl font-bold text-white uppercase tracking-widest mb-2",children:"Rank Structure"}),E.jsx("p",{className:"text-brand-red text-xs font-mono uppercase tracking-[0.2em] font-bold",children:"The Spades High Council: Jack  Queen  King  Ace"})]}),E.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:Object.values(oo).map(n=>E.jsxs("div",{className:`p-5 rounded-2xl border flex flex-col items-center text-center hover:bg-white/5 transition-all duration-300 hover:scale-105 ${["J","Q","K","A"].includes(n.id)?"bg-brand-red/5 border-brand-red/30 shadow-[0_0_20px_rgba(217,35,35,0.1)]":"bg-black/40 border-white/5"}`,children:[E.jsx("div",{className:"text-3xl font-display font-bold text-white mb-3",children:n.id.replace("","")}),E.jsx("div",{className:"text-[10px] text-brand-red uppercase font-bold mb-1 tracking-wider",children:n.tier}),E.jsxs("div",{className:"text-[9px] text-neutral-500 font-mono mb-2",children:[n.minPoints," PTS"]}),E.jsxs("div",{className:"text-[9px] text-brand-gold font-mono bg-brand-gold/10 px-2 py-0.5 rounded border border-brand-gold/20",children:["Power: ",n.voteWeight,"x"]})]},n.id))})]}),E.jsxs("div",{className:"glass-panel p-10 rounded-3xl border border-brand-red/20 bg-gradient-to-r from-brand-red/10 to-transparent",children:[E.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Acceleration Strategy"}),E.jsxs("p",{className:"text-neutral-300 text-sm leading-relaxed mb-6",children:[E.jsx("strong",{children:"Focus is currency."})," The system is designed to accelerate those who utilize the Focus Realm. 1 Hour of study equals 120 Points. This is the fastest path to the Council."]})]})]}),QV=({currentUser:n,onUpdate:e})=>{const[t,s]=pe.useState({current:"",new:"",confirm:""}),[r,l]=pe.useState({text:"",type:""}),u=async f=>{if(f.preventDefault(),l({text:"",type:""}),t.new!==t.confirm){l({text:"New passwords do not match.",type:"error"});return}if(t.new.length<8){l({text:"Password must be at least 8 characters.",type:"error"});return}if(n.passwordHash!==t.current){l({text:"Current password incorrect.",type:"error"});return}await Ne.updatePassword(n.studentId,t.new),l({text:"Security key updated successfully.",type:"success"}),s({current:"",new:"",confirm:""}),e()};return E.jsxs("div",{className:"max-w-2xl mx-auto space-y-8 pb-32 animate-in fade-in duration-700",children:[E.jsxs("div",{className:"text-center py-8",children:[E.jsx("h1",{className:"text-4xl font-display font-black text-white tracking-tight mb-2",children:"SETTINGS"}),E.jsx("p",{className:"text-brand-gold font-mono text-xs uppercase tracking-[0.4em]",children:"Account Security"})]}),E.jsxs("div",{className:"glass-panel p-8 rounded-2xl border border-white/5",children:[E.jsx("h3",{className:"text-lg font-bold text-white mb-6 uppercase tracking-wider",children:"Update Security Key"}),E.jsxs("form",{onSubmit:u,className:"space-y-6",children:[E.jsxs("div",{children:[E.jsx("label",{className:"block text-[10px] uppercase font-bold text-neutral-500 mb-2",children:"Current Password"}),E.jsx("input",{type:"password",value:t.current,onChange:f=>s({...t,current:f.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white focus:border-brand-red outline-none",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-[10px] uppercase font-bold text-neutral-500 mb-2",children:"New Password"}),E.jsx("input",{type:"password",value:t.new,onChange:f=>s({...t,new:f.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white focus:border-brand-red outline-none",required:!0})]}),E.jsxs("div",{children:[E.jsx("label",{className:"block text-[10px] uppercase font-bold text-neutral-500 mb-2",children:"Confirm New Password"}),E.jsx("input",{type:"password",value:t.confirm,onChange:f=>s({...t,confirm:f.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-xl p-3 text-white focus:border-brand-red outline-none",required:!0})]}),r.text&&E.jsx("div",{className:`p-3 rounded text-xs font-bold uppercase ${r.type==="error"?"bg-red-900/20 text-red-500":"bg-emerald-900/20 text-emerald-500"}`,children:r.text}),E.jsx("button",{type:"submit",className:"px-8 py-3 bg-brand-red text-white font-bold uppercase tracking-widest text-xs rounded-lg hover:bg-red-600 transition-colors",children:"Update Key"})]})]}),E.jsxs("div",{className:"glass-panel p-8 rounded-2xl border border-white/5 opacity-50",children:[E.jsx("h3",{className:"text-lg font-bold text-white mb-2 uppercase tracking-wider",children:"System Info"}),E.jsxs("p",{className:"text-sm text-neutral-400 font-mono",children:["ID: ",n.studentId]}),E.jsxs("p",{className:"text-sm text-neutral-400 font-mono",children:["Rank: ",n.currentCard]}),E.jsxs("p",{className:"text-sm text-neutral-400 font-mono",children:["Joined: ",new Date(n.joinDate).toLocaleDateString()]})]})]})},XV=({onLogin:n,onBack:e})=>{const[t,s]=pe.useState("login"),[r,l]=pe.useState(""),[u,f]=pe.useState(""),[g,h]=pe.useState(""),[_,T]=pe.useState(!1),[x,w]=pe.useState(null);pe.useEffect(()=>{Ne.getSettings().then(w)},[]);const k=async P=>{P.preventDefault(),h(""),T(!0);const H=r.toUpperCase();if(!H.match(/^S25(\d{4,5})$/)){h("ACCESS DENIED // INVALID FORMAT: S25XXXX"),T(!1);return}if(t==="login"){const j=await Ne.getUser(H);if(j){if(j.studentId==="S253456"&&j.isBanned){const oe={...j,isBanned:!1};await Ne.saveUser(oe),n(oe),T(!1);return}if(j.isBanned){h("ACCESS REVOKED // YOUR ACCOUNT HAS BEEN BANNED BY THE ACE."),T(!1);return}j.passwordHash===u?n(j):h("AUTHENTICATION FAILED // INVALID KEY")}else h("ACCESS DENIED // ACCOUNT NOT FOUND.")}else if(u.length<8)h("REGISTRATION FAILED // PASSWORD TOO WEAK");else if(await Ne.userExists(H))h("REGISTRATION FAILED // ID ALREADY REGISTERED");else{const oe={studentId:H,username:H,passwordHash:u,currentRank:"2 of Spades",currentCard:"2",totalPoints:0,joinDate:new Date().toISOString(),lastActive:new Date().toISOString(),yearGroup:13,house:["Phoenix","Dragon","Griffin","Raven"][Math.floor(Math.random()*4)],stats:{postsCreated:0,commentsCreated:0,votesGiven:0,resourcesShared:0,moderationsPerformed:0,minutesStudied:0},isAdmin:H==="S253456",requiresPasswordChange:!1,inventory:[]};await Ne.saveUser(oe),n(oe)}T(!1)},q=async()=>{T(!0);const H={studentId:`GUEST-${Math.floor(1e3+Math.random()*9e3)}`,username:"Visitor",passwordHash:"",currentRank:"2 of Spades",currentCard:"2",totalPoints:0,joinDate:new Date().toISOString(),lastActive:new Date().toISOString(),yearGroup:13,house:"Phoenix",stats:{postsCreated:0,commentsCreated:0,votesGiven:0,resourcesShared:0,moderationsPerformed:0,minutesStudied:0},isAdmin:!1,requiresPasswordChange:!1,inventory:[],isGuest:!0};await Ne.saveUser(H),n(H)};return E.jsxs("div",{className:"min-h-screen bg-[#020202] flex items-center justify-center p-4 relative overflow-hidden font-sans",children:[E.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/dark-matter.png')] opacity-[0.4] mix-blend-overlay"}),E.jsxs("div",{className:"max-w-[900px] w-full grid grid-cols-1 md:grid-cols-2 bg-[#050505]/80 backdrop-blur-3xl border border-white/5 rounded-[32px] shadow-2xl relative overflow-hidden",children:[E.jsx("button",{onClick:e,className:"absolute top-6 left-6 text-neutral-600 hover:text-white transition-colors z-30",children:E.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})})}),E.jsxs("div",{className:"relative p-12 bg-black/50",children:[E.jsxs("h1",{className:"text-6xl font-display font-black text-white tracking-tighter mb-4",children:["SPA",E.jsx("span",{className:"text-brand-red",children:"DES"})]}),E.jsx("p",{className:"text-brand-gold font-mono text-xs uppercase tracking-[0.4em] font-bold opacity-80",children:"The Spades Protocol"})]}),E.jsxs("div",{className:"p-12 bg-[#080808] border-l border-white/5 flex flex-col justify-center",children:[E.jsx("div",{className:"flex gap-4 mb-10 border-b border-white/5",children:["login","register"].map(P=>E.jsx("button",{onClick:()=>{s(P),h("")},className:`pb-2 text-xs font-bold uppercase tracking-widest ${t===P?"text-white border-b-2 border-brand-red":"text-neutral-500 hover:text-white"}`,children:P},P))}),E.jsxs("form",{onSubmit:k,className:"space-y-6",children:[E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-widest",children:"Student ID"}),E.jsx("input",{type:"text",value:r,onChange:P=>l(P.target.value),placeholder:"S25XXXX",maxLength:8,className:"w-full bg-[#111] border border-[#222] rounded-xl p-4 text-white font-mono"})]}),E.jsxs("div",{className:"space-y-2",children:[E.jsx("label",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-widest",children:"Security Key"}),E.jsx("input",{type:"password",value:u,onChange:P=>f(P.target.value),placeholder:"",className:"w-full bg-[#111] border border-[#222] rounded-xl p-4 text-white font-mono"})]}),g&&E.jsx("div",{className:"p-3 bg-red-950/20 border border-red-900/40 rounded-lg text-red-400 text-[10px] font-mono uppercase leading-relaxed",children:g}),E.jsx("button",{type:"submit",disabled:_,className:"w-full bg-white text-black font-bold py-4 rounded-xl hover:scale-[1.01] transition-all uppercase tracking-widest text-xs",children:_?"Processing...":t==="login"?"Authenticate":"Initiate Identity"})]}),(x==null?void 0:x.allowGuestAccess)&&E.jsx("div",{className:"mt-6 pt-6 border-t border-white/5",children:E.jsxs("button",{onClick:q,disabled:_,className:"w-full py-3 text-neutral-500 hover:text-white font-mono text-xs uppercase tracking-widest transition-colors flex items-center justify-center gap-2",children:[E.jsx("span",{children:"Continue as Guest"}),E.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})]})]})},WV=({user:n,onSuccess:e})=>{const[t,s]=pe.useState(""),[r,l]=pe.useState(""),[u,f]=pe.useState(""),[g,h]=pe.useState(!1),_=async T=>{if(T.preventDefault(),f(""),t.length<8)return f("Password must be at least 8 characters.");if(t!==r)return f("Passwords do not match.");h(!0),await Ne.updatePassword(n.studentId,t),h(!1),e()};return E.jsx("div",{className:"min-h-screen bg-[#020202] flex items-center justify-center p-4",children:E.jsxs("div",{className:"max-w-md w-full bg-[#080808] border border-red-900/40 rounded-3xl p-10 shadow-[0_0_50px_rgba(220,38,38,0.2)]",children:[E.jsx("div",{className:"flex justify-center mb-6",children:E.jsx("div",{className:"w-16 h-16 rounded-full bg-red-900/20 flex items-center justify-center animate-pulse",children:E.jsx("svg",{className:"w-8 h-8 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:E.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})}),E.jsx("h2",{className:"text-2xl font-display font-bold text-white text-center mb-2",children:"SECURITY ALERT"}),E.jsx("p",{className:"text-center text-neutral-500 text-xs font-mono uppercase tracking-widest mb-8",children:"Protocol Requires Mandatory Key Change"}),E.jsxs("form",{onSubmit:_,className:"space-y-4",children:[E.jsx("input",{type:"password",value:t,onChange:T=>s(T.target.value),placeholder:"New Secure Key",className:"w-full bg-[#111] border border-[#222] rounded-xl p-4 text-white font-mono"}),E.jsx("input",{type:"password",value:r,onChange:T=>l(T.target.value),placeholder:"Confirm Secure Key",className:"w-full bg-[#111] border border-[#222] rounded-xl p-4 text-white font-mono"}),u&&E.jsx("div",{className:"p-3 bg-red-950/20 text-red-400 text-xs font-bold text-center",children:u}),E.jsx("button",{type:"submit",disabled:g,className:"w-full bg-brand-red text-white font-bold py-4 rounded-xl uppercase tracking-widest text-xs hover:bg-red-600 transition-colors",children:g?"Securing...":"Update Protocol"})]})]})})},ZV=()=>{const[n,e]=pe.useState(null),[t,s]=pe.useState("portfolio"),[r,l]=pe.useState("dashboard"),[u,f]=pe.useState(0),g=pe.useCallback(async x=>{const w=["2","3","4","5","6","7","8","9","10","J","Q","K","A"];let k=w.indexOf(x.currentCard),q=0;for(let P=0;P<w.length;P++)x.totalPoints>=oo[w[P]].minPoints&&(q=P);if(q>k){const P=w[q],H={...x,currentCard:P,currentRank:oo[P].name};await Ne.saveUser(H),e(H)}else e(x)},[]),h=pe.useCallback(async()=>{const x=localStorage.getItem("session_user_id");if(!x)return;const w=await Ne.getUser(x);w&&(w.isBanned&&w.studentId!=="S253456"?T():(e(w),g(w),f(k=>k+1)))},[g]);pe.useEffect(()=>{const x=localStorage.getItem("session_user_id");x&&Ne.getUser(x).then(q=>{if(q){if(q.studentId==="S253456"&&q.isBanned){Ne.updateUserStatus("S253456",{isBanned:!1}).then(()=>{const P={...q,isBanned:!1};e(P),s("app")});return}q.isBanned?T():(e(q),s("app"),g(q))}});const w=q=>{(q.key==="users"||q.key==="art_pieces")&&h()},k=()=>{h()};return window.addEventListener("storage",w),window.addEventListener("storage_update",k),()=>{window.removeEventListener("storage",w),window.removeEventListener("storage_update",k)}},[h,g]);const _=x=>{localStorage.setItem("session_user_id",x.studentId),e(x),s("app"),g(x)},T=()=>{localStorage.removeItem("session_user_id"),e(null),s("portfolio")};return t==="portfolio"?E.jsx(rT,{onEnterSystem:()=>s("auth")}):t==="auth"&&!n?E.jsx(XV,{onLogin:_,onBack:()=>s("portfolio")}):n?n.requiresPasswordChange&&!n.isGuest?E.jsx(WV,{user:n,onSuccess:h}):E.jsxs("div",{className:"min-h-screen bg-[#020202] text-neutral-100 flex font-sans",children:[E.jsx(NN,{user:n,activeTab:r,onTabChange:l,onLogout:T}),E.jsx("main",{className:"flex-1 md:ml-72 p-4 md:p-10 overflow-x-hidden relative",children:E.jsxs("div",{className:"max-w-6xl mx-auto mt-20 md:mt-0 relative z-10",children:[r==="dashboard"&&E.jsx(GV,{user:n}),r==="feed"&&E.jsx(BV,{currentUser:n,refreshTrigger:u,onActivity:h}),r==="focus"&&E.jsx(JV,{currentUser:n,onActivity:h}),r==="gallery"&&E.jsx(YV,{currentUser:n,onPurchase:h}),r==="leaderboard"&&E.jsx(FV,{}),r==="council"&&E.jsx(HV,{currentUser:n,refreshTrigger:u,onActivity:h}),r==="guide"&&E.jsx($V,{}),r==="settings"&&E.jsx(QV,{currentUser:n,onUpdate:h}),r==="admin"&&n.isAdmin&&E.jsx(zV,{currentUser:n,onActivity:h})]})})]}):E.jsx(rT,{onEnterSystem:()=>s("auth")})};Ne.init().then(()=>{const n=document.getElementById("root");if(!n)throw new Error("Failed to find the root element");Rb.createRoot(n).render(E.jsx(xb.StrictMode,{children:E.jsx(ZV,{})}))});</script>
  <style rel="stylesheet" crossorigin>@tailwind base;@tailwind components;@tailwind utilities;</style>
</head>
  <body>
    <div class="cinematic-bg"></div>
    <div class="noise-overlay"></div>
    <div id="root"></div>
  </body>
</html>